{"version":3,"sources":["../../03/JScomponents/modules/dataHandler/filterLocation.js","../../03/JScomponents/modules/dataHandler/filterYear.js","../../03/JScomponents/modules/dataHandler/flipData.js","../../03/JScomponents/modules/dataHandler/getHumanReadData.js","../../03/JScomponents/modules/dataHandler/sortDimensions0.js","../../03/JScomponents/modules/dataHandler/sortDimensions0sum.js","../../03/JScomponents/modules/dataHandler/sortDimensions1.js","../../03/JScomponents/modules/dataHandler/getLatestYearData.js","../../03/JScomponents/modules/dataHandler/getTableData.js","../../03/JScomponents/modules/maps/getMapData.js","../../03/JScomponents/modules/maps/getIndicatorColorScale.js","../../03/JScomponents/modules/maps/getBubbleSize.js","../../03/JScomponents/modules/maps/getDisputedLines.js","../../03/JScomponents/modules/maps/getMapSubPoints.js","../../03/JScomponents/modules/maps/addMapLayers.js","../../03/JScomponents/modules/maps/updateLegend.js","../../03/JScomponents/modules/maps/mapStandardPlotting.js","../../03/JScomponents/modules/maps/highlightAndPopup.js","../../03/JScomponents/modules/maps/getFlows.js","../../03/JScomponents/modules/maps/updateFlowData.js","../../03/JScomponents/modules/mapTeaser/mapTeaserText.js","../../03/JScomponents/modules/mapTeaser/mapTeaserTextMulti.js","../../03/JScomponents/modules/mapTeaser/mapTeaserExportRestrictions.js","../../03/JScomponents/modules/mapTeaser/mapTeaserExportRestrictionsMain.js","../../03/JScomponents/modules/mapTeaser/mapTeaserIfiCountryData.js","../../03/JScomponents/modules/mapLayers/mapLayerFuncs.js","../../03/JScomponents/modules/mapLayers/updateCountryProfile.js","../../03/JScomponents/modules/mapLayers/updateCountryProfileSimple.js","../../03/JScomponents/modules/tables/addSimpleTable.js","../../03/JScomponents/modules/tables/addComplexTable.js","../../03/JScomponents/modules/highcharts/simpleChartsCore.js","../../03/JScomponents/modules/highcharts/simpleChartConfigs.js","../../03/JScomponents/modules/mapLayers/mapWizardLayer.js"],"names":["filterLocation","d","filter","parseFilter","$","each","k","v","push","toUpperCase","newData","title","definition","options","data","dimensions","keys","key","value","inArray","a","indexOf","filterYear","idxYear","cr","yKey","flipData","r","slice","reverse","map","i0","i1","getHumanReadData","number","decimals","trimZeros","decimalAdjust","type","exp","Math","isNaN","NaN","toString","split","toFixed","s","replace","undefined","parseFloat","abs","window","lang_labels","val","test","sortDimension0","key1","desc","sorted","i","sort","b","sortDimension0sum","add","reduce","sortDimension1","key0","l","getLatestYearData","latestYear","length","getTableData","getMapData","wizardConfig","page","countrylist","Chart","minValueLatest","series","min","maxValueLatest","arrayValue","max","getCountryData","group","tab","project","tabs","mapType","flowStatus","ConfigProject","charts","pageCharts","DataforMap","DataforMap1","defaultLayer","labels","order","name","unit","minimum","maximum","chart","values","mobx","observable","id","lang","years","selectedYear","location","search","match","this","_values","extend","mapRegion","_min","_max","dMax","dMin","minColor","quantize","MapColors","x","idx","maxColor","colors","mapDivergent","computed","keepAlive","deep","map1","flow","getIndicatorColorScale","feature","properties","mapCode","toLowerCase","MapGroup","landmass","range","scaleMin","scaleMax","floor","getBubbleSize","radius","sqrt","getDisputedLines","lines","disputedLinesNew","features","SOVEREIGNT","getMapSubPoints","mapCentroides","themeURL","mapSubPoints","smallIslands","addMapLayers","bubbleMap","mapdataviz","bubbles","layerName","L","geoJson","mapShapes","style","getBasicCountryShapesStyle","clickable","addTo","matchIndex","value1","colorIndicator","pointToLayer","bubblesSizeColorGeneric","onEachFeature","highlightAndPopup","html","text","updateMultiLegend","mapLayerIndex","mapLayerMatchIndex","width","control","layers","collapsed","click","index","parent","closePopup","updateLegend","bubblesSimpleGeneric","updateFlowData","maxBubble","clearFlows","clearFlowLegend","shapes","layerGroup","forEach","runOnce","getColorCountryShapesStyleGeneric","bubblesSimpleColorGeneric","stamp","eachLayer","setStyle","DataforMapAll","embed","action","autorun","f1","f2","done","reaction","dispose","textColor","hex","rgb","parseInt","apply","Data","mode","playStart","button","clearInterval","STOP","setInterval","playStep","playStop","PLAY","pos","el","slider","empty","append","color","addClass","css","sliderHeight","subtext","lang_countries","show","hide","relatedDataControl","updateColors","sliderCreated","disabled","off","start","change","ev","ui","originalTarget","setLegend","chartType","layerData","weight","landmassBorderWidth","opacity","landmassBorder","fillOpacity","fillColor","landmassNA","className","landmassGroup","latlng","circleMarker","getBubbleStyleGeneric","colorData","getBubbleColorGeneric","sizeData","getBubbleSizeColorGeneric","bubbleColor","bubbleDefaultColor","bubbleDefaultBorder","layer","interaction","clickFlow","highlightAndPopupClick","inEuroArea","on","mouseover","inFront","bubbleHighlightBorder","shapeHighlightBorder","bringToFront","mouseout","disputedLines","flowGroup","sublayer","Util","setOptions","e","target","layerCode","activeLayer","addLines","center","stars","getFlows","colorIdx","centroides","updateFlowLegend","clearLayers","country","getLineSize","DataforFlow","idxCountry","crData","crData1","flowLabels","tableHead1","en","cn","tableHead2","world","unspecified","asia","headlinePrefix","headlineSuffix","remove","legendData","round","centros","Lat","Long","polyline","latlong","fill","addLayer","indicator","ajaxSuccess","alert","ajax","dataType","url","baseURL","success","error","xhr","ajaxOptions","thrownError","status","mapTeaserText","euGroup","teaser","teaserTitle","teaserTable","countryProfile","attr","countrynotes","countryName","ISO3toFlags","tableLineCanvas","tooltipData","dataValue","hasData","ChartsWithData","after","mapTeaserTextMulti","tableLines","tableLine","mapTeaserExportRestrictions","labels2","1","2","3","4","5","6","mapTeaserExportRestrictionsMain","mapTeaserIfiCountryData","links","link","largeContainer","height","top","topLarge","fadeIn","fadeOut","padding-top","largeContainerPDF","smallContainer","animate","heightSmall","startContainer","updateCountryProfile","profileCountry","subTabs","subTab","subTabVal","content","section","subSection","element","parts","addChartSections","subSubSection","subkey","subcontent","display","expand","expandElements","nextUntil","slideToggle","toggle","find","sectionName","sectionLevel","config","chartHeader","ConfigSubCharts","tooltipUnit","addSimpleTable","legendType","addLineChart","addColumnChart","highlightDataPoint","lang_countries_titles","updateCountryProfileSimple","complexTable","complexCharts","addBarChart","complexTableLabel","addComplexTable","tablesorter","formatInt","formatFloat","sortList","headers","sorter","textExtraction","node","txt","tableLabels","0","selectedLabels","rows","concat","commodityLabels","purposeCodes","labels1","labels3","A","B","C","D","E","F","G","H","I","J","labels4","labels5","head","comLabel","purpCode","restrictExplain","purpCodeExplain","purpCodeList","codeValue","valRow1","valRow2","labelRow1","labelRow2","ChartElement","self","loadChart","newChart","chartBasis","loadData","displayCharts","container","displayChart","loadedData","defaults","highcharts","backgroundColor","plotOptions","marker","enabled","states","hover","pointPadding","borderWidth","connectNulls","exporting","legend","credits","xAxis","step","fontSize","yAxis","CYCoptions","typeOfFirstSeries","categories","dataPoints","y","cats","seriesOptions","renderTo","Highcharts","labelFormat","translatedLables","flag","tooltipFormat","points","numericSymbols","sbars","verticalAlign","padding","margin","markers","lineWidth","reversed","tickmarkPlacement","font-size","tooltip","shared","useHTML","headerFormat","pointFormat","footerFormat","tooltipDecimals","addLineStackedBarChart","area","stacking","bar","column","addStackedAreaChart","marginBottom","dataLabels","overflow","crop","allowOverlap","gridLineWidth","addBarChartFlag","translatedLabels","marginLeft","formatter","addBarsDiamondsChart","lineWidthPlus","addStackedColumnChart","addStackedBarChart","addPyramidRight","animation","opposite","addPyramidLeft","disposer","teaserText","specialTooltip","specialTooltipLinks","popup","setContent","setLatLng","openOn","document","ready","subTabsType","teaserLayer","secondVisit","TabCountryNote","siblings","removeClass"],"mappings":"AAGA,QAASA,gBAAeC,EAAEC,QACxB,GAAIC,eACJC,GAAEC,KAAKH,OAAQ,SAAUI,EAAEC,GACzBJ,YAAYK,KAAKD,EAAEE,gBAEtB,IAAIC,WAiBJ,OAhBAA,SAAe,MAAIT,EAAEU,MACrBD,QAAoB,WAAIT,EAAEW,WAC1BF,QAAiB,QAAIT,EAAEY,QACvBH,QAAc,QACdA,QAAQI,KAAiB,WAAIb,EAAEa,KAAKC,WACpCL,QAAQI,KAAW,QACnBJ,QAAQI,KAAW,KAAE,MACrBJ,QAAQI,KAAW,KAAE,GAAKb,EAAEa,KAAKE,KAAK,GACtCN,QAAQI,KAAW,QACnBV,EAAEC,KAAKJ,EAAEa,KAAKE,KAAK,GAAI,SAAUC,IAAIC,OACpC,GAAId,EAAEe,QAAQD,MAAMT,cAAcN,cAAc,EAAG,CAClDO,QAAQI,KAAKE,KAAK,GAAGR,KAAKU,MAAMT,cAChC,IAAIW,GAAInB,EAAEa,KAAKE,KAAK,GAAGK,QAAQH,MAC/BR,SAAQI,KAAKA,KAAKN,KAAKP,EAAEa,KAAKA,KAAKM,OAG9BV,QCtBR,QAASY,YAAWrB,EAAEC,QACrB,GAAIQ,WACJA,SAAe,MAAIT,EAAEU,MACrBD,QAAoB,WAAIT,EAAEW,WAC1BF,QAAiB,QAAIT,EAAEY,QACvBH,QAAc,QACdA,QAAQI,KAAiB,WAAIb,EAAEa,KAAKC,WACpCL,QAAQI,KAAW,QACnBJ,QAAQI,KAAW,KAAE,GAAKb,EAAEa,KAAKE,KAAK,GACtCN,QAAQI,KAAW,KAAE,MACrBJ,QAAQI,KAAW,OACnB,IAAIS,WAWJ,OAVAnB,GAAEC,KAAKH,OAAQ,SAAUe,IAAIC,OAC5BK,QAAQf,KAAKP,EAAEa,KAAKE,KAAK,GAAGK,QAAQH,QACpCR,QAAQI,KAAKE,KAAK,GAAGR,KAAKU,SAE3Bd,EAAEC,KAAKK,QAAQI,KAAKE,KAAK,GAAI,SAASC,IAAIO,IACzCd,QAAQI,KAAKA,KAAKG,QAClBb,EAAEC,KAAKkB,QAAS,SAAUE,KAAKP,OAC9BR,QAAQI,KAAKA,KAAKG,KAAKT,KAAKP,EAAEa,KAAKA,KAAKG,KAAKC,YAGxCR,QCtBR,QAASgB,UAASzB,GACd,GAAI0B,IAAKX,KAAMf,EAAEe,KAAKY,MAAM,GAAIb,WAAYd,EAAEc,WAAWa,MAAM,GAQ/D,OAPAD,GAAEX,KAAKa,UACPF,EAAEZ,WAAWc,UACbF,EAAEb,KAAOa,EAAEX,KAAK,GAAGc,IAAI,SAASxB,EAAGyB,IAC/B,MAAOJ,GAAEX,KAAK,GAAGc,IAAI,SAASxB,EAAG0B,IAC7B,MAAO/B,GAAEa,KAAKkB,IAAID,QAGnBJ,ECVX,QAASM,kBAAiBC,OAAQC,SAAUC,WAuB1C,QAASC,eAAcC,KAAMpB,MAAOqB,KAElC,WAAmB,KAARA,KAAgC,IAARA,IAC1BC,KAAKF,MAAMpB,QAEpBA,OAASA,MACTqB,KAAOA,IAEHE,MAAMvB,QAA2B,gBAARqB,MAAoBA,IAAM,GAAM,EACpDG,KAGTxB,MAAQA,MAAMyB,WAAWC,MAAM,KAC/B1B,MAAQsB,KAAKF,QAAQpB,MAAM,GAAK,KAAOA,MAAM,IAAOA,MAAM,GAAKqB,KAAQA,OAEvErB,MAAQA,MAAMyB,WAAWC,MAAM,OACtB1B,MAAM,GAAK,KAAOA,MAAM,IAAOA,MAAM,GAAKqB,IAAOA,QAG5D,QAASM,SAAQX,OAAQC,UACvB,GAAIW,GAAIT,cAAc,QAASH,QAASC,UAAUU,QAAQV,SAC1D,OAAOC,WAAYU,EAAEC,QAAQ,mBAAmB,MAAQD,EAvC1D,OAJiBE,KAAbb,WACFA,SAAW,GAGTA,SAAW,EACb,MAAOD,OAGTA,QAASe,WAAWf,OACpB,IAAIgB,KAAMV,KAAKU,IAAIhB,OAqDnB,OAAGgB,KAAM,KACAL,QAAQX,OAAS,KAAMC,UAAY,SAAWgB,OAAOC,YAAsB,SAC1EF,IAAM,IACPL,QAAQX,OAAS,IAAKC,UAAY,SAAWgB,OAAOC,YAAqB,QACxEF,IAAM,IACPL,QAAQX,OAAS,IAAKC,UAAY,SAAWgB,OAAOC,YAAqB,QACxEF,IAAM,IACPL,QAAQX,OAAS,IAAKC,UAAY,SAAWgB,OAAOC,YAAsB,SAtBnF,SAA6BC,KAC3B,KAAO,eAAeC,KAAKD,IAAIV,aAC7BU,IAAMA,IAAIV,WAAWI,QAAQ,eAAgB,QAE/C,OAAOM,MAoBoBR,QAAQX,OAAQC,WCzE/C,QAASoB,gBAAetD,EAAGuD,KAAMC,MAC/BA,KAAOA,OAAQ,CACf,IAAI9B,IAAKZ,WAAYd,EAAEc,WAAYC,KAAMf,EAAEe,KAAKY,MAAM,IAClD8B,OAASzD,EAAEa,KAAKgB,IAAI,SAASvB,EAAGoD,GAClC,OAAQpD,EAAGA,EAAGoD,EAAGA,IAenB,OAbAD,QAAOE,KAAK,SAASxC,EAAGyC,GACtB,MAAQzC,GAAEb,EAAEiD,OAASK,EAAEtD,EAAEiD,MAAS,EACV,MAAbpC,EAAEb,EAAEiD,MAAiB,EACR,MAAbK,EAAEtD,EAAEiD,OAAkB,EACtBpC,EAAEb,EAAEiD,MAAQK,EAAEtD,EAAEiD,OAAUC,MAAQ,EACnC,IAEZ9B,EAAEb,KAAO4C,OAAO5B,IAAI,SAASvB,GAC3B,MAAOA,GAAEA,IAEXoB,EAAEX,KAAK,GAAK0C,OAAO5B,IAAI,SAASvB,GAC9B,MAAON,GAAEe,KAAK,GAAGT,EAAEoD,KAEdhC,ECnBT,QAASmC,mBAAkB7D,EAAGwD,MAC5B,QAASM,KAAI3C,EAAGyC,GACd,MAAY,OAALzC,EAAYyC,EACP,MAALA,EAAYzC,EACZA,EAAIyC,EAEbJ,KAAOA,OAAQ,CACf,IAAI9B,IAAKZ,WAAYd,EAAEc,WAAYC,KAAMf,EAAEe,KAAKY,MAAM,IAClD8B,OAASzD,EAAEa,KAAKgB,IAAI,SAASvB,EAAGoD,GAClC,OAAQpD,EAAGA,EAAGoD,EAAGA,IAanB,OAXAD,QAAOE,KAAK,SAASxC,EAAGyC,GACtB,MAAQzC,GAAEb,EAAEyD,OAAOD,IAAK,IAAMF,EAAEtD,EAAEyD,OAAOD,IAAK,GAAM,EACzC3C,EAAEb,EAAEyD,OAAOD,IAAK,GAAKF,EAAEtD,EAAEyD,OAAOD,IAAK,IAAON,MAAQ,EACrD,IAEZ9B,EAAEb,KAAO4C,OAAO5B,IAAI,SAASvB,GAC3B,MAAOA,GAAEA,IAEXoB,EAAEX,KAAK,GAAK0C,OAAO5B,IAAI,SAASvB,GAC9B,MAAON,GAAEe,KAAK,GAAGT,EAAEoD,KAEdhC,ECtBT,QAASsC,gBAAehE,EAAGiE,KAAMT,MAC/BA,KAAOA,OAAQ,CACf,IAAI9B,IAAKZ,WAAYd,EAAEc,WAAYC,KAAMf,EAAEe,KAAKY,MAAM,IAClD8B,OAASzD,EAAEa,KAAKoD,MAAMpC,IAAI,SAASvB,EAAGoD,GACxC,OAAQpD,EAAGA,EAAGoD,EAAGA,IAiBnB,OAfAD,QAAOE,KAAK,SAASxC,EAAGyC,GACtB,MAAQzC,GAAEb,GAAKsD,EAAEtD,EAAK,EACL,MAAPa,EAAEb,EAAa,EACR,MAAPsD,EAAEtD,GAAc,EAChBa,EAAEb,EAAIsD,EAAEtD,GAAMkD,MAAQ,EACvB,IAEX9B,EAAEb,KAAOb,EAAEa,KAAKgB,IAAI,SAASqC,GAC3B,MAAOT,QAAO5B,IAAI,SAASvB,GACzB,MAAO4D,GAAE5D,EAAEoD,OAGfhC,EAAEX,KAAK,GAAK0C,OAAO5B,IAAI,SAASvB,GAC9B,MAAON,GAAEe,KAAK,GAAGT,EAAEoD,KAEdhC,ECjBT,QAASyC,mBAAmBtD,MAC1B,GAAIJ,YACA2D,WAAavD,KAAKE,KAAK,GAAGsD,OAAO,CAUrC,OATAlE,GAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAUC,IAAIC,OAE/B,IADAR,QAAQQ,UACqD,MAAtDJ,KAAKA,KAAKA,KAAKE,KAAK,GAAGK,QAAQH,QAAQmD,aAAuBA,YAAY,GAC7EA,YAAwB,CAE5B3D,SAAQQ,OAAO,GAAGJ,KAAKE,KAAK,GAAGqD,YAC/B3D,QAAQQ,OAAO,GAAGJ,KAAKA,KAAKA,KAAKE,KAAK,GAAGK,QAAQH,QAAQmD,YACzDA,WAAavD,KAAKE,KAAK,GAAGsD,OAAO,IAE9B5D,QCdT,QAAS6D,cAAczD,MACtB,GAAIJ,WAOJ,OANAN,GAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAUC,IAAIC,OACjCR,QAAQQ,UACRd,EAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAUV,EAAEC,GACjCG,QAAQQ,OAAOX,GAAKO,KAAKA,KAAKA,KAAKE,KAAK,GAAGK,QAAQd,IAAIO,KAAKE,KAAK,GAAGK,QAAQH,YAGvER,QCXR,QAAS8D,YAAWC,aAAcC,KAAMC,YAAaC,OAiSnD,QAASC,gBAAeC,QAEtB,GAAIC,KAAM,IAOV,OANA3E,GAAEC,KAAKyE,OAAQ,SAAUxE,EAAGC,GAEjB,OADTA,EAAIA,EAAE,MAEK,MAAPwE,IAAaA,IAAMxE,EACdwE,IAAMxE,IAAGwE,IAAMxE,MAEnBwE,IAGT,QAASC,gBAAeF,OAAQG,YAE9B,GAAIC,KAAM,IAOV,OANA9E,GAAEC,KAAKyE,OAAQ,SAAUxE,EAAGC,GAEjB,OADTA,EAAIA,EAAE0E,eAEK,MAAPC,IAAaA,IAAM3E,EACd2E,IAAM3E,IAAG2E,IAAM3E,MAEnB2E,IAsBT,QAASC,gBAAeL,OAAQM,OAE9B,GAAItE,QAMJ,OALAV,GAAEC,KAAKyE,OAAQ,SAAUxE,EAAGC,GACtBH,EAAEe,QAAQb,EAAG8E,QAAU,IACzBtE,KAAKR,GAAKC,KAGPO,KAnVT,GAAIuE,KAAMZ,aAAaa,QAAQC,KAAKb,MAChCc,QAAUf,aAAac,KAAKF,KAAKG,QACjCC,WAAahB,aAAac,KAAKF,KAAK/C,KAEpCoD,cA2PJ,SAAuBjB,aAAcC,MACnC,GAAIW,KAAMZ,aAAaa,QAAQC,KAAKb,MAChCiB,OAASlB,aAAac,KAAKF,KAAKM,OAEhCC,aAIJ,OAHAxF,GAAEC,KAAKsF,OAAQ,SAAUrF,EAAGC,GAC1BqF,WAAWpF,KAAKiE,aAAakB,OAAOpF,MAE/BqF,YAnQyBnB,aAAcC,MAE5CmB,cACAC,eAGAhF,MACFiF,aACW,MAATnB,MACIpC,KAAK0C,IAAI,EAAGT,aAAac,KAAKF,KAAKM,OAAOtE,QAAQuD,MAAM,KACxD,EAGR,IAAe,6BAAXY,QAAwC,CAI1C,GAAIQ,QAASvB,aAAac,KAAKF,KAAKW,OAChC/E,IAAM,CACVb,GAAEC,KAAK2F,OAAOC,MAAO,SAAUA,MAAO/E,OAChCd,EAAEe,QAAQD,MAAOwE,cAAc,GAAG5E,KAAKE,KAAK,KAAO,IACrD6E,WAAW5E,KAAOK,WAAWoE,cAAc,IAAKxE,QAC5C8E,OAAOA,OAAO9E,QAChB2E,WAAW5E,KAAY,MAAI+E,OAAOA,OAAO9E,OAAOgF,KAChDL,WAAW5E,KAAW,KAAI+E,OAAOA,OAAO9E,OAAOiF,OAE/CN,WAAW5E,KAAY,MAAIC,MAC3B2E,WAAW5E,KAAW,KAAI,IAE5B4E,WAAW5E,KAAW,KAAIC,MAC1B2E,WAAW5E,KAAiB,WAAIC,MAChC2E,WAAW5E,KAAa,OAAIkE,eAC1Bf,kBAAkByB,WAAW5E,KAAW,MACxC0D,aAIAe,cAAc,GAAG7E,QAAQuF,SACW,MAApCV,cAAc,GAAG7E,QAAQuF,QAEzBP,WAAW5E,KAAU,IAAIyE,cAAc,GAAG7E,QAAQuF,QAElDP,WAAW5E,KAAU,IAAI4D,eAAegB,WAAW5E,KAAa,QAGhEyE,cAAc,GAAG7E,QAAQwF,SACW,MAApCX,cAAc,GAAG7E,QAAQwF,QAEzBR,WAAW5E,KAAU,IAAIyE,cAAc,GAAG7E,QAAQwF,QAElDR,WAAW5E,KAAU,IAAI+D,eAAea,WAAW5E,KAAa,OAAG,GAErE4E,WAAW5E,KAAiB,WAAI+D,eAC9Ba,WAAW5E,KAAa,OACxB,GAEFA,SAIoB,MAApByE,cAAc,IAChBtF,EAAEC,KAAKqF,cAAc,GAAG5E,KAAKE,KAAK,GAAI,SAAUC,IAAKC,OACnD4E,YAAY7E,KAAOK,WAAWoE,cAAc,IAAKxE,QAC7C8E,OAAOA,OAAO9E,OAChB4E,YAAY7E,KAAY,MAAI+E,OAAOA,OAAO9E,OAAOgF,KAEjDJ,YAAY7E,KAAY,MAAIC,MAE9B4E,YAAY7E,KAAW,KAAIC,MAC3B4E,YAAY7E,KAAiB,WAAIC,MACjC4E,YAAY7E,KAAa,OAAIkE,eAC3Bf,kBAAkB0B,YAAY7E,KAAW,MACzC0D,aAIAe,cAAc,GAAG7E,QAAQuF,SACW,MAApCV,cAAc,GAAG7E,QAAQuF,QAEzBN,YAAY7E,KAAU,IAAIyE,cAAc,GAAG7E,QAAQuF,QAEnDN,YAAY7E,KAAU,IAAI4D,eAAeiB,YAAY7E,KAAa,QAGlEyE,cAAc,GAAG7E,QAAQwF,SACW,MAApCX,cAAc,GAAG7E,QAAQwF,QAEzBP,YAAY7E,KAAU,IAAIyE,cAAc,GAAG7E,QAAQwF,QAEnDP,YAAY7E,KAAU,IAAI+D,eACxBc,YAAY7E,KAAa,OACzB,GAGJ6E,YAAY7E,KAAiB,WAAI+D,eAC/Bc,YAAY7E,KAAa,OACzB,SAKNb,GAAEC,KAAKqF,cAAe,SAAUY,MAAOC,QAClB,QAAfA,OAAOjE,MACTuD,WAAWrF,KACT,WACE,MAAOgG,MAAKC,YAERC,SACE,MAAOJ,QAET3F,YACE,MAAO4F,QAAO5F,MAAMgG,OAEtB/F,iBACE,MAAO2F,QAAO3F,WAAW+F,OAE3B9F,cACE,MAAO0F,QAAO1F,SAEhB+F,YACE,MAAOL,QAAOzF,KAAKE,KAAK,IAE1B6F,cAAe1D,OAAO2D,SAASC,OAAOC,MACpC,mBACI,GAAI,OAAO,GACjBlG,WACE,OACwB,OAAtBmG,KAAKJ,aACDN,OACAjF,WAAWiF,QAASU,KAAKJ,gBAC7B/F,MAEJoG,cACE,MAAO/B,gBACLf,kBAAkB6C,KAAKnG,MACvB6D,cAGJ4B,aAEE,GAAI,aAAeU,MAAKpG,QAAS,CAC/B,GAAIN,GAAIH,EAAE+G,UAAWF,KAAKC,QAI1B,OAHA3G,GAAE0G,KAAKpG,QAAQuG,WAAahD,kBAAkB6C,KAAKnG,MACjDmG,KAAKpG,QAAQuG,WAER7G,EAET,MAAO0G,MAAKC,SAEdG,WACE,MAAIJ,MAAKpG,QAAQuF,SAAmC,MAAxBa,KAAKpG,QAAQuF,QAChCa,KAAKpG,QAAQuF,QAEfvB,eAAeoC,KAAKC,UAE7BI,WACE,MAAIL,MAAKpG,QAAQwF,SAAmC,MAAxBY,KAAKpG,QAAQwF,QAChCY,KAAKpG,QAAQwF,QAEfrB,eAAeiC,KAAKC,QAAS,IAEtC7C,iBACE,MAAOW,gBAAeiC,KAAKC,QAAS,IAEtCK,WACE,MAAO/E,MAAK0C,IAAI1C,KAAKU,IAAI+D,KAAKI,MAAO7E,KAAKU,IAAI+D,KAAKK,QAErDE,WACE,OAAQP,KAAKM,MAEfE,eACE,MAAOC,UACLT,KAAKI,KACLJ,KAAKO,KACLP,KAAKM,KACLI,UAAU7F,IAAI,SAAU8F,EAAGC,KACzB,MAAOA,SAIbC,eACE,MAAOJ,UACLT,KAAKK,KACLL,KAAKO,KACLP,KAAKM,KACLI,UAAU7F,IAAI,SAAU8F,EAAGC,KACzB,MAAOA,SAIbE,aACE,GAAId,KAAKpG,QAAQmH,aAAc,CAE7B,GAAIf,KAAKQ,SAAW,EAClB,MAAOE,WAAU/F,MAAMqF,KAAKQ,SACvB,IAAIR,KAAKa,SAAW,EAAIH,UAAUrD,OACvC,MAAOqD,WAAU/F,MAAM,EAAGqF,KAAKa,SAAW,GAG9C,MAAOH,YAET5C,UACE,MAAIkC,MAAKpG,QAAQmH,cAEXf,KAAKQ,SAAW,EAEhBR,KAAKO,KACJP,KAAKQ,UAAYR,KAAKM,KAAON,KAAKO,MACjCG,UAAUrD,OAIX2C,KAAKI,MAEdnC,UACE,MAAI+B,MAAKpG,QAAQmH,gBAGXf,KAAKQ,SAAW,IAClBR,KAAKa,SAAW,EAAIH,UAAUrD,OAG5B2C,KAAKM,MACHI,UAAUrD,QAAU2C,KAAKa,SAAW,KACnCb,KAAKM,KAAON,KAAKO,MAClBG,UAAUrD,OAIX2C,KAAKK,QAIdf,OAAQC,KAAKyB,UAAWC,WAAW,IACnCnD,IAAKyB,KAAKyB,UAAWC,WAAW,IAChChD,IAAKsB,KAAKyB,UAAWC,WAAW,IAChCH,OAAQvB,KAAKyB,UAAWC,WAAW,IACnC7D,WAAYmC,KAAKyB,UAAWC,WAAW,MAEvCC,MAAM,EAAOjC,KAAM,aAmGjC,OA3FApF,MAAKgB,IAAM+D,WACX/E,KAAKsH,KAAOtC,YACZhF,KAAKuH,KAAO5C,WAyFLe,KAAKC,YAERV,aAAcjF,KAAKiF,aACnBjE,UACE,MAAOhB,MAAKgB,KAEdsG,WACE,MAAOtH,MAAKsH,MAEdC,WACE,MAAOvH,MAAKuH,WAIdF,MAAM,EAAOjC,KAAM,kBCrWzB,QAASoC,wBAAuBrI,EAAGuH,KAAMD,KAAMgB,QAASR,QACtD,MAAI3H,GAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,cAAeC,WAAa,EACxEjB,SAASzH,EAAGuH,KAAMD,KAAMQ,QAExBa,SAKX,QAASlB,UAASzH,EAAGuH,KAAMD,KAAMsB,OAQ/B,MAAOA,OAPP,SAAwB5I,EAAGuH,KAAMD,KAAMuB,SAAUC,UAC/C,GAAIpF,GAAInB,KAAKwG,OAAO/I,EAAIuH,OAASD,KAAOC,OAASuB,SAAWD,SAAW,IAAMA,QAC7E,OAAInF,GAAImF,SAAiBA,SACrBnF,EAAIoF,SAAiBA,SAClBpF,GAGmB1D,EAAGuH,KAAMD,KAAM,EAAGsB,MAAMvE,OAAS,ICf/D,QAAS2E,eAAchJ,EAAGsH,KAAMgB,SAE9B,GAAS,MAALtI,GAAaA,GAAK,EAAG,MAAO,KAChC,IAAIiJ,QAA+B,GAAtB1G,KAAK2G,KAAKlJ,EAAIsH,KAE3B,OADI2B,QAAS,IAAGA,OAAS,GAClBA,OCHT,QAASE,kBAAkBC,MAAMjE,OAC/B,GAAIkE,mBACEhH,KAAQ,oBACRiH,YAiCN,QA/BInJ,EAAEe,QAAQ,MAAOiE,QAAQ,GAAKhF,EAAEe,QAAQ,MAAOiE,QAAQ,GAAKhF,EAAEe,QAAQ,MAAOiE,QAAQ,IACvFhF,EAAEC,KAAKgJ,MAAME,SAAU,SAAUjJ,EAAGiI,SACG,sBAAjCA,QAAQC,WAAWgB,YACrBF,iBAA2B,SAAE9I,KAAK+H,YAGlCnI,EAAEe,QAAQ,MAAOiE,QAAQ,GAAKhF,EAAEe,QAAQ,MAAOiE,QAAQ,IAC3DhF,EAAEC,KAAKgJ,MAAME,SAAU,SAAUjJ,EAAGiI,SACG,cAAjCA,QAAQC,WAAWgB,YACrBF,iBAA2B,SAAE9I,KAAK+H,YAGlCnI,EAAEe,QAAQ,MAAOiE,QAAQ,GAAKhF,EAAEe,QAAQ,MAAOiE,QAAQ,IAC3DhF,EAAEC,KAAKgJ,MAAME,SAAU,SAAUjJ,EAAGiI,SACG,cAAjCA,QAAQC,WAAWgB,YACrBF,iBAA2B,SAAE9I,KAAK+H,YAGlCnI,EAAEe,QAAQ,MAAOiE,QAAQ,GAAKhF,EAAEe,QAAQ,MAAOiE,QAAQ,IAC3DhF,EAAEC,KAAKgJ,MAAME,SAAU,SAAUjJ,EAAGiI,SACG,SAAjCA,QAAQC,WAAWgB,YACrBF,iBAA2B,SAAE9I,KAAK+H,YAGlCnI,EAAEe,QAAQ,MAAOiE,QAAQ,GAAKhF,EAAEe,QAAQ,MAAOiE,QAAQ,IAC3DhF,EAAEC,KAAKgJ,MAAME,SAAU,SAAUjJ,EAAGiI,SACG,YAAjCA,QAAQC,WAAWgB,YACrBF,iBAA2B,SAAE9I,KAAK+H,WAIjCe,iBCnCT,QAASG,iBAAgBC,eACvB,GAAgB,OAAZC,SAAJ,CACA,GAAIC,eACEtH,KAAQ,oBACRiH,aAEFM,cAAgB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAM9b,OALAzJ,GAAEsJ,cAAcH,UAAUlJ,KAAK,SAASkI,SAClCnI,EAAEe,QAAQ8F,KAAKuB,WAAWC,SAAUoB,eAAiB,GACvDD,aAAuB,SAAEpJ,KAAKyG,QAG3B2C,cCfT,QAASE,cAAaC,UAAWC,WAAYvE,YAC3C,GAAIwE,YAEAC,YAEJ,IAAiB,gBAAbH,UAA6B,CAI/BI,EAAEC,QAAQC,WACRC,MAAOC,2BACPC,WAAW,IACVC,MAAMT,WACT,IAAIrG,GAAI,EACJ+G,aACJtK,GAAEC,KAAKwF,WAAY,SAAU5E,IAAKC,OAOhC,GANAd,EAAEC,KAAKyF,YAAa,SAAUtC,KAAMmH,QAC9BA,OAAOhK,OAASO,MAAMP,QACxB+J,WAAWzJ,KAAOuC,KAAO,KAIzBkH,WAAWzJ,KACb,GAAI2J,gBAAiB9E,YAAY4E,WAAWzJ,KAAO,OAEnD,IAAI2J,gBAAiB,IAGvBX,SAAQtG,GAAKwG,EAAEC,QAAQV,eACrBmB,aAAcC,wBAAwB5J,MAAO0J,gBAC7CG,cAAeC,oBAEjBd,UAAU9J,EAAE,SAAS6K,KAAKpF,WAAWlC,GAAU,OAAGuH,QAAUjB,QAAQtG,GACpEA,MAGFsG,QAAQ,GAAGQ,MAAMT,YACjBmB,kBAAkBtF,WAAW,GAAI,QACjCsF,kBAAkBrF,YAAY4E,WAAW,GAAK,GAAI,SAElDvH,OAAOiI,cAAgB,EACvBjI,OAAOkI,mBAAqBX,WACxB7E,WAAWvB,OAAS,IAClBlE,EAAE+C,QAAQmI,QAAU,IACtBnB,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,YAETG,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,aAGb5J,EAAE,oCAAoCsL,MAAM,WAC1C,GAAIC,OAAQvL,EAAE6G,MAAM2E,SAASD,OAC7BR,mBAAkBtF,WAAW8F,OAAQ,QACrCR,kBAAkBrF,YAAY4E,WAAWiB,OAAS,GAAI,SACtD3B,WAAW6B,aACX1I,OAAOiI,cAAgBO,YAEpB,IAAiB,WAAb5B,UAAwB,CAMjC,IAJAI,EAAEC,QAAQC,WACRC,MAAOC,2BACPC,WAAW,IACVC,MAAMT,YACJrG,EAAI,EAAGA,EAAIkC,WAAWvB,OAAS,EAAGX,IACrCsG,QAAQtG,GAAKwG,EAAEC,QAAQV,eACrBmB,aAAcC,wBAAwBjF,WAAW,GAAIA,WAAWlC,EAAI,IACpEoH,cAAeC,oBAEjBd,UACE9J,EAAE,SACC6K,KAAKpF,WAAWlC,EAAI,GAAU,OAC9BuH,QACDjB,QAAQtG,EAEdsG,SAAQ,GAAGQ,MAAMT,YACjB8B,aAAajG,WAAW,GAAI,QAC5BiG,aAAajG,WAAW,GAAI,SACxBA,WAAWvB,OAAS,EAAI,IACtBlE,EAAE+C,QAAQmI,QAAU,IACtBnB,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,YAETG,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,aAGb5J,EAAE,oCAAoCsL,MAAM,WAC1C,GAAIC,OAAQvL,EAAE6G,MAAM2E,SAASD,OAC7BG,cAAajG,WAAW8F,MAAQ,GAAI,eAEjC,IAAiB,qBAAb5B,UAAkC,CAM3C,IAJAI,EAAEC,QAAQC,WACRC,MAAOC,2BACPC,WAAW,IACVC,MAAMT,YACJrG,EAAI,EAAGA,EAAIkC,WAAWvB,OAAS,EAAGX,IACrCsG,QAAQtG,GAAKwG,EAAEC,QAAQV,eACrBmB,aAAcC,wBACZjF,WAAe,EAAJlC,GACXkC,WAAe,EAAJlC,EAAQ,IAErBoH,cAAeC,oBAEjBd,UACE9J,EAAE,SACC6K,KAAKpF,WAAe,EAAJlC,GAAc,OAC9BuH,QACDjB,QAAQtG,EAEdsG,SAAQ,GAAGQ,MAAMT,YACjB8B,aAAajG,WAAW,GAAI,QAC5BiG,aAAajG,WAAW,GAAI,SACxBA,WAAWvB,OAAS,EAAI,IACtBlE,EAAE+C,QAAQmI,QAAU,IACtBnB,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,YAETG,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,aAGb5J,EAAE,oCAAoCsL,MAAM,WAC1C,GAAIC,OAAQvL,EAAE6G,MAAM2E,SAASD,OAC7BG,cAAajG,WAAmB,EAAR8F,OAAY,QACpCG,aAAajG,WAAmB,EAAR8F,MAAY,GAAI,eAErC,IAAiB,UAAb5B,UAAuB,CAKhC,IAJAI,EAAEC,QAAQC,WACRC,MAAOC,2BACPC,WAAW,IACVC,MAAMT,YACJrG,EAAI,EAAGA,EAAIkC,WAAWvB,OAAQX,IACjCsG,QAAQtG,GAAKwG,EAAEC,QAAQV,eACrBmB,aAAckB,qBAAqBlG,WAAWlC,IAC9CoH,cAAeC,oBAEjBd,UAAU9J,EAAE,SAAS6K,KAAKpF,WAAWlC,GAAU,OAAGuH,QAAUjB,QAAQtG,EAEtEsG,SAAQ,GAAGQ,MAAMT,YAEC,QAAdvE,YACFqG,aAAajG,WAAW,GAAI,SAC5BmG,eAAenG,WAAW,GAAS,MAEnC1C,OAAO8I,UAAYpG,WAAW,GAAQ,KAEtCiG,aAAajG,WAAW,GAAI,QAG1BA,WAAWvB,OAAS,IAClBlE,EAAE+C,QAAQmI,QAAU,IACtBnB,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,YAETG,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,aAGb5J,EAAE,oCAAoCsL,MAAM,WAC1C,GAAIC,OAAQvL,EAAE6G,MAAM2E,SAASD,OAEX,SAAdlG,YACFuG,eAAenG,WAAW8F,OAAa,MACvCO,aACAC,kBACAL,aAAajG,WAAW8F,OAAQ,SAEhCxI,OAAO8I,UAAYpG,WAAW8F,OAAY,KAE1CG,aAAajG,WAAW8F,OAAQ,cAG/B,CACL,GAAIS,WACAC,cACAzC,aAAeH,gBAAgBC,cAEnC7D,YAAWyG,QAAQ,SAAUxL,KAAM6C,GACjC4I,QACE,gBAAkB5I,EAClB,WACEyI,OAAOzI,GAAKwG,EAAEC,QAAQC,WACpBC,MAAOkC,kCAAkC3G,WAAWlC,IACpDoH,cAAeC,kBACfR,WAAW,QAEOxH,IAAhB4G,cACFK,QAAQtG,GAAKwG,EAAEC,QAAQR,cACrBiB,aAAc4B,0BAA0B5G,WAAWlC,IACnDoH,cAAeC,oBAEjBqB,WAAW1I,GAAKwG,EAAEkC,YAAYD,OAAOzI,GAAIsG,QAAQtG,MAEjD0I,WAAW1I,GAAKwG,EAAEkC,YAAYD,OAAOzI,KAGvCwG,EAAEuC,MAAML,WAAW1I,KAErB,WAEE0I,WAAW1I,GAAGgJ,UAAU,SAAUpE,SAChCA,QAAQqE,SAASJ,kCAAkC3G,WAAWlC,SAIpEuG,UAAU9J,EAAE,SAAS6K,KAAKpF,WAAWlC,GAAU,OAAGuH,QAAUmB,WAAW1I,KAGzE4I,QAAQ,kBAAmB,WACzBF,WAAWQ,cAAc9G,cAAc0E,MAAMT,YACzCnE,WAAWvB,OAAS,IAClBlE,EAAE+C,QAAQmI,QAAU,KAAgB,GAATwB,MAC7B3C,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,YAETG,EAAEoB,QACCC,OAAOtB,UAAW,MAAQuB,WAAW,IACrChB,MAAMT,eAIf5J,EAAE,oCAAoCsL,MACpClF,KAAKuG,OAAO,QAAS,WACnB,GAAIpB,OAAQvL,EAAE6G,MAAM2E,SAASD,OAC7BkB,eAAc9G,aAAe4F,SAGjCnF,KAAKwG,QACH,WACElB,aAAajG,WAAWgH,cAAc9G,cAAe,WAErDG,KAAM,kBAOd,QAASqG,SAAQrG,KAAM+G,GAAIC,IACzB1G,KAAKwG,QACH,SAAWG,MACT,MAAO,UAAUC,UACVD,KAOCD,IAAIA,MANRC,MAAO,EAEPF,KACKC,IAAIE,SAASC,cAMrB,IACDnH,KAAMA,OC1QZ,QAASoH,WAAUC,KACjB,GAAIvG,OAAQuG,IAAIvG,MAAM,kBACtB,IAAIA,MAAO,CACT,GAAIwG,KAAMxG,MAAMpF,MAAM,GAAGE,IAAI,SAAUgB,GACrC,MAAO2K,UAAS3K,EAAG,IAAM,KAI3B,QADSN,KAAKuC,IAAI2I,MAAM,KAAMF,KAAOhL,KAAK0C,IAAIwI,MAAM,KAAMF,MAAQ,EACvD,GAAM,OAAS,OAE1B,MAAO,OAIX,QAAS1B,cAAa6B,KAAMC,MAqGpB,QAASC,aACP,GAAIC,QAAS1N,EAAE,0BACf+C,QAAO4K,cAAcD,OAAOhN,KAAK,UACjCgN,OAAOhN,KAAK,QAAS,GACrBgN,OAAOzK,IAAI2K,MACXF,OAAOhN,KAAK,QAASqC,OAAO8K,YAAYC,SAAU,MAElDA,SAAS,GAGX,QAASC,YACP,GAAIL,QAAS1N,EAAE,0BAEf0N,QAAOzK,IAAI+K,MACXjL,OAAO4K,cAAcD,OAAOhN,KAAK,UACjCgN,OAAOhN,KAAK,QAAS,GAGvB,QAASoN,UAASG,KAChB,GAAIC,IAAKlO,EAAE,8BACPS,QAAUyN,GAAGC,OAAO,SACL,iBAARF,OACTA,IAAMC,GAAGC,OAAO,SAAW,GAGzBF,IAAMxN,QAAQqE,IAChBiJ,WAEAG,GAAGC,OAAO,QAASF,KAhI7B,GAAY,SAART,KACF,GAAID,KAAM,CACR,GAAI5F,QAAS4F,KAAa,MAC1BvN,GAAE,mBACCwL,SACAA,SACA4C,QACAC,OACC1G,OAAOjG,IAAI,SAAU4M,MAAO7G,IAAKE,QAC/B,GAAIuG,IAAKlO,EAAE,OAkBX,OAjBY,KAARyH,KACFyG,GAAGK,SAAS,sBACZL,GAAGG,OACDrO,EAAE,yDACCwO,IAAI,aAAcF,OAClBE,IAAI,QAAStB,UAAUoB,UAEnB7G,IAAM,IAAME,OAAOzD,QAC5BgK,GAAGK,SAAS,qBACZL,GAAGG,OACDrO,EAAE,wDACCwO,IAAI,aAAcF,OAClBE,IAAI,QAAStB,UAAUoB,UAG5BJ,GAAGG,OAAOrO,EAAE,UAAUwO,IAAI,aAAcF,QAEnCJ,MAGblO,EAAE,mBAAmB6K,KACnBhJ,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,kBAEjEvN,EAAE,mBAAmB6K,KACnBhJ,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,kBAEjEvN,EAAE,qBAAqB8K,KAAK9K,EAAE,SAAS6K,KAAK0C,KAAY,OAAGzC,OAE3D,IAAI2D,cAAqC,OAAtBlB,KAAK9G,aAAwB,GAAK,CACrD,IACE,aAAe8G,MAAc,SACG,IAAhCA,KAAc,QAAa,WAC3BA,KAAa,OAAEA,KAAc,QAAa,WAC1C,CACA,GAAImB,SACFC,eAAepB,KAAc,QAAa,UAAEjF,eAC5C,KACAzG,iBACE0L,KAAa,OAAEA,KAAc,QAAa,WAAG,GAC7CA,KAAc,QAAmB,gBAEC,KAAlCA,KAAc,QAAe,cAC/BmB,SAAW,IAAMnB,KAAc,QAAe,aAG9CA,KAAa,OAAEA,KAAc,QAAa,WAAG,IAAMA,KAAiB,aAEpEmB,SACE,KAAOnB,KAAa,OAAEA,KAAc,QAAa,WAAG,GAAK,KAE7DvN,EAAE,uBAAuB6K,KAAK6D,SAC9B1O,EAAE,uBAAuB4O,OACrB,aAAe5L,aACjBhD,EAAE,iBAAiBwO,IAAI,SAAU,GAAKC,cAEtCzO,EAAE,iBAAiBwO,IAAI,SAAU,GAAKC,kBAGpC,aAAezL,cACjBhD,EAAE,iBAAiBwO,IAAI,SAAU,GAAKC,cAExCzO,EAAE,uBAAuB6O,MAGvB9L,QAAO+L,oBACT/L,OAAO+L,mBAAmBC,aAAa,SAAUzI,IAC/C,MACEiH,MAAKpH,OAAOG,KACZgB,SAASiG,KAAKpH,OAAOG,IAAI,GAAIiH,KAAK5I,IAAK4I,KAAKzI,IAAKyI,KAAK5F,UAKtB,IAAlC4F,KAAc,QAAe,YAC/BvN,EAAE,oBAAoB8K,KAAK,KAAOyC,KAAc,QAAe,aAE/DvN,EAAE,oBAAoB8K,KAAK,IAE7B9K,EAAE,oBAAoB8K,KAAKyC,KAAKtJ,WAEhC,IAAI+K,mBAEF,KADOhP,EAAE,8BAA8BmO,OAAO,WAGhD,IAA0B,OAAtBZ,KAAK9G,aAAuB,CAC9BzG,EAAE,qBAAqB4O,MAEvB,IAAIZ,MAAO,IACPJ,KAAO,GAkCNoB,iBAEHhP,EAAE,8BAA8BmO,QAC9BrJ,IAAK,EACLmK,UAAU,IAEZjP,EAAE,2BAA2BiD,IAAI+K,MACjChO,EAAE,2BACCkP,IAAI,SACJ5D,MAAM,WACStL,EAAE6G,MAAM5D,QAAU+K,KAE9BD,WAEAN,eAMRzN,EAAE,8BAA8BmO,OAAO,UACrCgB,MAAO,WACLpB,YAEFqB,OAAQhJ,KAAKuG,OAAO,SAAU,SAAU0C,GAAIC,IAEtCD,GAAGE,gBACLxB,WAEFR,KAAK9G,aAAe8G,KAAK/G,MAAM8I,GAAGxO,WAKtCd,EAAE,8BAA8BmO,OAAO,UACrCrJ,IAAKyI,KAAK/G,MAAMtC,OAAS,EACzBpD,OACGyM,KAAK/G,MAAMtC,OAASqJ,KAAK/G,MAAMvF,QAAQsM,KAAK9G,eAC7C8G,KAAK/G,MAAMtC,OACb+K,UAAU,QAGRD,gBACFhP,EAAE,8BAA8BmO,OAAO,WAEzCnO,EAAE,qBAAqB6O,WAGzB7O,GAAE,mBAAmB6K,KAAK,IAC1B7K,EAAE,mBAAmB6K,KAAK,IAC1B7K,EAAE,qBAAqB8K,KAAK,qBAC5B9K,EAAE,oBAAoB8K,KAAK,IAC3B9K,EAAE,oBAAoB8K,KAAK,QAEZ,SAAR0C,KACLD,MACFvN,EAAE,iBAAiB6K,KACjB9H,OAAOC,YAAiB,IACtB,KACAnB,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,iBAC/D,MACAxK,OAAOC,YAAiB,IACxB,KACAnB,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,kBAEnEvN,EAAE,oBAAoB8K,KAAK9K,EAAE,SAAS6K,KAAK0C,KAAY,OAAGzC,QACpB,IAAlCyC,KAAc,QAAe,YAC/BvN,EAAE,mBAAmB8K,KAAK,KAAOyC,KAAc,QAAe,aAE9DvN,EAAE,mBAAmB8K,KAAK,IAE5B9K,EAAE,mBAAmB8K,KAAK,MAE1B9K,EAAE,iBAAiB6K,KAAK,IACxB7K,EAAE,oBAAoB8K,KAAK,qBAC3B9K,EAAE,mBAAmB8K,KAAK,IAC1B9K,EAAE,mBAAmB8K,KAAK,KAGxByC,MACFvN,EAAE,iBAAiB6K,KACjB9H,OAAOC,YAAiB,IACtB,KACAnB,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,iBAC/D,MACAxK,OAAOC,YAAiB,IACxB,KACAnB,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,kBAEnEvN,EAAE,oBAAoB8K,KAAK9K,EAAE,SAAS6K,KAAK0C,KAAY,OAAGzC,QACpB,IAAlCyC,KAAc,QAAe,YAC/BvN,EAAE,mBAAmB8K,KAAK,KAAOyC,KAAc,QAAe,aAE9DvN,EAAE,mBAAmB8K,KAAK,IAE5B9K,EAAE,mBAAmB8K,KAAKyC,KAAiB,cAE3CvN,EAAE,iBAAiB6K,KAAK,IACxB7K,EAAE,oBAAoB8K,KAAK,qBAC3B9K,EAAE,mBAAmB8K,KAAK,IAC1B9K,EAAE,mBAAmB8K,KAAK,IAG9B9K,GAAE,yBAAyB8K,KAAKyC,KAAY,OAG9C,QAASxC,mBAAkBwC,KAAMC,MACnB,SAARA,KACED,MACFvN,EAAE,mBAAmB6K,KACnBhJ,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,kBAEjEvN,EAAE,mBAAmB6K,KACnBhJ,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,kBAEjEvN,EAAE,qBAAqB8K,KAAK9K,EAAE,SAAS6K,KAAK0C,KAAY,OAAGzC,QACrB,IAAlCyC,KAAc,QAAe,YAC/BvN,EAAE,oBAAoB8K,KAAK,KAAOyC,KAAW,MAE7CvN,EAAE,oBAAoB8K,KAAK,IAE7B9K,EAAE,oBAAoB8K,KAAK,MAE3B9K,EAAE,mBAAmB6K,KAAK,IAC1B7K,EAAE,mBAAmB6K,KAAK,IAC1B7K,EAAE,qBAAqB8K,KAAK,qBAC5B9K,EAAE,oBAAoB8K,KAAK,IAC3B9K,EAAE,oBAAoB8K,KAAK,KAGzByC,MACFvN,EAAE,iBAAiB6K,KACjB9H,OAAOC,YAAiB,IACtB,KACAnB,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,iBAC/D,MACAxK,OAAOC,YAAiB,IACxB,KACAnB,iBAAiB0L,KAAU,IAAGA,KAAc,QAAmB,kBAEnEvN,EAAE,oBAAoB8K,KAAK9K,EAAE,SAAS6K,KAAK0C,KAAY,OAAGzC,QACpB,IAAlCyC,KAAc,QAAe,YAC/BvN,EAAE,mBAAmB8K,KAAK,KAAOyC,KAAW,MAE5CvN,EAAE,mBAAmB8K,KAAK,IAE5B9K,EAAE,oBAAoB8K,KAAK,MAE3B9K,EAAE,iBAAiB6K,KAAK,IACxB7K,EAAE,oBAAoB8K,KAAK,qBAC3B9K,EAAE,mBAAmB8K,KAAK,IAC1B9K,EAAE,mBAAmB8K,KAAK,KAKhC,QAAS0E,WAAUC,UAAW9F,WAEb,WAAbA,WACa,gBAAbA,WACa,qBAAbA,UAEA3J,EAAE,eAAe6O,OACK,UAAblF,WACT3J,EAAE,gBAAgB6O,OACD,aAAbY,YACFzP,EAAE,eAAe6O,OACjB7O,EAAE,eAAewO,KAAMtD,MAAO,YAGhClL,EAAE,eAAe6O,OACA,aAAbY,YACFzP,EAAE,eAAe6O,OACjB7O,EAAE,gBAAgBwO,KAAMtD,MAAO,WCxRrC,QAASkB,mCAAkCsD,WAEzC,MAAO,UAAUvH,SAEf,MAAIA,UAAWA,QAAQC,YAAkE,MAApDsH,UAAkB,OAAEvH,QAAQC,WAAWC,WAExEsH,OAAQC,oBACRC,QAAS,EACTvB,MAAOwB,eACPC,YAAa,EACbC,UAAW9H,uBAAuBwH,UAAkB,OAAEvH,QAAQC,WAAWC,UAAU,GAAIqH,UAAe,IAAGA,UAAe,IAAGvH,QAASuH,UAAkB,SAAMO,WAC5JC,UAAW,YAEJ/H,SAAWA,QAAQC,YAAcpI,EAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,cAAeC,WAAa,GAErHoH,OAAQC,oBACRC,QAAS,EACTvB,MAAOwB,eACPC,YAAa,EACbC,UAAWC,WACXC,UAAW,YAEJ/H,SAAWA,QAAQC,YAAcpI,EAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,eAAgB,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,SAAW,GAEzPqH,OAAQC,oBACRC,QAAS,EACTvB,MAAOwB,eACPC,YAAa,EACbC,UAAW,UACXE,UAAW,YAEJ/H,SAAWA,QAAQC,YAAcD,QAAQC,WAAWC,UAE3DsH,OAAQC,oBACRC,QAAS,EACTvB,MAAOwB,eACPC,YAAa,EACbC,UAAWxH,SACX0H,UAAW,aAIXP,OAAQC,oBACRC,QAAS,EACTvB,MAAOwB,eACPC,YAAa,EACbC,UAAWG,cACXD,UAAW,aASnB,QAASvE,sBAAsB4B,MAC7B,MAAO,UAAUpF,QAASiI,QAExB,MAAOrG,GAAEsG,aAAaD,OAAQE,sBAAsBnI,QAASoF,QAIjE,QAASlB,2BAA2BkE,WAClC,MAAO,UAAUpI,QAASiI,QAExB,MAAOrG,GAAEsG,aAAaD,OAAQI,sBAAsBrI,QAAQoI,aAIhE,QAAS7F,yBAAyB+F,SAASF,WACzC,MAAO,UAAUpI,QAASiI,QAExB,MAAOrG,GAAEsG,aAAaD,OAAQM,0BAA0BvI,QAAQsI,SAASF,aAM7E,QAASD,uBAAsBnI,QAASuH,WAEpC,GAAIiB,YACJ,IAAI3Q,EAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,cAAeC,WAAa,GAAyD,MAApDmH,UAAkB,OAAEvH,QAAQC,WAAWC,YACzHsI,YAAcC,mBACwC,MAApDlB,UAAkB,OAAEvH,QAAQC,WAAWC,WAAmB,CAC5D,GAAIS,QAASD,cAAc6G,UAAkB,OAAEvH,QAAQC,WAAWC,UAAU,GAAIqH,UAAe,IAAGvH,QAClG,IAAc,MAAVW,OACF,OACEA,OAAQA,OACRkH,UAAWW,YACXrC,MAAOuC,oBACPlB,OAAQ,EACRE,QAAS,EACTE,YAAa,GAKrB,OACEjH,OAAQ,EACR+G,QAAS,GAKf,QAASa,2BAA0BvI,QAAQsI,SAASF,WAEhD,GAAII,YACJ,IAAI3Q,EAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,cAAeC,WAAa,GAAwD,MAAnDkI,SAAiB,OAAEtI,QAAQC,WAAWC,UAE1H,GADAS,OAASD,cAAc4H,SAAiB,OAAEtI,QAAQC,WAAWC,UAAU,GAAIoI,SAAc,IAAGtI,SAC3E,MAAboI,WACF,GAAwD,MAApDA,UAAkB,OAAEpI,QAAQC,WAAWC,UAAmB,CAC5D,GAAIsI,aAAczI,uBAAuBqI,UAAkB,OAAEpI,QAAQC,WAAWC,UAAU,GAAIkI,UAAe,IAAGA,UAAe,IAAEpI,QAASoI,UAAkB,OAC5J,IAAc,MAAVzH,OACF,OACEA,OAAQA,OACRkH,UAAWW,YACXrC,MAAOuC,oBACPlB,OAAQ,EACRE,QAAS,EACTE,YAAa,QAKnB,IAAc,MAAVjH,OACF,OACEA,OAAQA,OACRkH,UAAWa,oBACXvC,MAAOuC,oBACPlB,OAAQ,EACRE,QAAS,EACTE,YAAa,EAKrB,QACEjH,OAAQ,EACR+G,QAAS,GAIf,QAASW,uBAAsBrI,QAAQoI,WAEnC,GAAII,YACJ,IAAI3Q,EAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,cAAeC,WAAa,IAC7EO,OAAS,EAC6C,MAApDyH,UAAkB,OAAEpI,QAAQC,WAAWC,WAAmB,CAC5D,GAAIsI,aAAczI,uBAAuBqI,UAAkB,OAAEpI,QAAQC,WAAWC,UAAU,GAAIkI,UAAe,IAAGA,UAAe,IAAEpI,QAASoI,UAAkB,OAC5J,IAAc,MAAVzH,OACF,OACEA,OAAQA,OACRkH,UAAWW,YACXrC,MAAOuC,oBACPlB,OAAQ,EACRE,QAAS,EACTE,YAAa,GAKrB,OACEjH,OAAQ,EACR+G,QAAS,GAKf,QAAS1F,4BAA2BhC,SASlC,OACEwH,OAAQC,oBACRC,QAAS,EACTvB,MAAOwB,eACPC,YAAa,EACbC,UAZF,SAA4B7H,SAC1B,MAAInI,GAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,cAAeC,WAAa,EACxE4H,cAEA3H,UAQqBL,UC/NlC,QAASyC,mBAAkBzC,QAAS2I,OAClC,GAAM3I,SAAWA,QAAQC,YAAcD,QAAQC,WAAWC,SAA1D,CAEA,GAAI0I,YAGFA,aAFuB,QAArBhO,OAAOsC,WAEK2L,UAEAC,sBAEhB,IAAIC,YACF/I,SACAA,QAAQC,YACRpI,EAAEe,QAAQoH,QAAQC,WAAWC,SAAS9F,WAAW+F,eAC/C,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,SACI,GAEO,OAAZiB,WAAsB2H,YACvBlR,EAAEe,QACA+P,MAAM3I,QAAQC,WAAWC,SAAS9F,WAAW+F,cAC7CC,WACG,KAELuI,MAAMK,IACJ7F,MAAOyF,YAEPK,UAAW,WACJN,MAAMO,UACTP,MAAMO,SAAU,EAChBP,MACGtE,UACCuD,YAAa,GACbJ,OAAQ,EACRrB,MACe,MAAb3E,UACI2H,sBACAC,uBAEPC,iBAGPC,SAAU,WACRX,MAAMO,SAAU,EAChBP,MAAMtE,UACJuD,YAAa,EACbJ,OAAQC,oBACRtB,MAAoB,MAAb3E,UAAoBkH,oBAAsBf,iBAEtB,mBAAlB4B,gBACTA,cAAcF,mBAES,KAAdG,WACTA,UAAUpF,UAAU,SAAUuE,OACxBA,MAAMU,aACRV,MAAMU,eAENV,MAAMvE,UAAU,SAAUqF,UACxBA,SAASJ,sBAQjBV,MAAMvE,UACRuE,MAAMvE,UAAU,SAAUqF,UACxB7H,EAAE8H,KAAKC,WAAWF,UAAYxH,WAAW,MAG3CL,EAAE8H,KAAKC,WAAWhB,OAAS1G,WAAW,MCtF5C,QAAS4G,WAAUe,GAEjB,GAAIjB,OAAQiB,EAAEC,OACVC,UAAYnB,MAAM3I,QAAQC,WAAWC,SACrCiG,OAAS,OAAQ,OAAQ,OAE7BxC,cAEIoG,aAAeD,WAAajS,EAAEe,QAAQkR,UAAU3J,cAAeC,WAAa,GAC9E4J,UAEIC,OAAQH,UACRI,MAAOC,SAASL,YAElB3D,MAAMiE,UACNC,WACA5I,YAEF2I,UAAYA,SAAW,GAAK,EAC5BL,YAAcD,UACdQ,iBAAkBR,YAGlBC,YAAc,GAKlB,QAASpG,cACP6F,UAAUe,cAAcrI,MAAMT,YAKhC,QAAS0I,UAASK,SAoBhB,QAASC,aAAY/S,EAAGiF,KAEtB,MAAS,OAALjF,GAAaA,GAAK,EAAU,KACE,GAArBuC,KAAK2G,KAAKlJ,EAAIiF,KAtB7B,GAAIpE,MAAOqC,OAAO8P,YACdC,WAAapS,KAAKE,KAAK,GAAGK,QAAQ0R,QAAQtS,eAC1CC,WACAwE,IAAM,CAuBV,OAtBA9E,GAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAUC,IAAKC,OAClC,GAAIiS,QAASrS,KAAKA,KAAKoS,YAAYpS,KAAKE,KAAK,GAAGK,QAAQH,MAAMT,gBAAgB,EAC1EyE,KAAMiO,SACRjO,IAAMiO,UAGV/S,EAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAUC,IAAKC,OAClC,GAAIkS,SAAUtS,KAAKA,KAAKoS,YAAYpS,KAAKE,KAAK,GAAGK,QAAQH,MAAMT,gBAAgB,EAE7EC,SAAQQ,OADNkS,QAAUlO,IAAM,IACD8N,YAAYI,QAASjQ,OAAO8I,WAE5B,IAWdvL,QAKT,QAASyL,mBACP/L,EAAE,wBAAwB4O,OAC1B5O,EAAE,4BAA4B6O,OAC9B7O,EAAE,6BAA6B8K,KAAK,IACpC9K,EAAE,uBAAuB6K,KAAK,IAKhC,QAAS4H,kBAAkBR,WAEzB,GAAIgB,aACFC,YACEC,GAAK,2BACLC,GAAK,WAEPC,YACEF,GAAK,eACLC,GAAK,QAEPE,OACEH,GAAK,QACLC,GAAK,MAEPG,aACEJ,GAAK,cACLC,GAAK,OAEPI,MACEL,GAAK,cACLC,GAAK,YAEPK,gBACEN,GAAK,gBACLC,GAAK,KAEPM,gBACEP,GAAK,GACLC,GAAK,OAI6C,OAAlDrQ,OAAO4L,eAAesD,UAAU3J,eAClCtI,EAAE,uBAAuB6K,KAAK9H,OAAO4L,eAAesD,UAAU3J,gBAE9DtI,EAAE,uBAAuB6K,KAAKoH,WAEhCjS,EAAE,6BAA6B8K,KAAKmI,WAAWQ,eAAelN,OAC9DvG,EAAE,6BAA6B8K,KAAKmI,WAAWS,eAAenN,OAC9DvG,EAAE,wBAAwB6O,OAC1B7O,EAAE,4BAA4B4O,OAC9B5O,EAAE,6CAA6C8K,KAAKmI,WAAWC,WAAW3M,OAC1EvG,EAAE,0CAA0C8K,KAAKmI,WAAWI,WAAW9M,OACvEvG,EAAE,kCAAkC2T,SACpC3T,EAAE,4BAA4BqO,OAAO,UACrC,IAAIuF,YAgBJ,SAAwBjB,SACtB,GAAIjS,MAAOqC,OAAO8P,YACdC,WAAapS,KAAKE,KAAK,GAAGK,QAAQ0R,QAAQtS,eAC1CC,UACJA,SAAc,QACdA,QAAgB,SAChB,IAAIwE,KAAM,CAeV,OAdA9E,GAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAUC,IAAKC,OAClC,GAAIiS,QAASrS,KAAKA,KAAKoS,YAAYpS,KAAKE,KAAK,GAAGK,QAAQH,MAAMT,gBAAgB,EAC1EyE,KAAMiO,SACRjO,IAAMiO,UAGV/S,EAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAUC,IAAKC,OAClC,GAAIkS,SAAUtS,KAAKA,KAAKoS,YAAYpS,KAAKE,KAAK,GAAGK,QAAQH,MAAMT,gBAAgB,EAC3E2S,SAAUlO,IAAM,MAClBxE,QAAgB,OAAE0S,SAASlS,MAC3BR,QAAc,KAAEF,KAAK4S,YAGzB1S,QAAc,KAAEkD,KAAK,SAASxC,EAAGyC,GAAG,MAAOA,GAAEzC,IACtCV,SArCuB2R,UAChCjS,GAAEC,KAAK2T,WAAiB,KAAG,SAAU/S,IAAKC,OACgC,MAApEiC,OAAO4L,eAAeiF,WAAmB,OAAE9S,OAAOwH,eACpDqK,QAAU5P,OAAO4L,eAAeiF,WAAmB,OAAE9S,OAAOwH,eACpB,OAA/BsL,WAAmB,OAAE9S,OAC9B6R,QAAUM,WAAWK,MAAM/M,MACa,SAA/BqN,WAAmB,OAAE9S,OAC9B6R,QAAUM,WAAWM,YAAYhN,MACO,OAA/BqN,WAAmB,OAAE9S,OAC9B6R,QAAUM,WAAWO,KAAKjN,MAE1BoM,QAAUiB,WAAmB,OAAE9S,OAEjCd,EAAE,kCAAkCqO,OAAO,WAAWsE,QAAQ,iCAAiCvQ,KAAKyR,MAAM/S,MAAM,KAAS,WA4B7H,QAASqR,UAASlK,KAAMqG,MAAOwF,QAASlK,YACtC,GAAIyI,SACJrS,GAAEC,KAAKgI,KAAKoK,MAAO,SAAUM,QAAS7R;+CACE8B,IAAlCkR,QAAQnB,QAAQtS,iBAClBgS,MAAMM,YACNN,MAAMM,SAAkB,SAAK9P,WAAWiR,QAAQnB,QAAQtS,eAAe0T,KAAMlR,WAAWiR,QAAQnB,QAAQtS,eAAe2T,OACvH3B,MAAMM,SAAgB,MAAI7R,QAG9B,IAAIsR,SAAUvP,WAAWiR,QAAQ7L,KAAKmK,OAAO/R,eAAe0T,KAAMlR,WAAWiR,QAAQ7L,KAAKmK,OAAO/R,eAAe2T,MAChHhU,GAAEC,KAAKoS,MAAO,SAAUM,QAASxM,QAC/B,GAAI8C,OAAQc,EAAEkK,UAAU7B,OAAQjM,OAAO+N,UACrC5F,MAAOA,MACPqB,OAAQxJ,OAAOrF,MACfqT,KAAM,QAERxC,WAAUyC,SAASnL,SCpLvB,QAAS2C,gBAAgByI,WAWvB,QAASC,aAAY5T,MACP,MAARA,KACFqC,OAAO8P,YAAYnS,KAEnB6T,MAAM,sBAdVvU,EAAEwU,MACAC,SAAU,OACVC,IAAKC,QAAQ,qBAAqBzP,QAAQ,OAAOmP,UACjDO,QAASN,YACTO,MAAO,SAAUC,IAAKC,YAAaC,aACf,OAAdF,IAAIG,QACNV,MAAO,yBCRf,QAASW,eAAcvC,SAGrB,GAAIwC,UAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACjD,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACjD,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACjD,MAAO,MAAO,MAAO,OAEjCC,OAASpV,EAAE,SACXqV,YAAcrV,EAAE,6BAChBsV,YAActV,EAAE,+BACpBoV,QAAO/G,OAAOgH,YAEd,IAAIE,gBAAiBvV,EAAE,mCACpBqO,OAAOrO,EAAE,iCACCwV,KAAK,QAAS7C,SACd9H,KAAK7H,YAAYuS,gBACF,oBAAjBlR,eAAmG,UAAnEA,aAAac,KAAKd,aAAaa,QAAQC,KAAKb,OAAOmR,cAA4BzV,EAAEe,QAAQ4R,QAAQpQ,WAAW+F,cAAe6M,UAAY,GAChLI,eAAelH,OAAO,6DAExB+G,OAAO/G,OAAOkH,eAEd,IAAIG,aAAc/G,eAAegE,QAAQpQ,WAAW+F,gBAAkBqN,YAAYhD,UAAYA,OAC9F0C,aAAYvK,KAAK4K,YAOjB,KAAK,GALDE,iBACAC,YACAC,UACAC,SAAU,EAELxS,EAAI,EAAGA,EAAIyS,eAAgBzS,IACb,MAAjBkC,WAAWlC,KACbqS,gBAAkB5V,EAAE,QACjBqO,OAAOrO,EAAE,QACCwV,KAAK,QAASxV,EAAE,SAAS6K,KAAKpF,WAAWlC,GAAe,YAAGuH,QAC3DD,KAAKpF,WAAWlC,GAAU,QAEvCsS,YAAc7V,EAAE,4BAChB4V,gBAAgBvH,OAAOwH,iBAEiBjT,IAApC6C,WAAWlC,GAAW,OAAEoP,UAAgE,MAAvClN,WAAWlC,GAAW,OAAEoP,SAAS,IACpFoD,SAAU,EACVD,UAAYjU,iBAAiB4D,WAAWlC,GAAW,OAAEoP,SAAS,GAAIlN,WAAWlC,GAAY,QAAmB,iBAAK,SAAWkC,WAAWlC,GAAY,QAAe,YAC9JkC,WAAWlC,GAAW,OAAEoP,SAAS,IAAMlN,WAAWlC,GAAe,aACnEuS,WAAa,UAAYrQ,WAAWlC,GAAW,OAAEoP,SAAS,GAAK,KAEjEkD,YAAYhL,KAAKiL,YAEjBD,YAAY/K,KAAK,KAEnBwK,YAAYjH,OAAOuH,iBASvB,QALIG,SAAuB,OAAZxM,WACb8L,YAAYY,MAAMX,aAIbF,OAAO,GCzDhB,QAASc,oBAAmBvD,SAG1B,GAAIwC,UAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACjD,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACjD,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACjD,MAAO,MAAO,MAAO,MAQrC,IAA4B,mBAAjB9Q,eAAmG,UAAnEA,aAAac,KAAKd,aAAaa,QAAQC,KAAKb,OAAOmR,cAA4BzV,EAAEe,QAAQ4R,QAAQpQ,WAAW+F,cAAe6M,UAAY,EAChL,GAAII,gBAAiB,+CACG5C,QAAQ,4BAA4B3P,YAAYuS,eAAe,8EAKvF,IAAIA,gBAAiB,+CACG5C,QAAQ,4BAA4B3P,YAAYuS,eAAe,eAKzF,IAAwD,MAApD5G,eAAegE,QAAQpQ,WAAW+F,eACpC,GAAIoN,aAAc/G,eAAegE,QAAQpQ,WAAW+F,eAAe,MAAM7C,WAAWuF,eAAsB,UAE1G,IAAI0K,aAAc/C,QAAQ,MAAMlN,WAAWuF,eAAsB,KAGnE,IAAImL,YACAC,YAkBJ,OAhBAA,WAAU,GAAM,WACS3Q,WAAWuF,eAAwB,QAAe,YAAE,gCAChCnJ,iBAAiB4D,WAAWuF,eAAuB,OAAE2H,SAAS,IAAI,aAG3GjN,YAAYuF,mBAAmBD,eAAe,GAChDoL,UAAU,GAAM,WACS1Q,YAAYuF,mBAAmBD,eAAe,GAAY,QAAe,YAAE,gCACvDnJ,iBAAiB6D,YAAYuF,mBAAmBD,eAAe,GAAW,OAAE2H,SAAS,IAAI,aAGtIyD,UAAU,GAAK,8BAGjBD,WAAaC,UAAU,GAAGA,UAAU,GA1Cb,4BA8CrBV,YA7CmB,oCAgDnBS,WA7CmB,qBA+CnBZ,eC5DJ,QAASc,6BAA4B1D,SAOnC,GAAI2D,WAEJA,SAAY,IACZC,EAAE,qBACFC,EAAE,eACFC,EAAE,aACFC,EAAE,0BACFC,EAAE,iBACFC,EAAE,kBACAhU,UAAU,iBAGZ0T,QAAY,IACVC,EAAE,OACFC,EAAE,OACFC,EAAE,MACFC,EAAE,QACFC,EAAE,OACFC,EAAE,MACFhU,UAAU,OAGZ,IAYIuT,YANAZ,eAAiB,+CACG5C,QAAQ,4BAA4B3P,YAAYuS,eAAe,gBAGnFG,YAAc/G,eAAegE,QAAQrK,eAAe,MAAM7C,WAAWuF,eAAsB,MAG3FoL,YAqBJ,OAnBI1Q,aAAYuF,mBAAmBD,eAAe,IAChDoL,UAAU,GAAM,WACS3Q,WAAWuF,eAAwB,QAAe,YAAE,iCAChCnJ,iBAAiB4D,WAAWuF,eAAuB,OAAE2H,SAAS,IAAI,IAAIlN,WAAWuF,eAAqB,KAAE,aAErJoL,UAAU,GAAM,WACS1Q,YAAYuF,mBAAmBD,eAAe,GAAY,QAAe,YAAE,iCACvDsL,QAAQ/P,MAAMb,YAAYuF,mBAAmBD,eAAe,GAAW,OAAE2H,SAAS,IAAI,eAGnIyD,UAAU,GAAM,WACS3Q,WAAWuF,eAAwB,QAAe,YAAE,iCAChCsL,QAAQ/P,MAAMd,WAAWuF,eAAuB,OAAE2H,SAAS,IAAI,aAE5GyD,UAAU,GAAK,+BAGjBD,WAAaC,UAAU,GAAGA,UAAU,GAhCb,4BAoCrBV,YAnCmB,oCAsCnBS,WAnCmB,qBAqCnBZ,eCtEJ,QAASsB,iCAAgClE,SAEvC,GAAI2D,WAEJA,SAAY,IACZC,EAAE,qBACFC,EAAE,eACFC,EAAE,aACFC,EAAE,0BACFC,EAAE,iBACFC,EAAE,kBACAhU,UAAU,iBAGZ0T,QAAY,IACVC,EAAE,OACFC,EAAE,OACFC,EAAE,MACFC,EAAE,QACFC,EAAE,OACFC,EAAE,MACFhU,UAAU,OAGZ,IAcIuT,YARAZ,eAAiB,+CACG5C,QAAQ,4BAA4B3P,YAAYuS,eAAe,gBAGnFG,YAAc/G,eAAegE,QAAQrK,eAErCsN,mBACAC,cAOJ,OAJAD,iBAAgB,GAAK,kBAAoBnQ,WAAW,GAAe,WAAI,KAAOA,WAAW,GAAU,MAAI,iCACvGoQ,YAAY,GAAKS,QAAQ/P,MAAMd,WAAW,GAAW,OAAEkN,SAAS,IAChEwD,WAAaP,gBAAgB,GAAGC,YAAY,GAlBrB,4BAsBrBH,YArBmB,oCAwBnBS,WArBmB,qBAuBnBZ,eCpDJ,QAASuB,yBAAwBnE,QAASoE,OAGxC,GAAI3B,QAASpV,EAAE,SACXqV,YAAcrV,EAAE,6BAChBsV,YAActV,EAAE,+BACpBoV,QAAO/G,OAAOgH,YAEd,IAAI2B,MAAOD,MAAMpE,QAAQpQ,WAAW+F,cACpC,IAAY,MAAR0O,KAAc,CAChB,GAAIzB,gBAAiBvV,EAAE,qCACpBqO,OAAOrO,EAAE,uBACCwV,KAAK,OAAQwB,MACblM,KAAK9H,YAAYuS,gBAC9BH,QAAO/G,OAAOkH,gBAGhB,GAAIG,aAAc/G,eAAegE,QAAQpQ,WAAW+F,gBAAkBqK,OACtE0C,aAAYvK,KAAK4K,YAQjB,KAAK,GANDE,iBACAC,YACAC,UAEA/P,KAEKxC,EAAI,EAAGA,EAAIyS,eAAgBzS,IACb,MAAjBkC,WAAWlC,KACbqS,gBAAkB5V,EAAE,QACjBqO,OAAOrO,EAAE,QACCwV,KAAK,QAASxV,EAAE,SAAS6K,KAAKpF,WAAWlC,GAAe,YAAGuH,QAC3DD,KAAKpF,WAAWlC,GAAU,QAEvCsS,YAAc7V,EAAE,4BAChB4V,gBAAgBvH,OAAOwH,iBAEiBjT,IAApC6C,WAAWlC,GAAW,OAAEoP,UAAgE,MAAvClN,WAAWlC,GAAW,OAAEoP,SAAS,KAC1E,EACVmD,UAAYjU,iBAAiB4D,WAAWlC,GAAW,OAAEoP,SAAS,GAAIlN,WAAWlC,GAAY,QAAmB,iBAC5GwC,KAAON,WAAWlC,GAAY,QAAe,aAAK,GACrC,KAATwC,OACF+P,WAAa,SAAW/P,MAEtBN,WAAWlC,GAAW,OAAEoP,SAAS,IAAMlN,WAAWlC,GAAe,aACnEuS,WAAa,UAAYrQ,WAAWlC,GAAW,OAAEoP,SAAS,GAAK,KAEjEkD,YAAYhL,KAAKiL,YAEjBD,YAAY/K,KAAK,KAEnBwK,YAAYjH,OAAOuH,iBAOvB,OAHAP,aAAYY,MAAMX,aAGXF,OAAO,GC7ChB,QAAS6B,kBACPjX,EAAE,iBAAiBwO,KAAK0I,OAAU,SAClClX,EAAE,iBAAiBwO,KAAK2I,IAAOC,SAAS,OACxCpX,EAAE,kBAAkBqX,SACpBrX,EAAE,mBAAmBsX,UACrBtX,EAAE,mBAAmBsX,UACrBtX,EAAE,uBAAuBsX,UACzBtX,EAAE,eAAewO,KAAK+I,cAAe,SACrC3N,WAAW6B,aAGb,QAAS+L,qBACPxX,EAAE,kBAAkBqX,SAItB,QAASI,kBACPzX,EAAE,iBAAiB0X,SAASR,OAAQS,YAAY,OAChD3X,EAAE,iBAAiBwO,KAAK2I,IAAO,SAC/BnX,EAAE,kBAAkBsX,UACpBtX,EAAE,mBAAmBqX,SACrBrX,EAAE,mBAAmBsX,UACrBtX,EAAE,uBAAuBqX,SACzBrX,EAAE,eAAewO,KAAK+I,cAAe,QAGvC,QAASK,kBACP5X,EAAE,iBAAiBwO,KAAK0I,OAAU,SAClClX,EAAE,iBAAiBwO,KAAK2I,IAAOC,SAAS,OACxCpX,EAAE,kBAAkBsX,UACpBtX,EAAE,mBAAmBsX,UACrBtX,EAAE,mBAAmBqX,SACrBrX,EAAE,uBAAuBsX,UACzBtX,EAAE,eAAewO,KAAK+I,cAAe,SACrC3N,WAAW6B,aC7Cb,QAASoM,sBAAqBC,eAAetK,MAoB3C,QAAS8G,aAAY5T,MACP,MAARA,KACFV,EAAEC,KAAM8C,OAAOgV,QAAS,SAASC,OAAOC,WACtCjY,EAAEC,KAAKgY,UAAUC,QAAQnV,OAAOwD,MAAO,SAAS4R,QAAQlV,KACtDjD,EAAE,UAAUgY,QAAQ3J,OAAO,eAAe2J,OAAO,IAAIG,QAAQ,mFAC7DnY,EAAE,OAAOgY,OAAO,IAAIG,QAAQ,uCAAuCtN,KAAK5H,IACxE,IAAImV,YAAa,MACAxV,IAAblC,KAAKuC,MACPjD,EAAEC,KAAMS,KAAKuC,KAAM,SAASpC,IAAIqX,SAW9B,GAVW,WAAPrX,KACFb,EAAEC,KAAKiY,QAAQ,SAASG,QAAQC,OAC9BtY,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAO,iBAAiB2J,OAAO,IAAIG,QAAQ,IAAIE,QAAQ,0BACpFrY,EAAE,WAAWgY,OAAO,IAAIG,QAAQ,IAAIE,SAASxN,KAAKyN,aAG9B1V,IAApBqV,UAAU1S,QACZgT,iBAAkBN,UAAUD,OAAOG,QAAQL,eAAe7U,IAAI,oBAGrD,WAAPpC,IAAkB,CACpBb,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAO,oBAAoB2J,OAAO,IAAIG,QAAQ,IAAIC,WAAW,wCAC1FpY,EAAE,aAAagY,OAAO,IAAIG,QAAQ,IAAIC,WAAW,gBAAgBvN,KAAKhK,IACtE,IAAI2X,eAAgB,CACpBxY,GAAEC,KAAMiY,QAAS,SAASO,OAAOC,YACjB,WAAVD,QACFzY,EAAEC,KAAKyY,WAAY,SAAS7X,IAAIqX,SAC9BlY,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAO,iBAAiB2J,OAAO,IAAIG,QAAQ,IAAIC,WAAW,IAAIvX,IAAI,0BACtE,MAArBoX,UAAUU,SAAwC,YAArBV,UAAUU,QACzC3Y,EAAE,WAAWgY,OAAO,IAAIG,QAAQ,IAAIC,WAAW,IAAIvX,KAAKgK,KAAKqN,SAE7DlY,EAAE,WAAWgY,OAAO,IAAIG,QAAQ,IAAIC,WAAW,IAAIvX,KAAKgK,KAAKqN,SAASrJ,aAGlDjM,IAApBqV,UAAU1S,SACa,MAArB0S,UAAUU,SAAwC,YAArBV,UAAUU,QACzCJ,iBAAkBN,UAAUD,OAAOG,QAAQL,eAAejX,IAAI,oBAE9D0X,iBAAkBN,UAAUD,OAAOG,QAAQL,eAAejX,IAAI,kBAIlEb,EAAEC,KAAKyY,WAAY,SAAS7X,IAAIqX,SAC9BlY,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAO,oBAAoB2J,OAAO,IAAIG,QAAQ,IAAIC,WAAW,IAAII,cAAc,yBAC5GxY,EAAE,aAAagY,OAAO,IAAIG,QAAQ,IAAIC,WAAW,IAAII,eAAe1N,KAAK2N,QAAQ5J,OACjF7O,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAO,iBAAiB2J,OAAO,IAAIG,QAAQ,IAAIC,WAAW,IAAII,cAAc,IAAI3X,IAAI,0BACjHb,EAAE,WAAWgY,OAAO,IAAIG,QAAQ,IAAIC,WAAW,IAAII,cAAc,IAAI3X,KAAKgK,KAAKqN,SAASrJ,SAG5F2J,kBAGJJ,iBAImB,MAArBH,UAAUU,SACZ3Y,EAAE,UAAUgY,OAAO,yBAAyB3J,OAAOuK,UAIvDrE,MAAM,qCAERvU,EAAE,UAAUwV,KAAK,SAAS,UAC1BxV,EAAE,kBAAkBqO,OAAOwK,gBAC3B7Y,EAAE,MAAMsL,MAAM,WACV,GAAIE,QAAS3E,IACb7G,GAAEwL,QAAQsN,UAAU,KAAK,KAAKC,YAAY,IAAK,cAC/C/Y,EAAEwL,QAAQsN,UAAU,KAAK,MAAMC,YAAY,IAAK,cAChD/Y,EAAEwL,QAAQsN,UAAU,KAAK,gBAAgBE,SACzChZ,EAAEwL,QAAQsN,UAAU,KAAK,iBAAiBE,SAC1ChZ,EAAEwL,QAAQyN,KAAK,WAAWD,SAC1BhZ,EAAEwL,QAAQyN,KAAK,YAAYD,WAEnB,OAARxL,KACFgK,oBAEAP,iBAOJ,QAASsB,kBAAkBN,UAAUD,OAAOG,QAAQL,eAAeoB,YAAYC,cAC7EnZ,EAAEC,KAAKgY,UAAU1S,OAAQ,SAASW,MAAMkT,QACtC,GAAIC,aAAc,eAAeF,aAAa,6BAA6BlB,UAAUqB,gBAAgBpT,OAAO3F,MAAM,oCAClE0X,UAAUqB,gBAAgBpT,OAAO1F,WAC/D,KAAKyX,UAAUqB,gBAAgBpT,OAAOzF,QAAQ8Y,YAAY,uEACOrT,MAAM,IAAI8R,OAAO,IAAIG,QAAQ,IAC5GiB,QAAOjB,QAAQpV,OAAOwD,OAAS2S,cACT,eAApBE,OAAO3J,WACTzP,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAOmL,eAAevB,UAAUqB,gBAAgBpT,OAAO4R,eAAesB,OAAOK,aAEpF,aAApBL,OAAO3J,YACTtJ,OAASvG,eAAeqY,UAAUqB,gBAAgBpT,QAAQ4R,eAAexP,oBAC9C1F,IAAvBuD,OAAOzF,KAAKA,KAAK,KACnBV,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAOgL,aACpCK,aAAavT,OAAO,YAAYD,MAAM,IAAI8R,OAAO,IAAIG,WAGjC,eAApBiB,OAAO3J,YACTzP,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAOgL,aACpCM,eAAezY,WAAW+W,UAAUqB,gBAAgBpT,QAAQ,SAAS,YAAYA,MAAM,IAAI8R,OAAO,IAAIG,SACtGyB,mBAAmB9B,eAAexP,cAAc,OAAO,EAAE,aAAapC,MAAM,IAAI8R,OAAO,IAAIG,aAtHnGnY,EAAE,oBAAoB8K,KAAK+O,sBAAsB/B,eAAexP,gBAAiB,IACjFtI,EAAEC,KAAM8C,OAAOgV,QAAS,SAASlX,IAAIC,OACnCd,EAAE,UAAUa,KAAKgK,KAAK,MAGxB7K,EAAEwU,MACAC,SAAU,OACVC,IAAKC,QAAQ,sBAAsBzP,QAAQ,OAAOqB,KAAK,OAAOuR,eAAexP,cAC7EsM,QAASN,YACTO,MAAO,SAAUC,IAAKC,YAAaC,aACf,OAAdF,IAAIG,QACNV,MAAO,oCAoFb,IAAIqE,QAAU,6BACVC,eAAiB,gJCrGvB,QAASiB,4BAA2BhC,gBAwBlC,QAASS,kBAAkBN,UAAUD,OAAOG,QAAQL,eAAeoB,YAAYC,cAE7E,GACIY,cADAC,gBAwBJ,IArBAha,EAAEC,KAAKgY,UAAU1S,OAAQ,SAASW,MAAMkT,QACtC,GAAIC,aAAc,eAAeF,aAAa,6BAA6BlB,UAAUqB,gBAAgBpT,OAAO3F,MAAM,oCAClE0X,UAAUqB,gBAAgBpT,OAAO1F,WAC/D,KAAKyX,UAAUqB,gBAAgBpT,OAAOzF,QAAQ8Y,YAAY,wEACQrT,MAAM,IAAI8R,OAAO,IAAIG,QAAQ,IACzF,gBAApBiB,OAAO3J,WACTzP,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAOmL,eAAevB,UAAUqB,gBAAgBpT,OAAO4R,eAAesB,OAAOK,aAEpF,gBAApBL,OAAO3J,YACTuK,cAAc5Z,KAAK6X,UAAUqB,gBAAgBpT,QAC7C6T,cAAa,GAES,kBAApBX,OAAO3J,YACTtJ,OAASvG,eAAeqY,UAAUqB,gBAAgBpT,QAAQ4R,eAAexP,gBACzEnC,OAAOzF,KAAOY,SAAS6E,OAAOzF,UACHkC,IAAvBuD,OAAOzF,KAAKA,KAAK,KACnBV,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAOgL,aACpCY,YAAY9T,OAAO,YAAYD,MAAM,IAAI8R,OAAO,IAAIG,aAItC,GAAhB4B,aAAsB,CAExB,GAAIG,oBACF/G,GAAO,8JACPC,GAAO,2CAGTpT,GAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAO,qCAAqC6L,kBAAkB3T,MAAM,UACjGvG,EAAE,OAAOgY,OAAO,IAAIG,SAAS9J,OAAO8L,gBAAgBH,cAAclC,iBAElE9X,EAAEoa,YAAYC,UAAY,SAAS3X,GACjC,GAAIa,GAAI8J,SAAS3K,EACjB,OAAQL,OAAMkB,GAAM,KAAOA,GAE7BvD,EAAEoa,YAAYE,YAAc,SAAS5X,GACnC,GAAIa,GAAIV,WAAWH,EACnB,OAAQL,OAAMkB,GAAM,KAAOA,GAG7BvD,EAAE,iBAAiBoa,aACjBG,WAAY,EAAE,IACdC,SACEjE,GAAGkE,QAAO,IAEZC,eAAgB,SAAUC,MACxB,GAAIC,KAAM5a,EAAE2a,MAAM7P,MAGlB,OAFA8P,KAAMA,IAAIjY,QAAQ,KAAM,IACxBiY,IAAMA,IAAIjY,QAAQ,IAAK,QAzE/B3C,EAAE,oBAAoB8K,KAAK+O,sBAAsB/B,eAAexP,gBAAiB,IACjFtI,EAAEC,KAAM8C,OAAOgV,QAAS,SAASlX,IAAIC,OACnCd,EAAE,UAAUa,KAAKgK,KAAK,MAKxB,WACE7K,EAAEC,KAAM8C,OAAOgV,QAAS,SAASC,OAAOC,WACtCjY,EAAEC,KAAKgY,UAAUC,QAAS,SAASC,QAAQlV,KACzCjD,EAAE,UAAUgY,QAAQ3J,OAAO,eAAe2J,OAAO,IAAIG,QAAQ,uFAErCvV,IAApBqV,UAAU1S,QACZgT,iBAAkBN,UAAUD,OAAOG,QAAQL,eAAe7U,IAAI,wBAIpEgU,oBCfJ,QAASuC,gBAAgBrT,OAAOwM,QAAQ/M,QACvC,GAAIiV,eACJA,aAAY,uBACXC,EAAE,oCACFvE,EAAE,uCACFC,EAAE,gDACFC,EAAE,wDAEHoE,YAAY,wBACXtE,EAAE,wDACFC,EAAE,kDACFC,EAAE,gDACFC,EAAE,6DACFC,EAAE,oDACFC,EAAE,qDAMH,IAAIhR,OACH,GAAImV,gBAAiBF,YAAYjV,OAGlC,IAAIrF,OAAQ,+CAA+C4F,OAAO5F,MAAM,0BAGpEya,KAAO,GACPta,KAAOyD,aAAcgC,OAAOzF,KAUhC,OATAV,GAAEC,KAAKS,KAAM,SAAS2T,UAAUlU,GACC,MAA5BA,EAAEwS,QAAQtS,iBAEZ2a,KADGpV,OACIoV,KAAKC,OAAO,WAAW5G,UAAU,YAAY0G,eAAe5a,EAAEwS,QAAQtS,gBAAgB,cAEtF2a,KAAKC,OAAO,WAAW5G,UAAU,YAAYlU,EAAEwS,QAAQtS,eAAe8F,OAAO1F,QAAQ8Y,YAAY,iBAIpGhZ,MAbI,8BAaOya,KAZP,WC1BZ,QAASb,iBAAiBhU,OAAOwM,SAE/B,GAAI1N,KAAMlC,OAAOsB,aAAaa,QAAQC,KAAKpC,OAAOuB,MAC9C4W,gBAAkBnY,OAAOsB,aAAac,KAAKF,KAAKW,OAEhDuV,aAAepY,OAAOsB,aAAac,KAAKF,KAAKkW,aAAaxI,QAAQtS,eAEnE+a,SACH7E,EAAE,mKACFC,EAAE,mKACFC,EAAE,mKACFC,EAAE,mKACFC,EAAE,mKACFC,EAAE,oKAGEN,UAEJA,SAAY,IACZC,EAAE,qBACFC,EAAE,eACFC,EAAE,aACFC,EAAE,0BACFC,EAAE,iBACFC,EAAE,mBAGFN,QAAY,IACRC,EAAE,OACFC,EAAE,OACFC,EAAE,MACFC,EAAE,QACFC,EAAE,OACFC,EAAE,MAGN,IAAIyE,WAEJA,SAAY,IACVC,EAAK,oCACLC,EAAK,8BACLC,EAAK,mBACLC,EAAK,qCACLC,EAAK,qCACLC,EAAK,yCACLC,EAAK,oCACLC,EAAK,4BACLC,EAAK,QACLC,EAAK,8BAGPV,QAAY,IACRC,EAAK,SACLC,EAAK,OACLC,EAAK,KACLC,EAAK,UACLC,EAAK,SACLC,EAAK,aACLC,EAAK,WACLC,EAAK,SACLC,EAAK,KACLC,EAAK,WAGT,IAAIC,UACF7I,GAAO,YACPC,GAAO,MAGL6I,SACF9I,GAAO,UACPC,GAAO,MAIN8I,KAAO,gEACeF,QAAQzV,MAAM,wBACdJ,OAAO,GAAG5F,MAAM,wBAChB4F,OAAO,GAAG5F,MAAM,wBAChB4F,OAAO,GAAG5F,MAAM,kCAEtCya,KAAO,GACNta,OAoEL,OAlECV,GAAEC,KAAKkG,OAAQ,SAASD,MAAMgS,SAC5BxX,KAAKwF,OAAO/B,aAAc+T,QAAQxX,QAErCV,EAAEC,KAAKS,KAAK,GAAI,SAAS2T,UAAUlU,GAChC,GAAIgc,YACAjB,iBAAgBtV,OAAOyO,YACzB8H,SAAS,GAAKjB,gBAAgBtV,OAAOyO,WAAWvO,KAChDqW,SAAS,GAAKjB,gBAAgBtV,OAAOyO,WAAW7T,aAEhD2b,SAAS,GAAK9H,UACd8H,SAAS,GAAK,KAGhB,IAEIC,UAFAC,gBAAkB/F,QAAQ/P,MAAMpG,EAAEwS,QAAQtS,gBAG1Cic,kBACJ,IAAInB,aAAa9G,WAAY,CAC3B,GAAIkI,cAAepB,aAAa9G,WAAW7R,MAAM,GACjD4Z,UAAW,KAAKG,aAAa,IAC7Bvc,EAAEC,KAAKsc,aAAc,SAAS3b,KAAK4b,WACjCF,gBAAgBlc,KAAKib,QAAQ9U,MAAMiW,cAErCH,gBAAkBA,gBAAgB,MAAMJ,QAAQ1V,MAAM,KAAK+V,oBAE3DF,UAAW,EAGb,IAAIK,SACAC,QACAC,UACAC,SACAlc,MAAK,GAAG2T,YAAa3T,KAAK,GAAG2T,WAAW1B,QAAQtS,gBAClDoc,QAAU/b,KAAK,GAAG2T,WAAW1B,QAAQtS,eACrCsc,UAAYF,UAEZA,QAAU,EACVE,UAAY,MAEVjc,KAAK,GAAG2T,YAAc3T,KAAK,GAAG2T,WAAW1B,QAAQtS,gBACnDqc,QAAUhc,KAAK,GAAG2T,WAAW1B,QAAQtS,eACrCuc,UAAYF,UAEZA,QAAU,EACVE,UAAY,MAGgB,MAA5Bzc,EAAEwS,QAAQtS,iBACZ2a,KAAOA,KAAKC,OAAO,kBAAkBkB,SAAS,GAAG,KAAKA,SAAS,GAAG,mBAC5BE,gBAAgB,KAAKjB,QAAQjb,EAAEwS,QAAQtS,gBAAgB+b,SAAS,0EAEXK,QAAQ,IAAI,8BAC1DA,QAAQ,4GACSA,QAAQ,GAAG,kEAAkEE,UAAU,uFAI1DD,QAAQ,IAAI,8BAC1DA,QAAQ,4GACSA,QAAQ,GAAG,kEAAkEE,UAAU,8BAOjJV,KAAKlB,KAtED,mBC/EZ,QAAS6B,gBACL,GACI3W,OADA4W,KAAOjW,IAGXiW,MAAKC,UAAY,SAASrc,KAAMD,SAC5B,GAAIuc,UAAW,GAAIC,YAAWvc,KAAMD,QACpCuc,UAASE,WACThX,MAAQ8W,UAEZF,KAAKK,cAAgB,SAASC,WAC1BlX,MAAMmX,aAAaD,YAM3B,QAASH,YAAWvc,KAAMD,SACtB,GAAIqc,MAAOjW,KACPyW,cACAC,UACAC,YACItX,OACIuX,gBAAgB,eAEpBC,aACIhZ,QACIiZ,QACIC,SAAS,EACTC,QAAUC,OAASF,SAAS,KAEhCG,aAAc,EACdC,YAAa,EACbC,cAAc,IAGtBC,WAAaN,SAAS,GACtBO,QAAUP,SAAS,GACnBQ,SAAWR,SAAS,GACpBrd,OAASuK,KAAM,MACfuT,OACIzY,QACI0Y,KAAM,EACNpU,OAASqU,SAAU,SAG3BC,OACIje,OAAQuK,KAAM,QAGtB2T,YACIC,kBAAmB,MAI3Bje,SAAUT,EAAE+G,QAAO,EAAMwW,SAAU9c,SAEnCqc,KAAKI,SAAW,WACZ,GAAI3P,SACAoR,WAAaje,KAAKE,KAAK,EAC3BZ,GAAEC,KAAKS,KAAKE,KAAK,GAAI,SAAS2K,MAAOzF,MACjC,GAAI8Y,YAAcle,KAAKA,KAAK6K,OAAO7J,IAAI,SAASmd,EAAGtb,GAC/C,MAAS,OAALsb,GACQA,EAAGhc,WAAWgc,EAAEpc,QAAQhC,QAAQge,WAAW1c,WAAYuE,GAAIqY,WAAWpb,GAAIuC,KAAM6Y,WAAWpb,KAE3Fsb,EAAG,KAAMvY,GAAIqY,WAAWpb,KAIxCgK,MAAKnN,MAAM0F,KAAMA,KAAMpF,KAAMke,eAEW,MAAxCne,QAAQge,WAAWC,oBACnBnR,KAAK,GAAGrL,KAAOzB,QAAQge,WAAWC,mBAGtCpB,YAAcwB,KAAMH,WAAYja,OAAQ6I,OAG5CuP,KAAKO,aAAe,SAASD,WACzB,GAAI1c,MAAO4c,UACX,IAAY,MAAR5c,KAAc,OAAO,CACzB,IAAIqe,gBACA7Y,OAAQ8Y,SAAS5B,WACjBiB,OAAOM,WAAWje,KAAKoe,MACvBpa,OAAOhE,KAAKgE,OAIhB,OAFAjE,SAAQ+c,WAAaxd,EAAE+G,QAAO,EAAMtG,QAAQ+c,WAAYuB,eACxD,GAAIE,YAAWza,MAAM/D,QAAQ+c,aACtB,GC7Ff,QAAS0B,aAAaC,kBAClB,MAAO,YAEL,GAAItY,KAAK/F,MAAMT,eAAiB0C,QAAO4S,YAAa,CAClD,GAAIyJ,MAAO,oDAAoDzK,QAAQ,iBAAiB9N,KAAK/F,MAAMT,cAAc,IACjH,OAAW,mCAAmC8e,iBAAiBtY,KAAK/F,MAAMwH,eAAe,UAAU8W,KAEnG,WAAkDxc,IAA9Cuc,iBAAiBtY,KAAK/F,MAAMwH,eACjB,mCAAmC6W,iBAAiBtY,KAAK/F,MAAMwH,eAAe,UAE9E,mCAAmCzB,KAAK/F,MAAMwH,cAAc,WAOnF,QAAS+W,eAAelZ,OAAOgZ,kBAC3B,MAAO,YACH,OAA8Cvc,IAA1Cuc,iBAAiBtY,KAAKW,EAAEc,eACxB,GAAI5F,GAAI,MAAQyc,iBAAiBtY,KAAKW,EAAEc,eAAiB,WAEzD,IAAI5F,GAAI,MAAQmE,KAAKW,EAAI,MAM7B,OAJAxH,GAAEC,KAAK4G,KAAKyY,OAAQ,WAChB5c,GAAK,QAAUmE,KAAKnC,OAAOoB,KAAO,KAClCe,KAAKgY,EAAE,IAAI1Y,OAAO1F,QAAQ8Y,cAEvB7W,GAUf,QAASgX,cAAavT,OAAOiX,WAE3B,GADA6B,WAAWnN,YAAYvL,MAAQgZ,eAAgB,YACpB3c,IAAvBuD,OAAOzF,KAAKA,KAAK,GAAiB,CACpC,GAAI8e,OAAQ,GAAI3C,eAGhB,WACA2C,MAAMzC,UAAU5W,OAAOzF,MACrB8c,YACEtX,OACEhE,KAAM,QAGRic,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,IAEVjC,aACEhZ,QACAkb,SACEhC,SAAS,EACTC,QAAUC,OAASF,SAAS,KAE5BiC,UAAW,IAGfrB,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtBoY,OACEyB,UAAU,EACVC,kBAAmB,KACnBna,QACUsE,OAAS8V,YAAY,QACrB1B,KAAM,OAGlB2B,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,YAEhB3Y,QAAU,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,YAE7N8W,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,eAI5B,QAASoD,wBAAuBra,OAAOiX,WACrC,OAA2Bxa,IAAvBuD,OAAOzF,KAAKA,KAAK,GAAiB,CACpC,GAAI8e,OAAQ,GAAI3C,eAGhB,WACA2C,MAAMzC,UAAU5W,OAAOzF,MACrB8c,YACEtX,OACEhE,KAAM,UAGRic,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACE+C,MAASC,SAAU,UACnBC,KAAQD,SAAU,UAClBE,QAAWF,SAAU,UACrBhc,QACEkb,SACEhC,SAAS,EACTC,QAAUC,OAASF,SAAS,KAE9BiC,UAAW,IAGfrB,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtBoY,OACE0B,kBAAmB,KACnBna,QACUsE,OAAS8V,YAAY,QACrB1B,KAAM,OAGlB2B,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAIlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f,gBACzB7B,kBAAmBvY,OAAO1F,QAAQie,mBAAqB,UAGvDc,MAAMrC,cAAcC,eAI5B,QAASyD,qBAAoB1a,OAAOiX,WAClC,OAA2Bxa,IAAvBuD,OAAOzF,KAAKA,KAAK,GAAiB,CACpC,GAAI8e,OAAQ,GAAI3C,eAGhB,WACA2C,MAAMzC,UAAU5W,OAAOzF,MACrB8c,YACEtX,OACEhE,KAAM,QAGRic,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACE+C,MAASC,SAAU,UACnBhc,QACEkb,SACEhC,SAAS,EACTC,QAAUC,OAASF,SAAS,KAE9BiC,UAAW,IAGfrB,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtBoY,OACE0B,kBAAmB,KACnBna,QACUsE,OAAS8V,YAAY,QACrB1B,KAAM,OAGlB2B,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAIlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,eAI5B,QAASnD,aAAY9T,OAAOiX,WACxB,GAAIoC,OAAQ,GAAI3C,eAEhB,WACA1W,OAAOzF,KAAOyC,eAAegD,OAAOzF,KAAK,EAAE2C,MAAK,GAChDmc,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEtX,OACEhE,KAAM,MACN4e,aAAc,IAGhB3C,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACEhZ,QACEqc,YACEnD,SAAS,EACToD,SAAU,OACVC,MAAM,EACNC,cAAc,KAIpB1C,OACE5Y,QAASgY,SAAS,GAClBuD,cAAe,EACfxc,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAMtBga,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAGlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,cAK5B,QAASgE,iBAAgBjb,OAAOiX,UAAUiE,kBACtC,GAAI7B,OAAQ,GAAI3C,eAEhB,WACA1W,OAAOzF,KAAOyC,eAAegD,OAAOzF,KAAK,EAAE2C,MAAK,GAChDmc,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEtX,OACEhE,KAAM,MACN4e,aAAc,GACdQ,WAAY,KAGdnD,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACEhZ,QACEqc,YACEnD,SAAS,EACToD,SAAU,OACVC,MAAM,EACNC,cAAc,KAIpB1C,OACE5Y,QAASgY,SAAS,GAClBuD,cAAe,EACfxc,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtBoY,OACEzY,QACEua,SAAS,EACToB,UAAWrC,YAAYmC,oBAI3BpB,SACEC,QAAQ,EACRC,SAAS,EACToB,UAAWlC,cAAclZ,OAAOkb,oBAGpC5C,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,cAK5B,QAASzD,gBAAexT,OAAOiX,WAC3B,GAAIoC,OAAQ,GAAI3C,eAEhB,WACA1W,OAAOzF,KAAOyC,eAAegD,OAAOzF,KAAK,EAAE2C,MAAK,GAChDmc,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEtX,OAAShE,KAAM,UAEfic,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACEhZ,QACEqc,YACEnD,SAAS,EACToD,SAAU,OACVC,MAAM,EACNC,cAAc,KAIpB1C,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtB0B,QAAS,UAAU,WACnBsY,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAGlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,cAK5B,QAASoE,sBAAqBrb,OAAOiX,WACjC,GAAIoC,OAAQ,GAAI3C,eAEhB,WACA1W,OAAOzF,KAAOyC,eAAegD,OAAOzF,KAAK,EAAE2C,MAAK,GAChDmc,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEtX,OAAShE,KAAM,OAAO4e,aAAc,IACpC3C,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACEhZ,QACEiZ,QACEC,SAAS,GAEbiC,UAAW,EACXhC,QAAUC,OACF+B,UAAW,EACX4B,cAAe,MAKzBjD,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAGtBga,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAGlB7B,YACEC,kBAAmB,MACnB3c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,cAM5B,QAASsE,uBAAsBvb,OAAOiX,WAClC,GAAIoC,OAAQ,GAAI3C,eAEhB,WACA2C,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEtX,OACEhE,KAAM,UAGRic,QACEP,SAAS,EACT6B,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACYiD,KAAQD,SAAU,UAClBE,QAAWF,SAAU,WAEjClC,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtBoY,OACQzY,QACI0Y,KAAM,OAIlB2B,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAGlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,cAI5B,QAASuE,oBAAmBxb,OAAOiX,WAC/B,GAAIoC,OAAQ,GAAI3C,eAEhB,WACA1W,OAAOzF,KAAOgD,kBAAkByC,OAAOzF,KAAK2C,MAAK,GACjDmc,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEtX,OACEhE,KAAM,MACN4e,aAAc,IAEhB3C,QACEP,SAAS,EACTkC,UAAU,EACVL,cAAe,MACfC,QAAS,EACTC,OAAQ,GAEVjC,aACYiD,KAAQD,SAAU,UAClBE,QAAWF,SAAU,WAEjClC,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtBoY,SAKA4B,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAGlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,cAI5B,QAASwE,iBAAgBzb,OAAOiX,WAC5B,GAAIoC,OAAQ,GAAI3C,eAEhB,WACA2C,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEjd,OAAQuK,KAAK,OACb5E,OACEhE,KAAM,OAGRic,QACEP,SAAS,EACTkC,UAAU,EACVL,cAAe,SACfC,QAAS,EACTC,OAAQ,GAEVjC,aACEiD,KAAQD,SAAU,UAClBE,QAAWF,SAAU,UACrBhc,QACImd,WAAW,IAGjBrD,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,SAEtBoY,OACEyD,UAAU,GAIZ7B,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAGlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f;2CAGzBf,MAAMrC,cAAcC,cAK5B,QAAS2E,gBAAe5b,OAAOiX,WAC3B,GAAIoC,OAAQ,GAAI3C,eAEhB,WACA2C,MAAMzC,UAAUzb,SAAS6E,OAAOzF,OAC9B8c,YACEjd,OAAQuK,KAAK,SACb5E,OACEhE,KAAM,OAERic,QACEP,SAAS,EACTkC,UAAU,EACVL,cAAe,SACfC,QAAS,EACTC,OAAQ,GAEVjC,aACEiD,KAAQD,SAAU,UAClBE,QAAWF,SAAU,UACrBhc,QACImd,WAAW,IAGjBxD,SAGAG,OACE7Z,IAAKwB,OAAO1F,QAAQuF,QACpBlB,IAAKqB,OAAO1F,QAAQwF,QACpB6Z,UAAU,GAGZG,SACEC,QAAQ,EACRC,SAAS,EACTC,aAAc,oCACdC,YAAa,uGACgCla,OAAO1F,QAAQ8Y,YAAY,iBACxE+G,aAAc,aAGlB7B,YACE1c,SAAUoE,OAAO1F,QAAQ8f,mBAGzBf,MAAMrC,cAAcC,cf7mB5B,GAAI5U,UACAsH,eACAF,oBACAO,cACAU,oBACAD,mBACAU,sBACAC,oBACU,QAAVhI,UACFf,SAAW,UACXyH,WAAa,OACbH,eAAiB,OACjBF,oBAAsB,GACtBO,cAAgB,UAChBU,oBAAsB,UACtBD,mBAAqB,UACrBU,sBAAwB,OACxBC,qBAAuB,SAEvB/I,SAAW,UACXyH,WAAa,UACbH,eAAiB,UACjBF,oBAAsB,EACtBO,cAAgB,UAChBU,oBAAsB,UACtBD,mBAAqB,UACrBU,sBAAwB,OACxBC,qBAAuB,QAGV,0BAAXrM,UACFsD,SAAW,UACXyH,WAAa,WAGA,YAAX/K,UACFsD,SAAW,UACXyH,WAAa,UC2Df,IAAIgB,wBAAyB,SAAW+Q,UACtC,MAAO,UAAgCjQ,GAErC,GAAIjB,OAAQiB,EAAEC,MAEVgQ,WAEFA,WAEFA,SAAW5b,KAAKwG,QACd,WAEE,GAMIqV,YANAC,eACFnf,OAAOsB,aAAac,KAAKd,aAAaa,QAAQC,KAAKb,OAChD4d,eACDC,oBACFpf,OAAOsB,aAAac,KAAKd,aAAaa,QAAQC,KAAKb,OAChD6d,mBAGHF,YADoB,4BAAlBC,eACWrL,gCACX/F,MAAM3I,QAAQC,WAAWC,UAEA,uBAAlB6Z,eACI7L,4BACXvF,MAAM3I,QAAQC,WAAWC,UAEA,oBAAlB6Z,eACIpL,wBACXhG,MAAM3I,QAAQC,WAAWC,SACzB8Z,qBAE2B,gBAApBpf,OAAO4G,UACHuM,mBAAmBpF,MAAM3I,QAAQC,WAAWC,UAE5C6M,cAAcpE,MAAM3I,QAAQC,WAAWC,WAGxC,OAAZkB,UACAvJ,EAAEe,QACA+P,MAAM3I,QAAQC,WAAWC,SAAS9F,WAAW+F,cAC7CC,WACG,IAEL6Z,MAAMC,WAAWJ,cAGnBnc,KAAM,eAII,OAAZyD,UACAvJ,EAAEe,QACA+P,MAAM3I,QAAQC,WAAWC,SAAS9F,WAAW+F,cAC7CC,WACG,KAEL6Z,MAAME,UAAUvQ,EAAE3B,QAClBgS,MAAMG,OAAO3Y,iBC1Jf2I,SAAW,EACXZ,UAAY5H,EAAEkC,aACdiG,YAAc,GODdkF,SAAW,GACXO,YAAc,EAEd3X,GAAE+C,QAAQmI,QAAU,MACtBkM,SAAW,GACXO,YAAc,IACV3X,EAAE+C,QAAQmI,QAAU,MACxBkM,SAAW,IACXO,YAAc,IORhB3X,EAAEwiB,UAAUC,MAAM,WAEhB,GAAIxd,KAAMZ,aAAaa,QAAQC,KAAKb,MAChCoe,YAAcre,aAAac,KAAKF,KAAKyd,WACrCre,cAAac,KAAKF,KAAK0d,aAAqC,GAAtB5f,OAAO6f,YAC/ChL,iBAEAH,iBAEFzX,EAAE,sBAAsB4O,OACxB5O,EAAE,iBAAiB8K,KAAK,MAAM9H,YAAY6f,gBAE1C7iB,EAAEC,KAAM8X,QAAS,SAASlX,IAAIC,OAC5Bd,EAAE,aAAaqO,OAAO,sBAAsBxN,IAAI,kBAAkBA,IAAI,MACtEb,EAAE,kBAAkBqO,OAAO,kBAAkBxN,IAAI,kBACjDb,EAAE,gBAAgBa,KAAQiK,KAAKhK,MAAMP,MAAMgG,SAG7CvG,EAAE,kBAAkBuO,SAAS,UAC7BvO,EAAE,YAAYuO,SAAS,UAGvBvO,EAAEwiB,UAAUrR,GAAG,QAAS,qBAAsB,WACzB,UAAfuR,YACF5I,2BAA2B9Z,EAAE6G,MAAM2O,KAAK,SAASlN,eAEjDuP,qBAAqB7X,EAAE6G,MAAM2O,KAAK,SAASlN,eAE7CsB,WAAW6B,eAIbzL,EAAEwiB,UAAUrR,GAAG,QAAS,gBAAiB,WACpB,UAAfuR,YACF5I,2BAA2B9Z,EAAE6G,MAAM2O,KAAK,SAASlN,eAEjDuP,qBAAqB7X,EAAE6G,MAAM2O,KAAK,SAASlN,eAE7CsB,WAAW6B,eAIbzL,EAAE,eAAesL,MAAMmM,gBAGvBzX,EAAE,aAAamR,GAAG,QAAS,IAAK,WAG9B,MAFAnR,GAAE6G,MAAM0H,SAAS,UAAUuU,SAAS,YAAYC,YAAY,UAC5D/iB,EAAEA,EAAE6G,MAAM2O,KAAK,SAASjH,SAAS,UAAUuU,SAAS,eAAeC,YAAY,WACxE","file":"mapWizardLayer.min.js","sourcesContent":["\n\n\nfunction filterLocation(d,filter) {\n  var parseFilter  = [];\n  $.each(filter, function (k,v) {\n    parseFilter.push(v.toUpperCase());\n  });\n\tvar newData = {}\n\tnewData['title'] = d.title\n\tnewData['definition'] = d.definition\n\tnewData['options'] = d.options\n\tnewData['data'] = {}\n\tnewData.data['dimensions'] = d.data.dimensions;\n\tnewData.data['keys'] = [];\n\tnewData.data['keys'][0] = [];\n\tnewData.data['keys'][1] = d.data.keys[1];\n\tnewData.data['data'] = [];\n\t$.each(d.data.keys[0], function (key,value) {\n\t\tif ($.inArray(value.toUpperCase(),parseFilter)>-1) {\n\t\t\tnewData.data.keys[0].push(value.toUpperCase());\n\t\t\tvar a = d.data.keys[0].indexOf(value);\n\t\t\tnewData.data.data.push(d.data.data[a]);\n\t\t}\n  });\n\treturn newData;\n}\n","\n\n\nfunction filterYear(d,filter) {\n\tvar newData = {}\n\tnewData['title'] = d.title\n\tnewData['definition'] = d.definition\n\tnewData['options'] = d.options\n\tnewData['data'] = {}\n\tnewData.data['dimensions'] = d.data.dimensions;\n\tnewData.data['keys'] = [];\n\tnewData.data['keys'][0] = d.data.keys[0];\n\tnewData.data['keys'][1] = [];\n\tnewData.data['data'] = [];\n\tvar idxYear = []\n\t$.each(filter, function (key,value) {\n\t\tidxYear.push(d.data.keys[1].indexOf(value))\n\t\tnewData.data.keys[1].push(value);\n\t});\n\t$.each(newData.data.keys[0], function(key,cr){\n\t\tnewData.data.data[key] = [];\n\t\t$.each(idxYear, function (yKey,value) {\n\t\t\tnewData.data.data[key].push(d.data.data[key][value])\n\t\t});\n\t});\n\treturn newData;\n}\n","\n\n//flips dimensions on two dimensional data model\nfunction flipData(d) {\n    var r = {keys: d.keys.slice(0), dimensions: d.dimensions.slice(0)};\n    r.keys.reverse();\n    r.dimensions.reverse();\n    r.data = r.keys[0].map(function(k, i0) {\n        return r.keys[1].map(function(k, i1) {\n            return d.data[i1][i0];\n        });\n    });\n    return r;\n}\n","// function to convert large numbers in human readable numbers\n// passing a negative number for decimals returns the unmodified number\nfunction getHumanReadData(number, decimals, trimZeros) {\n  if (decimals === undefined) {\n    decimals = 0;\n  }\n\n  if (decimals < 0) {\n    return number;\n  }\n\n  number = parseFloat(number);\n  var abs = Math.abs(number);\n\n  /* code from MDN (public domain)\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round$revision/981487#Decimal_rounding\n  */\n  /**\n   * Decimal adjustment of a number.\n   *\n   * @param {String}  type  The type of adjustment.\n   * @param {Number}  value The number.\n   * @param {Integer} exp   The exponent (the 10 logarithm of the adjustment base).\n   * @returns {Number} The adjusted value.\n   */\n  function decimalAdjust(type, value, exp) {\n    // If the exp is undefined or zero...\n    if (typeof exp === 'undefined' || +exp === 0) {\n      return Math[type](value);\n    }\n    value = +value;\n    exp = +exp;\n    // If the value is not a number or the exp is not an integer...\n    if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\n      return NaN;\n    }\n    // Shift\n    value = value.toString().split('e');\n    value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n    // Shift back\n    value = value.toString().split('e');\n    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n  }\n\n  function toFixed(number, decimals) {\n    var s = decimalAdjust('round', number, -decimals).toFixed(decimals);\n    return trimZeros ? s.replace(/\\.0+$|(\\..*?)0+$/,'$1') : s;\n  }\n\n  // this function prints larger number in OECD format 10 000.23 usw.\n  function spaceSeparateNumber(val){\n    while (/(\\d+)(\\d{3})/.test(val.toString())){\n      val = val.toString().replace(/(\\d+)(\\d{3})/, '$1' + ' ' + '$2');\n    }\n    return val;\n  }\n\n  // this function prints larger number in US format 10,000.23 usw.\n  function commaSeparateNumber(val){\n    while (/(\\d+)(\\d{3})/.test(val.toString())){\n      val = val.toString().replace(/(\\d+)(\\d{3})/, '$1' + ',' + '$2');\n    }\n    return val;\n  }\n\n  if(abs > 1e12) {\n    return toFixed(number / 1e12, decimals) + '&nbsp;' + window.lang_labels['trillion'];\n  } else if(abs > 1e9) {\n    return toFixed(number / 1e9, decimals) + '&nbsp;' + window.lang_labels['billion'];\n  } else if(abs > 1e6) {\n    return toFixed(number / 1e6, decimals) + '&nbsp;' + window.lang_labels['million'];\n  } else if(abs > 1e5) {\n    return toFixed(number / 1e3, decimals) + '&nbsp;' + window.lang_labels['thousand'];\n  } else {\n    return spaceSeparateNumber(toFixed(number, decimals));\n  }\n}\n","// sorts first dimension on key of second dimension\nfunction sortDimension0(d, key1, desc) {\n  desc = desc || true;\n  var r = {dimensions: d.dimensions, keys: d.keys.slice(0)};\n  var sorted = d.data.map(function(v, i) {\n    return {v: v, i: i};\n  });\n  sorted.sort(function(a, b) {\n    return (a.v[key1] == b.v[key1]) ? 0\n            : (a.v[key1] == null) ? 1\n            : (b.v[key1] == null) ? -1\n            : (a.v[key1] < b.v[key1]) != desc ? -1\n            : 1;\n  });\n  r.data = sorted.map(function(v) {\n    return v.v;\n  });\n  r.keys[0] = sorted.map(function(v) {\n    return d.keys[0][v.i];\n  });\n  return r;\n}\n","// sorts first dimension on sum of keys of second dimension\nfunction sortDimension0sum(d, desc) {\n  function add(a, b) {\n    return a == null ? b\n         : b == null ? a\n         : a + b;\n  }\n  desc = desc || true;\n  var r = {dimensions: d.dimensions, keys: d.keys.slice(0)};\n  var sorted = d.data.map(function(v, i) {\n    return {v: v, i: i};\n  });\n  sorted.sort(function(a, b) {\n    return (a.v.reduce(add, 0) == b.v.reduce(add, 0)) ? 0\n            : (a.v.reduce(add, 0) < b.v.reduce(add, 0)) != desc ? -1\n            : 1;\n  });\n  r.data = sorted.map(function(v) {\n    return v.v;\n  });\n  r.keys[0] = sorted.map(function(v) {\n    return d.keys[0][v.i];\n  });\n  return r;\n}\n","// sorts second dimension on key of first dimension\nfunction sortDimension1(d, key0, desc) {\n  desc = desc || true;\n  var r = {dimensions: d.dimensions, keys: d.keys.slice(0)};\n  var sorted = d.data[key0].map(function(v, i) {\n    return {v: v, i: i};\n  });\n  sorted.sort(function(a, b) {\n    return (a.v == b.v) ? 0\n           : (a.v == null) ? 1\n           : (b.v == null) ? -1\n           : (a.v < b.v) != desc ? -1\n           : 1;\n  });\n  r.data = d.data.map(function(l) {\n    return sorted.map(function(v) {\n      return l[v.i];\n    });\n  });\n  r.keys[1] = sorted.map(function(v) {\n    return d.keys[1][v.i];\n  });\n  return r;\n}\n","\n\n\n// returns the latest available year for a two dimensional JSON data set\n\nfunction getLatestYearData (data) {\n  var newData = {};\n  var latestYear = data.keys[1].length-1;\n  $.each(data.keys[0], function (key,value) {\n      newData[value]=[];\n      while (data.data[data.keys[0].indexOf(value)][latestYear] == null && latestYear>=0) {\n          latestYear = latestYear-1;\n      };\n      newData[value][0]=data.keys[1][latestYear];\n      newData[value][1]=data.data[data.keys[0].indexOf(value)][latestYear];\n      latestYear = data.keys[1].length-1;\n  });\n  return newData;\n}\n","\n//convert JSON model into table format\n\nfunction getTableData (data) {\n\tvar newData = {};\n\t$.each(data.keys[1], function (key,value) {\n\t  newData[value]={};\n\t  $.each(data.keys[0], function (k,v) {\n\t  newData[value][v] = data.data[data.keys[0].indexOf(v)][data.keys[1].indexOf(value)];\n\t  });\n\t});\n\treturn newData;\n}\n","function getMapData(wizardConfig, page, countrylist, Chart) {\n  var tab = wizardConfig.project.tabs[page];\n  var mapType = wizardConfig.tabs[tab].mapType;\n  var flowStatus = wizardConfig.tabs[tab].type;\n\n  var ConfigProject = getPageCharts(wizardConfig, page);\n\n  var DataforMap = [];\n  var DataforMap1 = [];\n\n  // set default layer to index of first element of Chart or 0\n  var data = {\n    defaultLayer:\n      Chart != null\n        ? Math.max(0, wizardConfig.tabs[tab].charts.indexOf(Chart[0]))\n        : 0,\n  };\n\n  if (mapType == \"TwoIndicatorsSplitOnYears\") {\n    // returns data of the first chart as separate maps - split on the YEARS dimension (data.keys[1])\n    // returns data of the second chart as separate maps - split on the YEARS dimension (data.keys[1])\n\n    var labels = wizardConfig.tabs[tab].labels;\n    var key = 0;\n    $.each(labels.order, function (order, value) {\n      if ($.inArray(value, ConfigProject[0].data.keys[1]) > -1) {\n        DataforMap[key] = filterYear(ConfigProject[0], [value]);\n        if (labels.labels[value]) {\n          DataforMap[key][\"title\"] = labels.labels[value].name;\n          DataforMap[key][\"unit\"] = labels.labels[value].unit;\n        } else {\n          DataforMap[key][\"title\"] = value;\n          DataforMap[key][\"unit\"] = \"\";\n        }\n        DataforMap[key][\"code\"] = value;\n        DataforMap[key][\"definition\"] = value;\n        DataforMap[key][\"values\"] = getCountryData(\n          getLatestYearData(DataforMap[key][\"data\"]),\n          countrylist\n        );\n\n        if (\n          ConfigProject[0].options.minimum &&\n          ConfigProject[0].options.minimum != null\n        ) {\n          DataforMap[key][\"min\"] = ConfigProject[0].options.minimum;\n        } else {\n          DataforMap[key][\"min\"] = minValueLatest(DataforMap[key][\"values\"]);\n        }\n        if (\n          ConfigProject[0].options.maximum &&\n          ConfigProject[0].options.maximum != null\n        ) {\n          DataforMap[key][\"max\"] = ConfigProject[0].options.maximum;\n        } else {\n          DataforMap[key][\"max\"] = maxValueLatest(DataforMap[key][\"values\"], 1);\n        }\n        DataforMap[key][\"latestYear\"] = maxValueLatest(\n          DataforMap[key][\"values\"],\n          0\n        );\n        key++;\n      }\n    });\n\n    if (ConfigProject[1] != null) {\n      $.each(ConfigProject[1].data.keys[1], function (key, value) {\n        DataforMap1[key] = filterYear(ConfigProject[1], [value]);\n        if (labels.labels[value]) {\n          DataforMap1[key][\"title\"] = labels.labels[value].name;\n        } else {\n          DataforMap1[key][\"title\"] = value;\n        }\n        DataforMap1[key][\"code\"] = value;\n        DataforMap1[key][\"definition\"] = value;\n        DataforMap1[key][\"values\"] = getCountryData(\n          getLatestYearData(DataforMap1[key][\"data\"]),\n          countrylist\n        );\n\n        if (\n          ConfigProject[1].options.minimum &&\n          ConfigProject[1].options.minimum != null\n        ) {\n          DataforMap1[key][\"min\"] = ConfigProject[1].options.minimum;\n        } else {\n          DataforMap1[key][\"min\"] = minValueLatest(DataforMap1[key][\"values\"]);\n        }\n        if (\n          ConfigProject[1].options.maximum &&\n          ConfigProject[1].options.maximum != null\n        ) {\n          DataforMap1[key][\"max\"] = ConfigProject[1].options.maximum;\n        } else {\n          DataforMap1[key][\"max\"] = maxValueLatest(\n            DataforMap1[key][\"values\"],\n            1\n          );\n        }\n        DataforMap1[key][\"latestYear\"] = maxValueLatest(\n          DataforMap1[key][\"values\"],\n          0\n        );\n      });\n    }\n  } else {\n    $.each(ConfigProject, function (chart, values) {\n      if (values.type != \"flow\") {\n        DataforMap.push(\n          (function () {\n            return mobx.observable(\n              {\n                get id() {\n                  return chart;\n                },\n                get title() {\n                  return values.title[lang];\n                },\n                get definition() {\n                  return values.definition[lang];\n                },\n                get options() {\n                  return values.options;\n                },\n                get years() {\n                  return values.data.keys[1];\n                },\n                selectedYear: (window.location.search.match(\n                  /[?&]t=([^&]*)/\n                ) || [\"\", null])[1],\n                get data() {\n                  return (\n                    this.selectedYear === null\n                      ? values\n                      : filterYear(values, [this.selectedYear])\n                  ).data;\n                },\n                get _values() {\n                  return getCountryData(\n                    getLatestYearData(this.data),\n                    countrylist\n                  );\n                },\n                get values() {\n                  // mapRegion value is not used for computing minimum / maximum / color scale\n                  if (\"mapRegion\" in this.options) {\n                    var v = $.extend({}, this._values);\n                    v[this.options.mapRegion] = getLatestYearData(this.data)[\n                      this.options.mapRegion\n                    ];\n                    return v;\n                  }\n                  return this._values;\n                },\n                get _min() {\n                  if (this.options.minimum && this.options.minimum != null) {\n                    return this.options.minimum;\n                  }\n                  return minValueLatest(this._values);\n                },\n                get _max() {\n                  if (this.options.maximum && this.options.maximum != null) {\n                    return this.options.maximum;\n                  }\n                  return maxValueLatest(this._values, 1);\n                },\n                get latestYear() {\n                  return maxValueLatest(this._values, 0);\n                },\n                get dMax() {\n                  return Math.max(Math.abs(this._min), Math.abs(this._max));\n                },\n                get dMin() {\n                  return -this.dMax;\n                },\n                get minColor() {\n                  return quantize(\n                    this._min,\n                    this.dMin,\n                    this.dMax,\n                    MapColors.map(function (x, idx) {\n                      return idx;\n                    })\n                  );\n                },\n                get maxColor() {\n                  return quantize(\n                    this._max,\n                    this.dMin,\n                    this.dMax,\n                    MapColors.map(function (x, idx) {\n                      return idx;\n                    })\n                  );\n                },\n                get colors() {\n                  if (this.options.mapDivergent) {\n                    // adjust color scale if min/max is assymetric\n                    if (this.minColor > 0) {\n                      return MapColors.slice(this.minColor);\n                    } else if (this.maxColor + 1 < MapColors.length) {\n                      return MapColors.slice(0, this.maxColor + 1);\n                    }\n                  }\n                  return MapColors;\n                },\n                get min() {\n                  if (this.options.mapDivergent) {\n                    // adjust color scale if min/max is assymetric\n                    if (this.minColor > 0) {\n                      return (\n                        this.dMin +\n                        (this.minColor * (this.dMax - this.dMin)) /\n                          MapColors.length\n                      );\n                    }\n                  }\n                  return this._min;\n                },\n                get max() {\n                  if (this.options.mapDivergent) {\n                    // adjust color scale if min/max is assymetric\n                    if (\n                      !(this.minColor > 0) &&\n                      this.maxColor + 1 < MapColors.length\n                    ) {\n                      return (\n                        this.dMax -\n                        ((MapColors.length - (this.maxColor + 1)) *\n                          (this.dMax - this.dMin)) /\n                          MapColors.length\n                      );\n                    }\n                  }\n                  return this._max;\n                },\n              },\n              {\n                values: mobx.computed({ keepAlive: true }),\n                min: mobx.computed({ keepAlive: true }),\n                max: mobx.computed({ keepAlive: true }),\n                colors: mobx.computed({ keepAlive: true }),\n                latestYear: mobx.computed({ keepAlive: true }),\n              },\n              { deep: false, name: \"map\" }\n            );\n          })()\n        );\n      }\n    });\n  }\n\n  data.map = DataforMap;\n  data.map1 = DataforMap1;\n  data.flow = flowStatus;\n\n  function getPageCharts(wizardConfig, page) {\n    var tab = wizardConfig.project.tabs[page];\n    var charts = wizardConfig.tabs[tab].charts;\n\n    var pageCharts = [];\n    $.each(charts, function (k, v) {\n      pageCharts.push(wizardConfig.charts[v]);\n    });\n    return pageCharts;\n  }\n\n  function minValue(series) {\n    // private\n    var min = null;\n    $.each(series, function (k, v) {\n      if (v == null) return;\n      if (min == null) min = v;\n      else if (min > v) min = v;\n    });\n    return min;\n  }\n\n  function maxValue(series) {\n    // private\n    var max = null;\n    $.each(series, function (k, v) {\n      if (v == null) return;\n      if (max == null) max = v;\n      else if (max < v) max = v;\n    });\n    return max;\n  }\n\n  function minValueLatest(series) {\n    // public\n    var min = null;\n    $.each(series, function (k, v) {\n      v = v[1];\n      if (v == null) return;\n      if (min == null) min = v;\n      else if (min > v) min = v;\n    });\n    return min;\n  }\n\n  function maxValueLatest(series, arrayValue) {\n    // public\n    var max = null;\n    $.each(series, function (k, v) {\n      v = v[arrayValue];\n      if (v == null) return;\n      if (max == null) max = v;\n      else if (max < v) max = v;\n    });\n    return max;\n  }\n\n  function getStandardDeviationWizard(series, value) {\n    // public\n    var devVal = [];\n    $.each(series, function (k, v) {\n      devVal.push(v[1]);\n    });\n    var average = getAverageFromNumArr(devVal, 2);\n    var deviation = getStandardDeviation(devVal, 2);\n\n    if (value == \"max\") {\n      return average + deviation;\n    }\n    if (value == \"min\") {\n      return average - deviation;\n    } else {\n      return null;\n    }\n  }\n\n  function getCountryData(series, group) {\n    // public\n    var data = {};\n    $.each(series, function (k, v) {\n      if ($.inArray(k, group) > -1) {\n        data[k] = v;\n      }\n    });\n    return data;\n  }\n\n  return mobx.observable(\n    {\n      defaultLayer: data.defaultLayer,\n      get map() {\n        return data.map;\n      },\n      get map1() {\n        return data.map1;\n      },\n      get flow() {\n        return data.flow;\n      },\n    },\n    {},\n    { deep: false, name: \"DataforMapAll\" }\n  );\n}\n","function getIndicatorColorScale(d, dMin, dMax, feature, colors) {\n  if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n    return quantize(d, dMin, dMax, colors)\n  } else {\n    return landmass;\n  }\n\n}\n\nfunction quantize(d, dMin, dMax, range) {\n  function scaleToInteger(d, dMin, dMax, scaleMin, scaleMax) {\n    var i = Math.floor((d - dMin) / (dMax - dMin) * (scaleMax - scaleMin + 1)) + scaleMin;\n    if (i < scaleMin) return scaleMin;\n    if (i > scaleMax) return scaleMax;\n    return i;\n  }\n\n  return range[scaleToInteger(d, dMin, dMax, 0, range.length - 1)];\n}\n","\n\nfunction getBubbleSize(d, dMax, feature) {\n  //private\n  if (d == null || d <= 0) return null;\n  var radius = Math.sqrt(d / dMax) * 25;\n  if (radius < 3) radius = 3;\n  return radius;\n}\n","\n\n//returns lines for disputed territories for a given country group\n\nfunction getDisputedLines (lines,group) {\n  var disputedLinesNew = {\n        \"type\": \"FeatureCollection\",\n        \"features\": []\n        }\n  if ($.inArray('ind', group)>-1 || $.inArray('chn', group)>-1 || $.inArray('pak', group)>-1) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'IndiaChinaPakistan' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('ind', group)>-1 || $.inArray('chn', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'IndiaChina' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('egy', group)>-1 || $.inArray('sdn', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'EgyptSudan' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('sdn', group)>-1 || $.inArray('ssd', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'Sudan' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('ken', group)>-1 || $.inArray('som', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'KenyaSom' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  }\n  return disputedLinesNew;\n\n}\n","\n\n\n//adds small islands as dots on color coded maps\n\nfunction getMapSubPoints(mapCentroides) {\n  if (themeURL == 'ecb') return;\n  var mapSubPoints = {\n        \"type\": \"FeatureCollection\",\n        \"features\": []\n        }\n  var smallIslands = ['AND','ATG','AIA','ASM','ABW','ALA','BRB','BLM','BMU','BVT','CCK','COK','CPV','CUW','CXR','DMA','FLK','FSM','GRD','GGY','GIB','GLP','SGS','GUM','HKG','IMN','JEY','KIR','COM','KNA','CYM','LCA','LIE','MCO','MAF','MHL','MAC','MNP','MTQ','MSR','MLT','MUS','MDV','NFK','NRU','NIU','PYF','SPM','PCN','PRI','PLW','REU','SYC','SHN','SJM','SMR','STP','SXM','TCA','ATF','TKL','TON','TTO','TUV','VAT','VCT','VGB','VIR','WLF','WSM','MYT','ANT'];\n  $(mapCentroides.features).each(function(feature){\n    if ($.inArray(this.properties[mapCode], smallIslands) > -1) {\n      mapSubPoints['features'].push(this);\n    }\n  });\n  return mapSubPoints;\n}\n","// add mapLayers for the different display types (bubbles, colored bublbes (simple and complex), colored shapes)\n\nfunction addMapLayers(bubbleMap, mapdataviz, flowStatus) {\n  var bubbles = [];\n  var layers = {};\n  var layerName = [];\n\n  if (bubbleMap == \"multiColored\") {\n    // used on template 'multipleColoredBubbles'\n    // A colored bubble map. The first chart sets the bubble size, the second the bubble color. The second dimension (YEARS) is represented as a separate indicator\n\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    var i = 0;\n    var matchIndex = [];\n    $.each(DataforMap, function (key, value) {\n      $.each(DataforMap1, function (key1, value1) {\n        if (value1.title == value.title) {\n          matchIndex[key] = key1 + 1;\n        }\n      });\n\n      if (matchIndex[key]) {\n        var colorIndicator = DataforMap1[matchIndex[key] - 1];\n      } else {\n        var colorIndicator = null;\n      }\n\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSizeColorGeneric(value, colorIndicator),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[$(\"<div>\").html(DataforMap[i][\"title\"]).text()] = bubbles[i];\n      i++;\n    });\n\n    bubbles[0].addTo(mapdataviz);\n    updateMultiLegend(DataforMap[0], \"size\");\n    updateMultiLegend(DataforMap1[matchIndex[0] - 1], \"color\");\n    // global variables to define map layer (used for popup window)\n    window.mapLayerIndex = 0;\n    window.mapLayerMatchIndex = matchIndex;\n    if (DataforMap.length > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      updateMultiLegend(DataforMap[index], \"size\");\n      updateMultiLegend(DataforMap1[matchIndex[index] - 1], \"color\");\n      mapdataviz.closePopup();\n      window.mapLayerIndex = index;\n    });\n  } else if (bubbleMap == \"colored\") {\n    // first indicator bubble size, all other indicators bubble color\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    for (i = 0; i < DataforMap.length - 1; i++) {\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSizeColorGeneric(DataforMap[0], DataforMap[i + 1]),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[\n        $(\"<div>\")\n          .html(DataforMap[i + 1][\"title\"])\n          .text()\n      ] = bubbles[i];\n    }\n    bubbles[0].addTo(mapdataviz);\n    updateLegend(DataforMap[0], \"size\");\n    updateLegend(DataforMap[1], \"color\");\n    if (DataforMap.length - 1 > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      updateLegend(DataforMap[index + 1], \"color\");\n    });\n  } else if (bubbleMap == \"coloredPairUnpair\") {\n    // pair indicators bubble size, unpair indicators bubble color\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    for (i = 0; i < DataforMap.length / 2; i++) {\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSizeColorGeneric(\n          DataforMap[i * 2],\n          DataforMap[i * 2 + 1]\n        ),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[\n        $(\"<div>\")\n          .html(DataforMap[i * 2][\"title\"])\n          .text()\n      ] = bubbles[i];\n    }\n    bubbles[0].addTo(mapdataviz);\n    updateLegend(DataforMap[0], \"size\");\n    updateLegend(DataforMap[1], \"color\");\n    if (DataforMap.length - 1 > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      updateLegend(DataforMap[index * 2], \"size\");\n      updateLegend(DataforMap[index * 2 + 1], \"color\");\n    });\n  } else if (bubbleMap == \"simple\") {\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    for (i = 0; i < DataforMap.length; i++) {\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSimpleGeneric(DataforMap[i]),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[$(\"<div>\").html(DataforMap[i][\"title\"]).text()] = bubbles[i];\n    }\n    bubbles[0].addTo(mapdataviz);\n    // add flows\n    if (flowStatus == \"flow\") {\n      updateLegend(DataforMap[0], \"flows\");\n      updateFlowData(DataforMap[0][\"code\"]);\n      // add global variable for value behind bubble size as a scaling reference for flow lines\n      window.maxBubble = DataforMap[0][\"max\"];\n    } else {\n      updateLegend(DataforMap[0], \"size\");\n    }\n\n    if (DataforMap.length > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      // add flows\n      if (flowStatus == \"flow\") {\n        updateFlowData(DataforMap[index][\"code\"]);\n        clearFlows();\n        clearFlowLegend();\n        updateLegend(DataforMap[index], \"flows\");\n        // add global variable for value behind bubble size as a scaling reference for flow lines\n        window.maxBubble = DataforMap[index][\"max\"];\n      } else {\n        updateLegend(DataforMap[index], \"size\");\n      }\n    });\n  } else {\n    var shapes = [];\n    var layerGroup = [];\n    var mapSubPoints = getMapSubPoints(mapCentroides);\n\n    DataforMap.forEach(function (data, i) {\n      runOnce(\n        \"createGeoJson\" + i,\n        function () {\n          shapes[i] = L.geoJson(mapShapes, {\n            style: getColorCountryShapesStyleGeneric(DataforMap[i]),\n            onEachFeature: highlightAndPopup,\n            clickable: false,\n          });\n          if (mapSubPoints != undefined) {\n            bubbles[i] = L.geoJson(mapSubPoints, {\n              pointToLayer: bubblesSimpleColorGeneric(DataforMap[i]),\n              onEachFeature: highlightAndPopup,\n            });\n            layerGroup[i] = L.layerGroup([shapes[i], bubbles[i]]);\n          } else {\n            layerGroup[i] = L.layerGroup([shapes[i]]);\n          }\n          // force the layer control to display the indicators in the correct order\n          L.stamp(layerGroup[i]);\n        },\n        function () {\n          console.log(\"update\", i);\n          layerGroup[i].eachLayer(function (feature) {\n            feature.setStyle(getColorCountryShapesStyleGeneric(DataforMap[i]));\n          });\n        }\n      );\n      layerName[$(\"<div>\").html(DataforMap[i][\"title\"]).text()] = layerGroup[i];\n    });\n\n    runOnce(\"addDefaultLayer\", function () {\n      layerGroup[DataforMapAll.defaultLayer].addTo(mapdataviz);\n      if (DataforMap.length > 1) {\n        if ($(window).width() < 750 || embed == 2) {\n          L.control\n            .layers(layerName, null, { collapsed: true })\n            .addTo(mapdataviz);\n        } else {\n          L.control\n            .layers(layerName, null, { collapsed: false })\n            .addTo(mapdataviz);\n        }\n      }\n    });\n    $(\".leaflet-control-layers-selector\").click(\n      mobx.action(\"layer\", function () {\n        var index = $(this).parent().index();\n        DataforMapAll.defaultLayer = index;\n      })\n    );\n    mobx.autorun(\n      function () {\n        updateLegend(DataforMap[DataforMapAll.defaultLayer], \"color\");\n      },\n      { name: \"updateLegend\" }\n    );\n  }\n}\n\n// helper function for mobx\n// call f1() now and f2() on following reactions\nfunction runOnce(name, f1, f2) {\n  mobx.autorun(\n    (function (done) {\n      return function (reaction) {\n        if (!done) {\n          done = true;\n          console.log(\"run\", name);\n          f1();\n          if (!f2) reaction.dispose();\n        } else {\n          console.log(\"rerun:\", name);\n          if (f2) f2();\n        }\n      };\n    })(false),\n    { name: name }\n  );\n}\n","function textColor(hex) {\n  var match = hex.match(/^#(..)(..)(..)$/);\n  if (match) {\n    var rgb = match.slice(1).map(function (s) {\n      return parseInt(s, 16) / 255;\n    });\n    // calculate L from HSL\n    var L = (Math.min.apply(null, rgb) + Math.max.apply(null, rgb)) / 2;\n    return L < 0.5 ? \"#fff\" : \"#000\";\n  } else {\n    return \"#000\";\n  }\n}\n\nfunction updateLegend(Data, mode) {\n  if (mode == \"color\") {\n    if (Data) {\n      var colors = Data[\"colors\"];\n      $(\"#legendMinColor\")\n        .parent()\n        .parent()\n        .empty()\n        .append(\n          colors.map(function (color, idx, colors) {\n            var el = $(\"<li>\");\n            if (idx === 0) {\n              el.addClass(\"firstLegendElement\");\n              el.append(\n                $('<span id=\"legendMinColor\" class=\"firstLegendElement\">')\n                  .css(\"background\", color)\n                  .css(\"color\", textColor(color))\n              );\n            } else if (idx + 1 === colors.length) {\n              el.addClass(\"lastLegendElement\");\n              el.append(\n                $('<span id=\"legendMaxColor\" class=\"lastLegendElement\">')\n                  .css(\"background\", color)\n                  .css(\"color\", textColor(color))\n              );\n            } else {\n              el.append($(\"<span>\").css(\"background\", color));\n            }\n            return el;\n          })\n        );\n      $(\"#legendMaxColor\").html(\n        getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendMinColor\").html(\n        getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleColor\").text($(\"<div>\").html(Data[\"title\"]).text());\n\n      var sliderHeight = Data.selectedYear !== null ? 23 : 0;\n      if (\n        \"mapRegion\" in Data[\"options\"] &&\n        Data[\"options\"][\"mapRegion\"] != \"\" &&\n        Data[\"values\"][Data[\"options\"][\"mapRegion\"]]\n      ) {\n        var subtext =\n          lang_countries[Data[\"options\"][\"mapRegion\"].toLowerCase()] +\n          \": \" +\n          getHumanReadData(\n            Data[\"values\"][Data[\"options\"][\"mapRegion\"]][1],\n            Data[\"options\"][\"tooltipDecimals\"]\n          );\n        if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n          subtext += \" \" + Data[\"options\"][\"tooltipUnit\"];\n        }\n        if (\n          Data[\"values\"][Data[\"options\"][\"mapRegion\"]][0] != Data[\"latestYear\"]\n        ) {\n          subtext +=\n            \" (\" + Data[\"values\"][Data[\"options\"][\"mapRegion\"]][0] + \")\";\n        }\n        $(\"#legendSubtextColor\").html(subtext);\n        $(\"#legendSubtextColor\").show();\n        if (\"mapSource\" in lang_labels) {\n          $(\"#topContainer\").css(\"height\", 66 + sliderHeight);\n        } else {\n          $(\"#topContainer\").css(\"height\", 58 + sliderHeight);\n        }\n      } else {\n        if (\"mapSource\" in lang_labels) {\n          $(\"#topContainer\").css(\"height\", 58 + sliderHeight);\n        }\n        $(\"#legendSubtextColor\").hide();\n      }\n\n      if (window.relatedDataControl) {\n        window.relatedDataControl.updateColors(function (id) {\n          return (\n            Data.values[id] &&\n            quantize(Data.values[id][1], Data.min, Data.max, Data.colors)\n          );\n        });\n      }\n\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitColor\").text(\", \" + Data[\"options\"][\"tooltipUnit\"]);\n      } else {\n        $(\"#legendUnitColor\").text(\"\");\n      }\n      $(\"#legendYearColor\").text(Data.latestYear);\n\n      var sliderCreated =\n        typeof $('div[name=\"sliderMapColor\"]').slider(\"instance\") !==\n        \"undefined\";\n\n      if (Data.selectedYear !== null) {\n        $(\"div.sliderWrapper\").show();\n\n        var PLAY = \"\\u25b6\";\n        var STOP = \"\\u25fe\";\n\n        function playStart() {\n          var button = $(\"div.sliderWrapper input\");\n          window.clearInterval(button.data(\"timer\"));\n          button.data(\"timer\", 0);\n          button.val(STOP);\n          button.data(\"timer\", window.setInterval(playStep, 1000));\n          console.log(\"start playing\", button.data(\"timer\"));\n          playStep(0);\n        }\n\n        function playStop() {\n          var button = $(\"div.sliderWrapper input\");\n          console.log(\"stop playing\", button.data(\"timer\"));\n          button.val(PLAY);\n          window.clearInterval(button.data(\"timer\"));\n          button.data(\"timer\", 0);\n        }\n\n        function playStep(pos) {\n          var el = $('div[name=\"sliderMapColor\"]');\n          var options = el.slider(\"option\");\n          if (typeof pos !== \"number\") {\n            pos = el.slider(\"value\") + 1;\n          }\n          console.log(\"step\", pos);\n          if (pos > options.max) {\n            playStop();\n          } else {\n            el.slider(\"value\", pos);\n          }\n        }\n\n        if (!sliderCreated) {\n          console.log(\"create slider\");\n          $('div[name=\"sliderMapColor\"]').slider({\n            max: 1,\n            disabled: true,\n          });\n          $(\"div.sliderWrapper input\").val(PLAY);\n          $(\"div.sliderWrapper input\")\n            .off(\"click\")\n            .click(function () {\n              var playing = $(this).val() !== PLAY;\n              if (playing) {\n                playStop();\n              } else {\n                playStart();\n              }\n            });\n        }\n\n        console.log(\"update slider change\", Data.id);\n        $('div[name=\"sliderMapColor\"]').slider(\"option\", {\n          start: function () {\n            playStop();\n          },\n          change: mobx.action(\"slider\", function (ev, ui) {\n            console.log(\"change\", Data.id, Data.selectedYear, ui.value);\n            if (ev.originalTarget) {\n              playStop();\n            }\n            Data.selectedYear = Data.years[ui.value];\n          }),\n        });\n\n        console.log(\"update slider data\", Data.id);\n        $('div[name=\"sliderMapColor\"]').slider(\"option\", {\n          max: Data.years.length - 1,\n          value:\n            (Data.years.length + Data.years.indexOf(Data.selectedYear)) %\n            Data.years.length,\n          disabled: false,\n        });\n      } else {\n        if (sliderCreated) {\n          $('div[name=\"sliderMapColor\"]').slider(\"destroy\");\n        }\n        $(\"div.sliderWrapper\").hide();\n      }\n    } else {\n      $(\"#legendMaxColor\").html(\"\");\n      $(\"#legendMinColor\").html(\"\");\n      $(\"#legendTitleColor\").text(\"No data available\");\n      $(\"#legendUnitColor\").text(\"\");\n      $(\"#legendYearColor\").text(\"\");\n    }\n  } else if (mode == \"flows\") {\n    if (Data) {\n      $(\"#legendBubble\").html(\n        window.lang_labels[\"min\"] +\n          \": \" +\n          getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"]) +\n          \" - \" +\n          window.lang_labels[\"max\"] +\n          \": \" +\n          getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleSize\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitSize\").text(\", \" + Data[\"options\"][\"tooltipUnit\"]);\n      } else {\n        $(\"#legendUnitSize\").text(\"\");\n      }\n      $(\"#legendYearSize\").text(\"\");\n    } else {\n      $(\"#legendBubble\").html(\"\");\n      $(\"#legendTitleSize\").text(\"No data available\");\n      $(\"#legendUnitSize\").text(\"\");\n      $(\"#legendYearSize\").text(\"\");\n    }\n  } else {\n    if (Data) {\n      $(\"#legendBubble\").html(\n        window.lang_labels[\"min\"] +\n          \": \" +\n          getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"]) +\n          \" - \" +\n          window.lang_labels[\"max\"] +\n          \": \" +\n          getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleSize\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitSize\").text(\", \" + Data[\"options\"][\"tooltipUnit\"]);\n      } else {\n        $(\"#legendUnitSize\").text(\"\");\n      }\n      $(\"#legendYearSize\").text(Data[\"latestYear\"]);\n    } else {\n      $(\"#legendBubble\").html(\"\");\n      $(\"#legendTitleSize\").text(\"No data available\");\n      $(\"#legendUnitSize\").text(\"\");\n      $(\"#legendYearSize\").text(\"\");\n    }\n  }\n  $(\"#flowLayer .commodity\").text(Data[\"title\"]);\n}\n\nfunction updateMultiLegend(Data, mode) {\n  if (mode == \"color\") {\n    if (Data) {\n      $(\"#legendMaxColor\").html(\n        getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendMinColor\").html(\n        getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleColor\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitColor\").text(\", \" + Data[\"unit\"]);\n      } else {\n        $(\"#legendUnitColor\").text(\"\");\n      }\n      $(\"#legendYearColor\").text(\"\");\n    } else {\n      $(\"#legendMaxColor\").html(\"\");\n      $(\"#legendMinColor\").html(\"\");\n      $(\"#legendTitleColor\").text(\"No data available\");\n      $(\"#legendUnitColor\").text(\"\");\n      $(\"#legendYearColor\").text(\"\");\n    }\n  } else {\n    if (Data) {\n      $(\"#legendBubble\").html(\n        window.lang_labels[\"min\"] +\n          \": \" +\n          getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"]) +\n          \" - \" +\n          window.lang_labels[\"max\"] +\n          \": \" +\n          getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleSize\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitSize\").text(\", \" + Data[\"unit\"]);\n      } else {\n        $(\"#legendUnitSize\").text(\"\");\n      }\n      $(\"#legendYearColor\").text(\"\");\n    } else {\n      $(\"#legendBubble\").html(\"\");\n      $(\"#legendTitleSize\").text(\"No data available\");\n      $(\"#legendUnitSize\").text(\"\");\n      $(\"#legendYearSize\").text(\"\");\n    }\n  }\n}\n\nfunction setLegend(chartType, bubbleMap) {\n  if (\n    bubbleMap == \"colored\" ||\n    bubbleMap == \"multiColored\" ||\n    bubbleMap == \"coloredPairUnpair\"\n  ) {\n    $(\"#textLegend\").hide();\n  } else if (bubbleMap == \"simple\") {\n    $(\"#colorLegend\").hide();\n    if (chartType == \"mapWizard\") {\n      $(\"#textLegend\").hide();\n      $(\"#sizeLegend\").css({ width: \"100%\" });\n    }\n  } else {\n    $(\"#sizeLegend\").hide();\n    if (chartType == \"mapWizard\") {\n      $(\"#textLegend\").hide();\n      $(\"#colorLegend\").css({ width: \"100%\" });\n    }\n  }\n}\n","var landmass;\nvar landmassBorder;\nvar landmassBorderWidth;\nvar landmassGroup;\nvar bubbleDefaultBorder;\nvar bubbleDefaultColor;\nvar bubbleHighlightBorder;\nvar shapeHighlightBorder;\nif (themeURL=='ecb') {\n  landmass = '#f0f0f0';\n  landmassNA = '#fff';\n  landmassBorder = '#000';\n  landmassBorderWidth = 0.5;\n  landmassGroup = '#f0f0f0';\n  bubbleDefaultBorder = \"#494444\";\n  bubbleDefaultColor = \"#d56620\";\n  bubbleHighlightBorder = \"#fff\";\n  shapeHighlightBorder = '#fff';\n} else {\n  landmass = '#939393';\n  landmassNA = '#939393';\n  landmassBorder = '#939393';\n  landmassBorderWidth = 1;\n  landmassGroup = '#BBBBBB';\n  bubbleDefaultBorder = \"#494444\";\n  bubbleDefaultColor = \"#d56620\";\n  bubbleHighlightBorder = \"#fff\";\n  shapeHighlightBorder = '#fff';\n}\n\nif (project == 'trade-in-raw-materials') {\n  landmass = '#BBBBBB';\n  landmassNA = '#BBBBBB';\n}\n\nif (project == 'itf-test') {\n  landmass = '#BBBBBB';\n  landmassNA = '#BBBBBB';\n}\n\nfunction getColorCountryShapesStyleGeneric(layerData) {\n  //public\n  return function (feature) {\n\n    if (feature && feature.properties && layerData['values'][feature.properties[mapCode]] != null) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: getIndicatorColorScale(layerData['values'][feature.properties[mapCode]][1], layerData['min'], layerData['max'], feature, layerData['colors']) || landmassNA,\n        className: \"hasValue\"\n      };\n    } else if (feature && feature.properties && $.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: landmassNA,\n        className: \"hasValue\"\n      };\n    } else if (feature && feature.properties && $.inArray(feature.properties[mapCode].toString().toLowerCase(), [\"aut\", \"bel\", \"cyp\", \"deu\", \"esp\", \"est\", \"fin\", \"fra\", \"grc\", \"hrv\", \"irl\", \"ita\", \"ltu\", \"lux\", \"lva\", \"mlt\", \"nld\", \"prt\", \"svk\", \"svn\"]) > -1) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: '#004996',\n        className: \"hasValue\"\n      };\n    } else if (feature && feature.properties && feature.properties[mapCode]) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: landmass,\n        className: \"hasValue\"\n      };\n    } else {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: landmassGroup,\n        className: \"hasValue\"\n      };\n    }\n\n  };\n\n}\n\n\nfunction bubblesSimpleGeneric (Data) {\n  return function (feature, latlng) {\n    //public\n    return L.circleMarker(latlng, getBubbleStyleGeneric(feature, Data));\n  };\n}\n\nfunction bubblesSimpleColorGeneric (colorData) {\n  return function (feature, latlng) {\n    //public\n    return L.circleMarker(latlng, getBubbleColorGeneric(feature,colorData));\n  };\n}\n\nfunction bubblesSizeColorGeneric (sizeData,colorData) {\n  return function (feature, latlng) {\n    //public\n    return L.circleMarker(latlng, getBubbleSizeColorGeneric(feature,sizeData,colorData));\n  };\n}\n\n\n\nfunction getBubbleStyleGeneric(feature, layerData) {\n  //private\n    var bubbleColor;\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1 && layerData['values'][feature.properties[mapCode]] != null) {\n        bubbleColor = bubbleDefaultColor;\n      if (layerData['values'][feature.properties[mapCode]] != null) {\n        var radius = getBubbleSize(layerData['values'][feature.properties[mapCode]][1], layerData['max'], feature);\n        if (radius != null) {\n          return {\n            radius: radius,\n            fillColor: bubbleColor,\n            color: bubbleDefaultBorder,\n            weight: 1,\n            opacity: 1,\n            fillOpacity: 1\n          };\n        }\n      }\n    }\n    return {\n      radius: 0,\n      opacity: 0\n    };\n}\n\n\nfunction getBubbleSizeColorGeneric(feature,sizeData,colorData) {\n  //private\n    var bubbleColor;\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1 && sizeData['values'][feature.properties[mapCode]] != null) {\n      radius = getBubbleSize(sizeData['values'][feature.properties[mapCode]][1], sizeData['max'], feature);\n      if (colorData != null) {\n        if (colorData['values'][feature.properties[mapCode]] != null) {\n          var bubbleColor = getIndicatorColorScale(colorData['values'][feature.properties[mapCode]][1], colorData['min'], colorData['max'],feature, colorData['colors']);\n          if (radius != null) {\n            return {\n              radius: radius,\n              fillColor: bubbleColor,\n              color: bubbleDefaultBorder,\n              weight: 1,\n              opacity: 1,\n              fillOpacity: 1\n            };\n          }\n        }\n      } else {\n        if (radius != null) {\n          return {\n            radius: radius,\n            fillColor: bubbleDefaultBorder,\n            color: bubbleDefaultBorder,\n            weight: 1,\n            opacity: 1,\n            fillOpacity: 1\n          };\n        }\n      }\n    }\n    return {\n      radius: 0,\n      opacity: 0\n    };\n}\n\nfunction getBubbleColorGeneric(feature,colorData) {\n  //private\n    var bubbleColor;\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n        radius = 5;\n      if (colorData['values'][feature.properties[mapCode]] != null) {\n        var bubbleColor = getIndicatorColorScale(colorData['values'][feature.properties[mapCode]][1], colorData['min'], colorData['max'],feature, colorData['colors']);\n        if (radius != null) {\n          return {\n            radius: radius,\n            fillColor: bubbleColor,\n            color: bubbleDefaultBorder,\n            weight: 1,\n            opacity: 1,\n            fillOpacity: 1\n          };\n        }\n      }\n    }\n    return {\n      radius: 0,\n      opacity: 0\n    };\n}\n\n\nfunction getBasicCountryShapesStyle(feature) {\n  //private\n  function getBasicGroupColor(feature) {\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n      return landmassGroup;\n    } else {\n      return landmass;\n    }\n  }\n  return {\n    weight: landmassBorderWidth,\n    opacity: 1,\n    color: landmassBorder,\n    fillOpacity: 1,\n    fillColor: getBasicGroupColor(feature)\n  };\n}\n\n\n\n\n\n","function highlightAndPopup(feature, layer) {\n  if (!(feature && feature.properties && feature.properties[mapCode])) return;\n  // public\n  var interaction;\n  if (window.flowStatus == \"flow\") {\n    // see module getFlows\n    interaction = clickFlow;\n  } else {\n    interaction = highlightAndPopupClick;\n  }\n  var inEuroArea =\n    feature &&\n    feature.properties &&\n    $.inArray(feature.properties[mapCode].toString().toLowerCase(), [\n      \"aut\",\n      \"bel\",\n      \"cyp\",\n      \"deu\",\n      \"esp\",\n      \"est\",\n      \"fin\",\n      \"fra\",\n      \"grc\",\n      \"hrv\",\n      \"irl\",\n      \"ita\",\n      \"ltu\",\n      \"lux\",\n      \"lva\",\n      \"mlt\",\n      \"nld\",\n      \"prt\",\n      \"svk\",\n      \"svn\",\n    ]) > -1;\n  if (\n    (themeURL == \"ecb\" && !inEuroArea) ||\n    $.inArray(\n      layer.feature.properties[mapCode].toString().toLowerCase(),\n      MapGroup\n    ) > -1\n  ) {\n    layer.on({\n      click: interaction,\n\n      mouseover: function () {\n        if (!layer.inFront) {\n          layer.inFront = true;\n          layer\n            .setStyle({\n              fillOpacity: 0.8,\n              weight: 2,\n              color:\n                bubbleMap != null\n                  ? bubbleHighlightBorder\n                  : shapeHighlightBorder,\n            })\n            .bringToFront();\n        }\n      },\n      mouseout: function () {\n        layer.inFront = false;\n        layer.setStyle({\n          fillOpacity: 1,\n          weight: landmassBorderWidth,\n          color: bubbleMap != null ? bubbleDefaultBorder : landmassBorder,\n        });\n        if (typeof disputedLines !== \"undefined\") {\n          disputedLines.bringToFront();\n        }\n        if (typeof flowGroup !== \"undefined\") {\n          flowGroup.eachLayer(function (layer) {\n            if (layer.bringToFront) {\n              layer.bringToFront();\n            } else {\n              layer.eachLayer(function (sublayer) {\n                sublayer.bringToFront();\n              });\n            }\n          });\n        }\n      },\n    });\n    // make layers clickable\n    if (layer.eachLayer) {\n      layer.eachLayer(function (sublayer) {\n        L.Util.setOptions(sublayer, { clickable: true });\n      });\n    } else {\n      L.Util.setOptions(layer, { clickable: true });\n    }\n  }\n}\n\n// show popup on map while closing previous popup\n// disposes mobx autorun function before creating new popup\nvar highlightAndPopupClick = (function (disposer) {\n  return function highlightAndPopupClick(e) {\n    // private\n    var layer = e.target;\n\n    if (disposer) {\n      console.log(\"dispose click layer\");\n      disposer();\n    }\n    disposer = mobx.autorun(\n      function () {\n        console.log(\"click layer\", !!popup._map);\n        var specialTooltip =\n          window.wizardConfig.tabs[wizardConfig.project.tabs[page]]\n            .specialTooltip;\n        var specialTooltipLinks =\n          window.wizardConfig.tabs[wizardConfig.project.tabs[page]]\n            .specialTooltipLinks;\n        var teaserText;\n        if (specialTooltip == \"export-restrictions-main\") {\n          teaserText = mapTeaserExportRestrictionsMain(\n            layer.feature.properties[mapCode]\n          );\n        } else if (specialTooltip == \"export-restrictions\") {\n          teaserText = mapTeaserExportRestrictions(\n            layer.feature.properties[mapCode]\n          );\n        } else if (specialTooltip == \"ifi-country-data\") {\n          teaserText = mapTeaserIfiCountryData(\n            layer.feature.properties[mapCode],\n            specialTooltipLinks\n          );\n        } else if (window.bubbleMap == \"multiColored\") {\n          teaserText = mapTeaserTextMulti(layer.feature.properties[mapCode]);\n        } else {\n          teaserText = mapTeaserText(layer.feature.properties[mapCode]);\n        }\n        if (\n          themeURL == \"ecb\" ||\n          $.inArray(\n            layer.feature.properties[mapCode].toString().toLowerCase(),\n            MapGroup\n          ) > -1\n        ) {\n          popup.setContent(teaserText);\n        }\n      },\n      { name: \"map.click\" }\n    );\n\n    if (\n      themeURL == \"ecb\" ||\n      $.inArray(\n        layer.feature.properties[mapCode].toString().toLowerCase(),\n        MapGroup\n      ) > -1\n    ) {\n      popup.setLatLng(e.latlng);\n      popup.openOn(mapdataviz);\n    }\n  };\n})();\n","var colorIdx = 0,\n    flowGroup = L.layerGroup(),\n    activeLayer = \"\";\nfunction clickFlow(e) {\n  //private\n  var layer = e.target;\n  var layerCode = layer.feature.properties[mapCode];\n  var color = ['blue', 'blue', 'blue'];\n\n  clearFlows();   \n\n  if (activeLayer != layerCode && $.inArray(layerCode.toLowerCase(), MapGroup) > -1) {\n    addLines(\n      {\n        center: layerCode,\n        stars: getFlows(layerCode)\n      },\n      color[colorIdx],\n      centroides,\n      mapdataviz\n    );\n    colorIdx = (colorIdx + 1) % 3;\n    activeLayer = layerCode;\n    updateFlowLegend (layerCode);\n\n  } else {\n    activeLayer = \"\";\n  }\n}\n\n\nfunction clearFlows () {\n  flowGroup.clearLayers().addTo(mapdataviz);  \n}\n\n\n\nfunction getFlows(country) {\n  var data = window.DataforFlow;\n  var idxCountry = data.keys[0].indexOf(country.toUpperCase());\n  var newData = {};\n  var max = 0;\n  $.each(data.keys[1], function (key, value) {\n    var crData = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n    if (max < crData) {\n      max = crData;\n    }\n  });\n  $.each(data.keys[1], function (key, value) {\n    var crData1 = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n    if (crData1 / max > 0.01) {\n      newData[value] = getLineSize(crData1, window.maxBubble);\n    } else {\n      newData[value] = 0;\n    }\n  });\n\n  function getLineSize(d, max) {\n  //private\n    if (d == null || d <= 0) return null;\n    var width = (Math.sqrt(d / max) * 25);\n    return width;\n  }\n\n  return newData;\n\n}\n\n\nfunction clearFlowLegend () {\n  $('#flowLayer .helptext').show();\n  $('#flowLayer #detailsTable').hide();\n  $('#flowLayer .countryPrefix').text('');\n  $('#flowLayer .country').html('');\n}\n\n\n\nfunction updateFlowLegend (layerCode) {\n\n  var flowLabels = {\n    'tableHead1' : {\n      'en':'Main export destinations',\n      'cn':'主要出口目的地'\n    },\n    'tableHead2' : {\n      'en':'USD Millions',\n      'cn':'百万美元'\n    },\n    'world' : {\n      'en':'World',\n      'cn':'世界'\n    },\n    'unspecified' : {\n      'en':'unspecified',\n      'cn':'未标明'\n    },\n    'asia' : {\n      'en':'Asia n.e.s.',\n      'cn':'亚洲n.e.s.'\n    },\n    'headlinePrefix' : {\n      'en':'Exports from ',\n      'cn':'从'\n    },\n    'headlineSuffix' : {\n      'en':'',\n      'cn':'的出口'\n    },\n  }\n\n  if (window.lang_countries[layerCode.toLowerCase()] != null) {\n    $('#flowLayer .country').html(window.lang_countries[layerCode.toLowerCase()]);\n  } else {\n    $('#flowLayer .country').html(layerCode);\n  }\n  $('#flowLayer #countryPrefix').text(flowLabels.headlinePrefix[lang]);\n  $('#flowLayer #countrySuffix').text(flowLabels.headlineSuffix[lang]);\n  $('#flowLayer .helptext').hide();\n  $('#flowLayer #detailsTable').show();\n  $('#flowLayer #detailsTable thead .countries').text(flowLabels.tableHead1[lang]);\n  $('#flowLayer #detailsTable thead .values').text(flowLabels.tableHead2[lang]);\n  $('#flowLayer #detailsTable tbody').remove();\n  $('#flowLayer #detailsTable').append('<tbody>');\n  var legendData = getFlowsLegend(layerCode);\n  $.each(legendData['rank'], function (key, value) {\n    if (window.lang_countries[legendData['values'][value].toLowerCase()] != null) {\n      country = window.lang_countries[legendData['values'][value].toLowerCase()];\n    } else if (legendData['values'][value] == 'WLD') {\n      country = flowLabels.world[lang];\n    } else if (legendData['values'][value] == 'UNSPE') {\n      country = flowLabels.unspecified[lang];\n    } else if (legendData['values'][value] == 'XCD') {\n      country = flowLabels.asia[lang];\n    } else {\n      country = legendData['values'][value];\n    }\n    $('#flowLayer #detailsTable tbody').append('<tr><td>'+country+'</td><td  class=\"tableValues\">'+Math.round(value/1000000)+'</td>');\n  });\n  \n  function getFlowsLegend(country) {\n    var data = window.DataforFlow;\n    var idxCountry = data.keys[0].indexOf(country.toUpperCase());\n    var newData = {};\n    newData['rank'] = [];\n    newData['values'] = {};\n    var max = 0;\n    $.each(data.keys[1], function (key, value) {\n      var crData = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n      if (max < crData) {\n        max = crData;\n      }\n    });\n    $.each(data.keys[1], function (key, value) {\n      var crData1 = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n      if (crData1 / max > 0.01) {\n        newData['values'][crData1]=value;\n        newData['rank'].push(crData1);\n      }\n    });\n    newData['rank'].sort(function(a, b){return b-a});\n    return newData;\n  }\n}\n\nfunction addLines(flow, color, centros, mapdataviz) {\n  var stars = {};\n  $.each(flow.stars, function (country, value) {\n    if (centros[country.toUpperCase()] != undefined) {\n      stars[country] = {};\n      stars[country]['latlong'] = [parseFloat(centros[country.toUpperCase()].Lat), parseFloat(centros[country.toUpperCase()].Long)];\n      stars[country]['value'] = value\n    }\n  });\n  var center = [parseFloat(centros[flow.center.toUpperCase()].Lat), parseFloat(centros[flow.center.toUpperCase()].Long)];\n  $.each(stars, function (country, values) {\n    var lines = L.polyline([center, values.latlong], {\n      color: color,\n      weight: values.value,\n      fill: 'blue'\n    });\n    flowGroup.addLayer(lines);\n    //flowGroup.addLayer(L.polylineDecorator(lines, {\n    //  patterns: [{\n    //    offset: '100%',\n    //    repeat: 0,\n    //    symbol: L.Symbol.arrowHead({\n    //      pixelSize: values.value*3,\n    //      polygon: false,\n    //      pathOptions: {stroke: true, weight: values.value}\n    //    })\n    //  }]\n    //}));\n  });\n}\n\n/*\n function addRectangle(flow,centros,mapdataviz) {\n var stars = {};\n $.each(flow.stars, function (country,value) {\n stars[country] = {};\n stars[country]['latlong'] = [parseFloat(centros[country.toUpperCase()].Lat),parseFloat(centros[country.toUpperCase()].Long)];\n stars[country]['value'] = value\n });\n $.each(stars, function (country, values) {\n L.rectangle([[values.latlong[0],values.latlong[1]],[values.latlong[0]+values.value,values.latlong[1]+0.75]], {\n fillOpacity : 1,\n color: \"blue\",\n weight: 1\n }).addTo(mapdataviz);\n L.rectangle([[values.latlong[0],values.latlong[1]-0.75],[values.latlong[0]+1,values.latlong[1]]], {\n fillOpacity : 1,\n color: \"red\",\n weight: 1\n }).addTo(mapdataviz);\n });\n }\n */\n\n","\nfunction updateFlowData (indicator) {\n  $.ajax({\n    dataType: \"json\",\n    url: baseURL+\"/api-data?project=\"+project+\"&id=\"+indicator,\n    success: ajaxSuccess,\n    error: function (xhr, ajaxOptions, thrownError) {\n      if (xhr.status == '404') {\n        alert ('No data available.')};\n    }\n  });\n  \n  function ajaxSuccess(data) {\n    if (data != null) {\n      window.DataforFlow=data;\n    } else {\n      alert('No data available.');\n    }\n  }\n\n}\n\n","function mapTeaserText(country) {\n  // private\n\n  var euGroup = [ 'aut', 'bel', 'bgr', 'cyp', 'deu', 'dnk', 'esp', 'fin',\n                  'fra', 'gbr', 'grc', 'hrv', 'irl', 'ita', 'lux', 'lva',\n                  'ltu', 'mlt', 'nld', 'prt', 'swe', 'cze', 'est', 'hun',\n                  'pol', 'svk', 'svn', 'rou'];\n\n  var teaser = $('<div>');\n  var teaserTitle = $('<h3 class=\"tooltipTitle\">');\n  var teaserTable = $('<table class=\"tooltipTable\">');\n  teaser.append(teaserTitle);\n\n  var countryProfile = $('<div class=\"countryProfilLink\">')\n    .append($('<span id=\"countryProfileMap\">')\n              .attr('value', country)\n              .html(lang_labels.countryProfile));\n  if (typeof wizardConfig !== 'undefined' && wizardConfig.tabs[wizardConfig.project.tabs[page]].countrynotes == 'withEU' && $.inArray(country.toString().toLowerCase(), euGroup) > -1) {\n    countryProfile.append('<span value=\"eu\" id=\"euProfileMap\">view EU profile</span>');\n  }\n  teaser.append(countryProfile);\n\n  var countryName = lang_countries[country.toString().toLowerCase()] || ISO3toFlags[country] || country;\n  teaserTitle.text(countryName);\n\n  var tableLineCanvas;\n  var tooltipData;\n  var dataValue;\n  var hasData = false;\n\n  for (var i = 0; i < ChartsWithData; i++) {\n    if (DataforMap[i] != null) {\n      tableLineCanvas = $('<tr>')\n        .append($('<td>')\n                  .attr('title', $('<div>').html(DataforMap[i]['definition']).text())\n                  .html(DataforMap[i]['title']));\n\n      tooltipData = $('<td class=\"tooltipData\">');\n      tableLineCanvas.append(tooltipData);\n\n      if (DataforMap[i]['values'][country] != undefined && DataforMap[i]['values'][country][1] != null) {\n        hasData = true;\n        dataValue = getHumanReadData(DataforMap[i]['values'][country][1], DataforMap[i]['options']['tooltipDecimals']) + '&nbsp;' + DataforMap[i]['options']['tooltipUnit'];\n        if (DataforMap[i]['values'][country][0] != DataforMap[i]['latestYear']) {\n          dataValue += '&nbsp;(' + DataforMap[i]['values'][country][0] + ')';\n        }\n        tooltipData.html(dataValue);\n      } else {\n        tooltipData.text('\\u2014'); // EM DASH\n      }\n      teaserTable.append(tableLineCanvas);\n    }\n  }\n\n  if (hasData || themeURL != 'ecb') {\n    teaserTitle.after(teaserTable);\n  }\n\n  // return first DOM element in jQuery object\n  return teaser[0];\n}\n","\n\nfunction mapTeaserTextMulti(country) {\n  //private\n\n  var euGroup = [ 'aut', 'bel', 'bgr', 'cyp', 'deu', 'dnk', 'esp', 'fin',\n                  'fra', 'gbr', 'grc', 'hrv', 'irl', 'ita', 'lux', 'lva',\n                  'ltu', 'mlt', 'nld', 'prt', 'swe', 'cze', 'est', 'hun',\n                  'pol', 'svk', 'svn', 'rou'];\n\n  var teaserTitleStart = '<h3 class=\"tooltipTitle\">';\n  var teaserTitleEnd = '</h3>';\n  var teaserTableStart = '<table class=\"tooltipTable\">';\n  var teaserTableLineCenter = '</td><td  class=\"tooltipData\">';\n  var teaserTableEnd = '</td></tr></table>';\n\n  if (typeof wizardConfig !== 'undefined' && wizardConfig.tabs[wizardConfig.project.tabs[page]].countrynotes == 'withEU' && $.inArray(country.toString().toLowerCase(), euGroup) > -1) {\n    var countryProfile = \"<div class='countryProfilLink'>\"+\n            \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n            \"\"+\n            \"<span value='eu' id='euProfileMap' >view EU profile</span>\"+\n            \"</div>\";\n  } else {\n    var countryProfile = \"<div class='countryProfilLink'>\"+\n            \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n            \"</div>\";\n  }\n\n\n  if (lang_countries[country.toString().toLowerCase()] != null) {\n    var countryName = lang_countries[country.toString().toLowerCase()]+' - '+DataforMap[mapLayerIndex]['title'];\n  } else {\n    var countryName = country+' - '+DataforMap[mapLayerIndex]['title'];\n  }\n\n  var tableLines;\n  var tableLine = [];\n\n  tableLine[0] =  \"<tr>\"+\n                    \"<td>\"+DataforMap[mapLayerIndex]['options']['tooltipUnit']+\"</td>\"+\n                    \"<td class='tooltipData'>\"+getHumanReadData(DataforMap[mapLayerIndex]['values'][country][1])+\"</td>\"+\n                  \"</tr>\";\n\n  if (DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]) {\n    tableLine[1] =  \"<tr>\"+\n                      \"<td>\"+DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['options']['tooltipUnit']+\"</td>\"+\n                      \"<td class='tooltipData'>\"+getHumanReadData(DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['values'][country][1])+\"</td>\"+\n                    \"</tr>\";\n  } else {\n    tableLine[1] = \"<tr><td></td><td></td></tr>\";\n  }\n\n  tableLines = tableLine[0]+tableLine[1];\n\n  return '' +\n    teaserTitleStart +\n    countryName +\n    teaserTitleEnd +\n    teaserTableStart +\n    tableLines +\n    teaserTableEnd +\n    countryProfile + '';\n}\n\n\n","\nfunction mapTeaserExportRestrictions(country) {\n\n//global vars\n//  lang_labels\n//  DataforMap\n//  lang\n\n  var labels2 = {};\n\n  labels2['en'] = {\n\t\t1:'export prohibition',\n\t\t2:'export quota',\n\t\t3:'export tax',\n\t\t4:'non-automatic licencing',\n\t\t5:'other measures',\n\t\t6:'no restrictions',\n    undefined:'not reseached'\n\t};\n\n  labels2['cn'] = {\n    1:'禁止出口',\n    2:'出口配额',\n    3:'出口税',\n    4:'非自动许可',\n    5:'其他措施',\n    6:'无限制',\n    undefined:'没有研究'\n  };\n\n  var teaserTitleStart = '<h3 class=\"tooltipTitle\">';\n  var teaserTitleEnd = '</h3>';\n  var teaserTableStart = '<table class=\"tooltipTable\">';\n  var teaserTableLineCenter = '</td><td  class=\"tooltipData\">';\n  var teaserTableEnd = '</td></tr></table>';\n\n  var countryProfile = \"<div class='countryProfilLink'>\"+\n          \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n          \"</div>\";\n\n  var countryName = lang_countries[country.toLowerCase()]+' - '+DataforMap[mapLayerIndex]['title'];\n\n  var tableLines;\n  var tableLine = [];\n\n  if (DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]) {\n    tableLine[0] =  \"<tr>\"+\n                      \"<td>\"+DataforMap[mapLayerIndex]['options']['tooltipUnit']+\":</td>\"+\n                      \"<td class='tooltipData'>\"+getHumanReadData(DataforMap[mapLayerIndex]['values'][country][1])+\" \"+DataforMap[mapLayerIndex]['unit']+\"</td>\"+\n                    \"</tr>\";\n    tableLine[1] =  \"<tr>\"+\n                      \"<td>\"+DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['options']['tooltipUnit']+\":</td>\"+\n                      \"<td class='tooltipData'>\"+labels2[lang][DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['values'][country][1]]+\"</td>\"+\n                    \"</tr>\";\n  } else {\n    tableLine[0] =  \"<tr>\"+\n                      \"<td>\"+DataforMap[mapLayerIndex]['options']['tooltipUnit']+\":</td>\"+\n                      \"<td class='tooltipData'>\"+labels2[lang][DataforMap[mapLayerIndex]['values'][country][1]]+\"</td>\"+\n                    \"</tr>\";\n    tableLine[1] = \"<tr><td></td><td></td></tr>\";\n  }\n\n  tableLines = tableLine[0]+tableLine[1];\n\n  return '' +\n    teaserTitleStart +\n    countryName +\n    teaserTitleEnd +\n    teaserTableStart +\n    tableLines +\n    teaserTableEnd +\n    countryProfile + '';\n}\n\n\n","\nfunction mapTeaserExportRestrictionsMain(country) {\n\n  var labels2 = {};\n\n  labels2['en'] = {\n\t\t1:'export prohibition',\n\t\t2:'export quota',\n\t\t3:'export tax',\n\t\t4:'non-automatic licencing',\n\t\t5:'other measures',\n\t\t6:'no restrictions',\n    undefined:'not reseached'\n\t};\n\n  labels2['cn'] = {\n    1:'禁止出口',\n    2:'出口配额',\n    3:'出口税',\n    4:'非自动许可',\n    5:'其他措施',\n    6:'无限制',\n    undefined:'没有研究'\n  };\n\n  var teaserTitleStart = '<h3 class=\"tooltipTitle\">';\n  var teaserTitleEnd = '</h3>';\n  var teaserTableStart = '<table class=\"tooltipTable\">';\n  var teaserTableLineCenter = '</td><td  class=\"tooltipData\">';\n  var teaserTableEnd = '</td></tr></table>';\n\n  var countryProfile = \"<div class='countryProfilLink'>\"+\n          \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n          \"</div>\";\n\n  var countryName = lang_countries[country.toLowerCase()];\n\n  var tableLineCanvas = [];\n  var tooltipData = [];\n  var tableLines;\n\n  tableLineCanvas[0] = \"<tr><td title='\" + DataforMap[0]['definition'] + \"'>\" + DataforMap[0]['title'] + \":</td><td class='tooltipData'>\";\n  tooltipData[0] = labels2[lang][DataforMap[0]['values'][country][1]];\n  tableLines = tableLineCanvas[0]+tooltipData[0];\n\n  return '' +\n    teaserTitleStart +\n    countryName +\n    teaserTitleEnd +\n    teaserTableStart +\n    tableLines +\n    teaserTableEnd +\n    countryProfile + '';\n}\n\n\n","function mapTeaserIfiCountryData(country, links) {\n  // private\n\n  var teaser = $('<div>');\n  var teaserTitle = $('<h3 class=\"tooltipTitle\">');\n  var teaserTable = $('<table class=\"tooltipTable\">');\n  teaser.append(teaserTitle);\n\n  var link = links[country.toString().toLowerCase()];\n  if (link != null) {\n    var countryProfile = $('<div style=\"text-align: center;\">')\n      .append($('<a target=\"_blank\">')\n                .attr('href', link)\n                .text(lang_labels.countryProfile));\n    teaser.append(countryProfile);\n  }\n\n  var countryName = lang_countries[country.toString().toLowerCase()] || country;\n  teaserTitle.text(countryName);\n\n  var tableLineCanvas;\n  var tooltipData;\n  var dataValue;\n  var hasData = false;\n  var unit;\n\n  for (var i = 0; i < ChartsWithData; i++) {\n    if (DataforMap[i] != null) {\n      tableLineCanvas = $('<tr>')\n        .append($('<td>')\n                  .attr('title', $('<div>').html(DataforMap[i]['definition']).text())\n                  .html(DataforMap[i]['title']));\n\n      tooltipData = $('<td class=\"tooltipData\">');\n      tableLineCanvas.append(tooltipData);\n\n      if (DataforMap[i]['values'][country] != undefined && DataforMap[i]['values'][country][1] != null) {\n        hasData = true;\n        dataValue = getHumanReadData(DataforMap[i]['values'][country][1], DataforMap[i]['options']['tooltipDecimals']);\n        unit = DataforMap[i]['options']['tooltipUnit'] || '';\n        if (unit !== '') {\n          dataValue += '&nbsp;' + unit;\n        }\n        if (DataforMap[i]['values'][country][0] != DataforMap[i]['latestYear']) {\n          dataValue += '&nbsp;(' + DataforMap[i]['values'][country][0] + ')';\n        }\n        tooltipData.html(dataValue);\n      } else {\n        tooltipData.text('\\u2014'); // EM DASH\n      }\n      teaserTable.append(tableLineCanvas);\n    }\n  }\n\n  teaserTitle.after(teaserTable);\n\n  // return first DOM element in jQuery object\n  return teaser[0];\n}\n","\nvar topLarge = 80;\nvar heightSmall = 85\n\nif ($(window).width() > 475){\n  topLarge = 92;\n  heightSmall = 85\n} if ($(window).width() > 650){\n  topLarge = 100;\n  heightSmall = 70\n}\n\nfunction largeContainer() {\n  $(\"#topContainer\").css({\"height\": \"auto\"});\n  $(\"#topContainer\").css({'top': topLarge+\"px\"});\n  $(\"#itemContainer\").fadeIn();\n  $(\"#item1Container\").fadeOut();\n  $(\"#item2Container\").fadeOut();\n  $(\"#mapLegendContainer\").fadeOut();\n  $(\".map-legend\").css({\"padding-top\": \"30px\"});\n  mapdataviz.closePopup();\n}\n\nfunction largeContainerPDF() {\n  $(\"#itemContainer\").fadeIn();\n}\n\n\nfunction smallContainer() {\n  $(\"#topContainer\").animate({height: heightSmall+\"px\"});\n  $(\"#topContainer\").css({\"top\": \"auto\"});\n  $(\"#itemContainer\").fadeOut();\n  $(\"#item1Container\").fadeIn();\n  $(\"#item2Container\").fadeOut();\n  $(\"#mapLegendContainer\").fadeIn();\n  $(\".map-legend\").css({\"padding-top\": \"0px\"});\n}\n\nfunction startContainer() {\n  $(\"#topContainer\").css({\"height\": \"auto\"});\n  $(\"#topContainer\").css({'top': topLarge+\"px\"});\n  $(\"#itemContainer\").fadeOut();\n  $(\"#item1Container\").fadeOut();\n  $(\"#item2Container\").fadeIn();\n  $(\"#mapLegendContainer\").fadeOut();\n  $(\".map-legend\").css({\"padding-top\": \"30px\"});\n  mapdataviz.closePopup();\n}\n\n\n","\nfunction updateCountryProfile(profileCountry,mode) {\n// update country profile with tabs\n// tabs include different text sections\n// charts can be integrated as additional text sections\n\n  $(\".noteCountryName\").text(lang_countries_titles[profileCountry.toLowerCase()]|| '');\n  $.each( window.subTabs, function(key,value) {\n    $(\"#subTab\"+key).html('');\n  });\n\n  $.ajax({\n    dataType: \"json\",\n    url: baseURL+\"/api-notes?project=\"+project+\"&lg=\"+lang+\"&cr=\"+profileCountry.toLowerCase(),\n    success: ajaxSuccess,\n    error: function (xhr, ajaxOptions, thrownError) {\n      if (xhr.status == '404') {\n        alert ('Country profile not available.')};\n    }\n  });\n\n  function ajaxSuccess(data) {\n    if (data != null) {\n      $.each( window.subTabs, function(subTab,subTabVal) {\n        $.each(subTabVal.content[window.lang], function(section,val) {\n          $(\"#subTab\"+subTab).append('<div id=\"sec'+subTab+'-'+section+'\" class=\"section\"><div class=\"headingElement\"><h4><span class=\"subHeadingText\">');\n          $('#sec'+subTab+'-'+section+' .headingElement h4 .subHeadingText').html(val);\n          var subSection = 0;\n          if (data[val] != undefined) {\n            $.each( data[val], function(key,content) {\n              if (key == 'h1 text') {\n                $.each(content,function(element,parts){\n                  $('#sec'+subTab+'-'+section).append('<p id=\"textSec'+subTab+'-'+section+'-'+element+'\" class=\"textElement\">');\n                  $('#textSec'+subTab+'-'+section+'-'+element).html(parts);\n                });\n              }\n              if (subTabVal.charts != undefined){\n                addChartSections (subTabVal,subTab,section,profileCountry,val,'chartSectionMain');\n              }\n\n              if (key != 'h1 text') {\n                $('#sec'+subTab+'-'+section).append('<h5 id=\"headerSec'+subTab+'-'+section+'-'+subSection+'\" class=\"subSection\"><table><tr><td>');\n                $('#headerSec'+subTab+'-'+section+'-'+subSection+' table tr td').html(key);\n                var subSubSection = 0;\n                $.each( content, function(subkey,subcontent) {\n                  if (subkey == 'h2 text') {\n                    $.each(subcontent, function(key,content) {\n                      $('#sec'+subTab+'-'+section).append('<p id=\"textSec'+subTab+'-'+section+'-'+subSection+'-'+key+'\" class=\"textElement\">');\n                      if (subTabVal.display != null && subTabVal.display == 'expanded') {\n                        $('#textSec'+subTab+'-'+section+'-'+subSection+'-'+key).html(content);\n                      } else {\n                        $('#textSec'+subTab+'-'+section+'-'+subSection+'-'+key).html(content).hide();\n                      }\n                    });\n                    if (subTabVal.charts != undefined) {\n                      if (subTabVal.display != null && subTabVal.display == 'expanded') {\n                        addChartSections (subTabVal,subTab,section,profileCountry,key,'chartSectionMain');\n                      } else {\n                        addChartSections (subTabVal,subTab,section,profileCountry,key,'chartSection');\n                      }\n                    }\n                  } else {\n                    $.each(subcontent, function(key,content) {\n                      $('#sec'+subTab+'-'+section).append('<h6 id=\"headerSec'+subTab+'-'+section+'-'+subSection+'-'+subSubSection+'\" class=\"subSection\">');\n                      $('#headerSec'+subTab+'-'+section+'-'+subSection+'-'+subSubSection).text(subkey).hide();\n                      $('#sec'+subTab+'-'+section).append('<p id=\"textSec'+subTab+'-'+section+'-'+subSection+'-'+subSubSection+'-'+key+'\" class=\"textElement\">');\n                      $('#textSec'+subTab+'-'+section+'-'+subSection+'-'+subSubSection+'-'+key).html(content).hide();\n                    });\n                  }\n                  subSubSection++;\n                });\n              }\n              subSection++;\n            });\n        }\n        });\n        if (subTabVal.display == null) {\n          $(\"#subTab\"+subTab+\" .section h5 table tr\").append(expand);\n        }\n      });\n    } else {\n      alert('Country profile is not available.');\n    }\n    $(\".tab a\").attr('target','_blank');\n    $(\".expandCollaps\").append(expandElements);\n    $(\"h5\").click(function() {\n        var parent = this;\n        $(parent).nextUntil(\"h5\",\"p\").slideToggle(500, function(){} );\n        $(parent).nextUntil(\"h5\",\"h6\").slideToggle(500, function(){} );\n        $(parent).nextUntil(\"h5\",\".simpleTable\").toggle();\n        $(parent).nextUntil(\"h5\",\".chartSection\").toggle();\n        $(parent).find(\".expand\").toggle();\n        $(parent).find(\".collaps\").toggle();\n    });\n    if (mode == 'pdf') {\n      largeContainerPDF();\n    } else {\n      largeContainer();\n    }\n  };\n\n  var expand =  '<td class=\"expandCollaps\">'\n  var expandElements = '<span class=\"controls expand expandText\">[expand&nbsp;section]</span><span class=\"controls collaps expandText\">[collapse&nbsp;section]</span>'\n\n  function addChartSections (subTabVal,subTab,section,profileCountry,sectionName,sectionLevel) {\n    $.each(subTabVal.charts, function(chart,config) {\n      var chartHeader = '<div class=\"'+sectionLevel+'\"><div class=\"chartTitle\">'+subTabVal.ConfigSubCharts[chart].title+'</div>'+\n                        '<div class=\"chartSubTitle\">'+subTabVal.ConfigSubCharts[chart].definition+\n                        ', '+subTabVal.ConfigSubCharts[chart].options.tooltipUnit+'</div>'+\n                        '<div style=\"height:200px\" class=\"chartContainer\" id=\"container'+chart+'-'+subTab+'-'+section+'\">';\n      if (config.section[window.lang] == sectionName) {\n        if (config.chartType == 'simpleTable') {\n          $('#sec'+subTab+'-'+section).append(addSimpleTable(subTabVal.ConfigSubCharts[chart],profileCountry,config.legendType));\n        }\n        if (config.chartType == 'lineChart') {\n          values = filterLocation(subTabVal.ConfigSubCharts[chart],[profileCountry.toLowerCase()])\n          if (values.data.data[0] != undefined) {\n            $('#sec'+subTab+'-'+section).append(chartHeader);\n            addLineChart(values,'container'+chart+'-'+subTab+'-'+section);\n          }\n        }\n        if (config.chartType == 'columnChart') {\n          $('#sec'+subTab+'-'+section).append(chartHeader);\n          addColumnChart(filterYear(subTabVal.ConfigSubCharts[chart],[\"2012\"]),'container'+chart+'-'+subTab+'-'+section);\n          highlightDataPoint(profileCountry.toLowerCase(),'blue',0,'#container'+chart+'-'+subTab+'-'+section);\n        }\n      }\n    });\n  }\n\n}\n\n\n","\nfunction updateCountryProfileSimple(profileCountry) {\n// update country profile with tabs\n// tabs include charts or tables only\n\n  $(\".noteCountryName\").text(lang_countries_titles[profileCountry.toLowerCase()]|| '');\n  $.each( window.subTabs, function(key,value) {\n    $(\"#subTab\"+key).html('');\n  });\n\n  addCharts();\n\n  function addCharts() {\n    $.each( window.subTabs, function(subTab,subTabVal) {\n      $.each(subTabVal.content, function(section,val) {\n        $(\"#subTab\"+subTab).append('<div id=\"sec'+subTab+'-'+section+'\" class=\"section\"><div class=\"headingElement\"><h4><span class=\"subHeadingText\">');\n//        $('#sec'+subTab+'-'+section+' .headingElement h4 .subHeadingText').html(val);\n        if (subTabVal.charts != undefined){\n          addChartSections (subTabVal,subTab,section,profileCountry,val,'chartSectionMain');\n        }\n      });\n    });\n    largeContainer();\n  };\n\n  function addChartSections (subTabVal,subTab,section,profileCountry,sectionName,sectionLevel) {\n\n    var complexCharts=[];\n    var complexTable;\n\n    $.each(subTabVal.charts, function(chart,config) {\n      var chartHeader = '<div class=\"'+sectionLevel+'\"><div class=\"chartTitle\">'+subTabVal.ConfigSubCharts[chart].title+'</div>'+\n                        '<div class=\"chartSubTitle\">'+subTabVal.ConfigSubCharts[chart].definition+\n                        ', '+subTabVal.ConfigSubCharts[chart].options.tooltipUnit+'</div>'+\n                        '<div style=\"height:1000px\" class=\"chartContainer\" id=\"container'+chart+'-'+subTab+'-'+section+'\">';\n      if (config.chartType == 'simpleTable') {\n        $('#sec'+subTab+'-'+section).append(addSimpleTable(subTabVal.ConfigSubCharts[chart],profileCountry,config.legendType));\n      }\n      if (config.chartType == 'complexTable') {\n        complexCharts.push(subTabVal.ConfigSubCharts[chart]);\n        complexTable=true;\n      }\n      if (config.chartType == 'sortedBarChart') {\n        values = filterLocation(subTabVal.ConfigSubCharts[chart],[profileCountry.toLowerCase()]);\n        values.data = flipData(values.data);\n        if (values.data.data[0] != undefined) {\n          $('#sec'+subTab+'-'+section).append(chartHeader);\n          addBarChart(values,'container'+chart+'-'+subTab+'-'+section);\n        }\n      }\n    });\n    if (complexTable == true) {\n\n      var complexTableLabel = {\n        'en' : 'Click on column headers to change table sorting. Pass cursor over commodity names and export restriction symbols for detailed definitions and explanations.',\n        'cn' : '点击列标题改变表格排序。在商品名称和出口限制的符号上点击光标查询详细定义和解释。',\n      }\n\n      $('#sec'+subTab+'-'+section).append('<div class=\"helpTextComplexTable\">'+complexTableLabel[lang]+'</div>');\n      $('#sec'+subTab+'-'+section).append(addComplexTable(complexCharts,profileCountry));\n\n      $.tablesorter.formatInt = function(s) {\n        var i = parseInt(s);\n        return (isNaN(i)) ? null : i;\n      };\n      $.tablesorter.formatFloat = function(s) {\n        var i = parseFloat(s);\n        return (isNaN(i)) ? null : i;\n      };\n\n      $(\".complexTable\").tablesorter({\n        sortList: [[0,0]],\n        headers:{\n          1:{sorter:false}\n        },\n        textExtraction: function (node) {\n          var txt = $(node).text();\n          txt = txt.replace('--', ''); // EM DASH\n          txt = txt.replace('*', '');\n          return txt;\n        }\n      });\n\n    }\n  }\n\n}\n\n\n","\n\n//returns a table with title for a map wizard layer\n\n//Dependencies\n//dataHandler/getTableData.js\n\nfunction addSimpleTable (values,country,labels) {\n\tvar tableLabels = {};\n\ttableLabels['fishery-innovation'] = {\n\t\t0:'<span style=\"color:red\">No</span>',\n\t\t1:'<span style=\"color:green\">Yes</span>',\n\t\t2:'<span style=\"color:orange\">at EU level</span>',\n\t\t3:'<span style=\"color:green\">EU & national level</span>',\n\t};\n\ttableLabels['export-restrictions'] = {\n\t\t1:'<span style=\"color:#a80606\">Export prohibition</span>',\n\t\t2:'<span style=\"color:#e70a0d\">Export quota</span>',\n\t\t3:'<span style=\"color:#e78b20\">Export tax</span>',\n\t\t4:'<span style=\"color:#d3e729\">Non-automatic licencing</span>',\n\t\t5:'<span style=\"color:#ca29e7\">Other measures</span>',\n\t\t6:'<span style=\"color:#1ee723\">No restrictions</span>',\n\t};\n\tvar labels1 = {\n\t\t0:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" fill=\"red\" /></svg>',\n\t\t1:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" fill=\"green\" /></svg>',\n\t};\n\tif (labels) {\n\t\tvar selectedLabels = tableLabels[labels];\n\t}\n\n\tvar title = '<h5 class=\"simpleTableTitle\"><table><tr><td>'+values.title+'</table></tr></td></h5>';\n\tvar head = '<table class=\"simpleTable\">';\n\tvar foot = '</table>';\n\tvar rows = '';\n\tvar data = getTableData (values.data)\n\t$.each(data, function(indicator,v){\n\t\tif (v[country.toUpperCase()] != null) {\n\t\t\tif (labels) {\n\t\t\t\trows = rows.concat('<tr><td>'+indicator+'</td><td>'+selectedLabels[v[country.toUpperCase()]]+'</td></tr>')\n\t\t\t} else {\n\t\t\t\trows = rows.concat('<tr><td>'+indicator+'</td><td>'+v[country.toUpperCase()]+values.options.tooltipUnit+'</td></tr>')\n\t\t\t}\n\t\t}\n\t});\n\treturn title+head+rows+foot\n}\n","\n\n//returns a table with title for a map wizard layer\n\n//Dependencies\n//dataHandler/getTableData.js\n\nfunction addComplexTable (values,country) {\n\n  var tab = window.wizardConfig.project.tabs[window.page];\n  var commodityLabels = window.wizardConfig.tabs[tab].labels;\n\n  var purposeCodes = window.wizardConfig.tabs[tab].purposeCodes[country.toUpperCase()];\n\n\tvar labels1 = {\n\t\t1:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle fill=\"#a80606\" cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" /></svg>',\n\t\t2:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle fill=\"#e70a0d\" cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" /></svg>',\n\t\t3:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle fill=\"#e78b20\" cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" /></svg>',\n\t\t4:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle fill=\"#d3e729\" cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" /></svg>',\n\t\t5:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle fill=\"#ca29e7\" cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" /></svg>',\n\t\t6:'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"12\" height=\"12\"><circle fill=\"#1ee723\" cx=\"6\" cy=\"6\" r=\"6\" stroke=\"white\" stroke-width=\"0\" /></svg>',\n\t};\n\n  var labels2 = {};\n\n  labels2['en'] = {\n\t\t1:'Export prohibition',\n\t\t2:'Export quota',\n\t\t3:'Export tax',\n\t\t4:'Non-automatic licencing',\n\t\t5:'Other measures',\n\t\t6:'No restrictions',\n\t};\n\n  labels2['cn'] = {\n      1:'禁止出口',\n      2:'出口配额',\n      3:'出口税',\n      4:'非自动许可',\n      5:'其他措施',\n      6:'无限制',\n  };\n\n  var labels3 = {};\n\n  labels3['en'] = {\n    'A':\t'conservation of natural resources',\n    'B':\t'control of foreign exchange',\n    'C':\t'generate revenue',\n    'D':\t'health or environmental protection',\n    'E':\t'monitor or control export activity',\n    'F':\t'promote further processing/value added',\n    'G':\t'protect local downstream industry',\n    'H':\t'safeguard domestic supply',\n    'I':\t'other',\n    'J':\t'no purpose found/indicated',\n  };\n\n  labels3['cn'] = {\n      'A':\t'自然资源保护',\n      'B':\t'外汇管制',\n      'C':\t'创收',\n      'D':\t'健康或环境保护',\n      'E':\t'出口活动监管',\n      'F':\t'推动进一步处理/增值',\n      'G':\t'保护本地下游产业',\n      'H':\t'保障国内供应',\n      'I':\t'其他',\n      'J':\t'未发现/说明目的',\n  };\n\n  var labels4 = {\n    'en' : 'Commodity',\n    'cn' : '商品',\n  }\n\n  var labels5 = {\n    'en' : 'purpose',\n    'cn' : '目的',\n  }\n\n\n\tvar head = '<table class=\"complexTable tablesorter\"><thead><tr>'+\n              '<th><span>'+labels4[lang]+'<span></th>'+\n              '<th><span>'+values[0].title+'<span></th>'+\n              '<th><span>'+values[1].title+'<span></th>'+\n              '<th><span>'+values[2].title+'<span></th></tr></thead><tbody>';\n\tvar foot = '</tbody></table>';\n\tvar rows = '';\n  var data = [];\n\n  $.each(values, function(chart,content){\n    data[chart]=getTableData (content.data)\n  });\n\t$.each(data[0], function(indicator,v){\n    var comLabel = [];\n    if (commodityLabels.labels[indicator]) {\n      comLabel[0] = commodityLabels.labels[indicator].name;\n      comLabel[1] = commodityLabels.labels[indicator].definition;\n    } else {\n      comLabel[0] = indicator;\n      comLabel[1] = '--';\n    }\n\n    var restrictExplain = labels2[lang][v[country.toUpperCase()]];\n\n    var purpCode;\n    var purpCodeExplain = [];\n    if (purposeCodes[indicator]) {\n      var purpCodeList = purposeCodes[indicator].split(\"\");\n      purpCode = ' ('+purpCodeList+')';\n      $.each(purpCodeList, function(keys,codeValue){\n        purpCodeExplain.push(labels3[lang][codeValue]);\n      });\n      restrictExplain = restrictExplain+' - '+labels5[lang]+': '+purpCodeExplain;\n    } else {\n      purpCode = '';\n    }\n\n    var valRow1;\n    var valRow2;\n    var labelRow1;\n    var labelRow2;\n    if (data[1][indicator]&& data[1][indicator][country.toUpperCase()]) {\n      valRow1 = data[1][indicator][country.toUpperCase()];\n      labelRow1 = valRow1;\n    } else {\n      valRow1 = 0;\n      labelRow1 = '--';\n    }\n    if (data[2][indicator] && data[2][indicator][country.toUpperCase()] ) {\n      valRow2 = data[2][indicator][country.toUpperCase()];\n      labelRow2 = valRow2;\n    } else {\n      valRow2 = 0;\n      labelRow2 = '--';\n    }\n\n\t\tif (v[country.toUpperCase()] != null) {\n\t\t\t\trows = rows.concat('<tr><td title=\"'+comLabel[1]+'\">'+comLabel[0]+'</td>'+\n                            '<td title=\"'+restrictExplain+'\">'+labels1[v[country.toUpperCase()]]+purpCode+'</td>'+\n                            '<td>'+\n                              '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"'+(valRow1+40)+'\" height=\"13\">'+\n                                 '<rect width=\"'+valRow1+'\" height=\"13\" fill=\"#a2b9f0\" y=\"0\" x=\"0\" stroke=\"white\" stroke-width=\"0\" />'+\n                                 '<text text-anchor=\"start\" x=\"'+(valRow1+4)+'\" y=\"11\"  font-family=\"Verdana\" font-size=\"11\" color=\"#636363\">'+labelRow1+'</text>'+\n                               '</svg>'+\n                            '</td>'+\n                            '<td>'+\n                              '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"'+(valRow2+40)+'\" height=\"13\">'+\n                                 '<rect width=\"'+valRow2+'\" height=\"13\" fill=\"#a2b9f0\" y=\"0\" x=\"0\" stroke=\"white\" stroke-width=\"0\" />'+\n                                 '<text text-anchor=\"start\" x=\"'+(valRow2+4)+'\" y=\"11\"  font-family=\"Verdana\" font-size=\"11\" color=\"#636363\">'+labelRow2+'</text>'+\n                               '</svg>'+\n                            '</td>'+\n                           '</tr>'\n                           )\n\t\t}\n\t});\n\treturn head+rows+foot\n}\n","\n\n// class for simple chart\n\n//dependencies\n//highcharts.js\n\n// class for a collection of charts\nfunction ChartElement() {\n    var self = this;\n    var chart ;\n// configure, load and add chart to collection\n    self.loadChart = function(data, options) {\n        var newChart = new chartBasis(data, options);\n        newChart.loadData();\n        chart = newChart;\n    };\n    self.displayCharts = function(container) {\n        chart.displayChart(container)\n    };\n}\n\n\n\nfunction chartBasis(data, options) {\n    var self = this;\n    var loadedData = {};\n    var defaults = {\n        highcharts : {\n            chart : {\n                backgroundColor:'transparent'\n            },\n            plotOptions: {\n                series: {\n                    marker: {\n                        enabled: false,\n                        states: { hover: { enabled: true } }\n                    },\n                    pointPadding: 0,\n                    borderWidth: 0,\n                    connectNulls: true,\n                }\n            },\n            exporting: { enabled: false },\n            legend: { enabled: false },\n            credits: { enabled: false },\n            title : {text: null},\n            xAxis:{\n                labels: {\n                    step: 1,\n                    style : {fontSize: '1em'}\n                    },\n            },\n            yAxis : {\n                title: {text: null },\n            },\n        },\n        CYCoptions : {\n            typeOfFirstSeries: null,\n        }\n    };\n// custom CYC options\n    options = $.extend(true, defaults, options);\n\n    self.loadData = function() {\n        var Data=[];\n        var categories = data.keys[1];\n        $.each(data.keys[0], function(index, name) {\n            var dataPoints =  data.data[index].map(function(y, i) {\n                if (y != null) {\n                    return {y: parseFloat(y.toFixed(options.CYCoptions.decimals)), id: categories[i], name: categories[i]};\n                } else {\n                    return {y: null, id: categories[i]};\n                }\n\n            });\n            Data.push({name: name, data: dataPoints});\n        });\n        if (options.CYCoptions.typeOfFirstSeries != null) {\n            Data[0].type = options.CYCoptions.typeOfFirstSeries;\n        }\n\n        loadedData = {cats: categories, series: Data};\n    };\n\n    self.displayChart = function(container) {\n        var data = loadedData;\n        if (data == null) return false;\n        var seriesOptions = {\n            chart:{ renderTo:container},\n            xAxis:{categories:data.cats},\n            series:data.series\n        };\n        options.highcharts = $.extend(true, options.highcharts, seriesOptions);\n        new Highcharts.Chart(options.highcharts);\n        return true;\n    };\n}\n\n\n","\n\nfunction labelFormat (translatedLables) {\n    return function () {\n//        add flags with ISO codes as short form for countries\n      if (this.value.toUpperCase() in window.ISO3toFlags) {\n        var flag = '<img  style=\"margin-bottom:4px\" height=18px src=\"'+baseURL+'/flags.png?cr='+this.value.toUpperCase()+'\">'\n        return     '<span style=\"margin-right:5px\" >'+translatedLables[this.value.toLowerCase()]+'</span>'+flag;\n      } else {\n        if (translatedLables[this.value.toLowerCase()] != undefined) {\n            return     '<span style=\"margin-right:5px\" >'+translatedLables[this.value.toLowerCase()]+'</span>';\n        } else {\n            return     '<span style=\"margin-right:5px\" >'+this.value.toLowerCase()+'</span>';\n        }\n      }\n    }\n}\n\n\nfunction tooltipFormat (values,translatedLables) {\n    return function () {\n        if (translatedLables[this.x.toLowerCase()] != undefined) {\n            var s = '<b>' + translatedLables[this.x.toLowerCase()] + '</b>';\n        } else {\n            var s = '<b>' + this.x + '</b>';\n        }\n        $.each(this.points, function () {\n            s += '<br/>' + this.series.name + ': ' +\n            this.y+' '+values.options.tooltipUnit;\n        });\n        return s;\n    }\n}\n\n//config functions for simple chart templates\n\n//dependencies\n//simpleChartsCore.js\n\n\nfunction addLineChart(values,container) {\n  Highcharts.setOptions({lang: { numericSymbols: null}});\n  if (values.data.data[0] != undefined) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n  }\n    function loadAndDisplayData() {\n    sbars.loadChart(values.data,{\n      highcharts :{\n        chart: {\n          type: 'line',\n          //marginBottom: 20\n        },\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 10,\n        },\n        plotOptions: {\n          series: {\n          markers: {\n            enabled: false,\n            states: { hover: { enabled: true } }\n          },\n            lineWidth: 2,\n          },\n        },\n        yAxis : {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        xAxis : {\n          reversed: true,\n          tickmarkPlacement: 'on',\n          labels: {\n                    style : {\"font-size\":\"11px\"},\n                    step: null,\n                  },\n        },\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n        colors: [ \"#de3a07\", \"#408000\", \"#dca2bf\", \"#fdd14e\", \"#730000\", \"#ffa640\", \"#234010\", \"#6cc3d9\", \"#4400ff\", \"#f200a2\", \"#750039\", \"#33260d\", \"#00e61f\", \"#0099e6\", \"#1f0073\", \"#962c0b\", \"#734939\", \"#735c00\", \"#00f2a2\", \"#004996\"],\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\nfunction addLineStackedBarChart(values,container) {\n  if (values.data.data[0] != undefined) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n  }\n    function loadAndDisplayData() {\n    sbars.loadChart(values.data,{\n      highcharts :{\n        chart: {\n          type: 'column',\n          //marginBottom: 20\n        },\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n          area:   {stacking: 'normal'},\n          bar:   {stacking: 'normal'},\n          column:   {stacking: 'normal'},\n          series: {\n            markers: {\n              enabled: false,\n              states: { hover: { enabled: true } }\n            },\n            lineWidth: 2,\n          },\n        },\n        yAxis : {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        xAxis : {\n          tickmarkPlacement: 'on',\n          labels: {\n                    style : {\"font-size\":\"11px\"},\n                    step: null,\n                  },\n        },\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n//      colors: ['#bbbbbb','#232323'],\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n        typeOfFirstSeries: values.options.typeOfFirstSeries || 'line',\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\nfunction addStackedAreaChart(values,container) {\n  if (values.data.data[0] != undefined) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n  }\n    function loadAndDisplayData() {\n    sbars.loadChart(values.data,{\n      highcharts :{\n        chart: {\n          type: 'area',\n          //marginBottom: 20\n        },\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n          area:   {stacking: 'normal'},\n          series: {\n            markers: {\n              enabled: false,\n              states: { hover: { enabled: true } }\n            },\n            lineWidth: 2,\n          },\n        },\n        yAxis : {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        xAxis : {\n          tickmarkPlacement: 'on',\n          labels: {\n                    style : {\"font-size\":\"11px\"},\n                    step: null,\n                  },\n        },\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n//      colors: ['#bbbbbb','#232323'],\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\nfunction addBarChart(values,container) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    values.data = sortDimension0(values.data,0,desc=true);\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        chart: {\n          type: 'bar',\n          marginBottom: 10\n        },\n//        legend: { enabled: false },\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n          series: {\n            dataLabels: {\n              enabled: true,\n              overflow: 'none',\n              crop: false,\n              allowOverlap: true,\n            },\n          },\n        },\n        yAxis: {\n          labels: {enabled: false},\n          gridLineWidth: 0,\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        //xAxis: {\n        //  labels: {useHTML: true}\n        //},\n//        colors: ['#88b60f','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\n\nfunction addBarChartFlag(values,container,translatedLabels) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    values.data = sortDimension0(values.data,0,desc=true);\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        chart: {\n          type: 'bar',\n          marginBottom: 10,\n          marginLeft: 150\n        },\n//        legend: { enabled: false },\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n          series: {\n            dataLabels: {\n              enabled: true,\n              overflow: 'none',\n              crop: false,\n              allowOverlap: true,\n            },\n          },\n        },\n        yAxis: {\n          labels: {enabled: false},\n          gridLineWidth: 0,\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        xAxis: {\n          labels: {\n            useHTML: true,\n            formatter: labelFormat(translatedLabels)\n          }\n        },\n//        colors: ['#88b60f','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          formatter: tooltipFormat(values,translatedLabels)\n        },\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\n\nfunction addColumnChart(values,container) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    values.data = sortDimension0(values.data,0,desc=true);\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        chart: { type: 'column'},\n//        legend: { enabled: false },\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n          series: {\n            dataLabels: {\n              enabled: false,\n              overflow: 'none',\n              crop: false,\n              allowOverlap: true,\n            },\n          },\n        },\n        yAxis: {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        colors: ['#88b60f','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\n\nfunction addBarsDiamondsChart(values,container) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    values.data = sortDimension0(values.data,0,desc=true);\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        chart: { type: 'line',marginBottom: 20},\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n          series: {\n            marker: {\n              enabled: true,\n            },\n          lineWidth: 0,\n          states: { hover: {\n                  lineWidth: 0,\n                  lineWidthPlus: 0,\n                }\n          }\n          },\n        },\n        yAxis: {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n//        colors: ['#bbbbbb','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n      },\n      CYCoptions : {\n        typeOfFirstSeries: 'bar',\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\n\n\nfunction addStackedColumnChart(values,container) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        chart: {\n          type: 'column',\n//          marginBottom: 20\n        },\n        legend: {\n          enabled: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n                    bar:   {stacking: 'normal'},\n                    column:   {stacking: 'normal'},\n        },\n        yAxis: {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        xAxis: {\n                labels: {\n                    step: null,\n                    },\n        },\n//        colors: ['#bbbbbb','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\nfunction addStackedBarChart(values,container) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    values.data = sortDimension0sum(values.data,desc=true);\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        chart: {\n          type: 'bar',\n          marginBottom: 20\n        },\n        legend: {\n          enabled: true,\n          reversed: true,\n          verticalAlign: 'top',\n          padding: 0,\n          margin: 5,\n        },\n        plotOptions: {\n                    bar:   {stacking: 'normal'},\n                    column:   {stacking: 'normal'},\n        },\n        yAxis: {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        xAxis: {\n//          opposite: true,\n//          labels : {enabled: false}\n        },\n//        colors: ['#bbbbbb','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\nfunction addPyramidRight(values,container) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        title: {text:'Men'},\n        chart: {\n          type: 'bar',\n//          marginBottom: 10\n        },\n        legend: {\n          enabled: true,\n          reversed: true,\n          verticalAlign: 'bottom',\n          padding: 5,\n          margin: 5,\n        },\n        plotOptions: {\n          bar:   {stacking: 'normal'},\n          column:   {stacking: 'normal'},\n          series: {\n              animation: false\n          }\n        },\n        yAxis: {\n          min: values.options.minimum,\n          max: values.options.maximum,\n        },\n        xAxis: {\n          opposite: true,\n//          labels : {enabled: false}\n        },\n//        colors: ['#bbbbbb','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n\n\nfunction addPyramidLeft(values,container) {\n    var sbars = new ChartElement();\n    loadAndDisplayData();\n    function loadAndDisplayData() {\n    sbars.loadChart(flipData(values.data),{\n      highcharts :{\n        title: {text:'Women'},\n        chart: {\n          type: 'bar',\n        },\n        legend: {\n          enabled: true,\n          reversed: true,\n          verticalAlign: 'bottom',\n          padding: 5,\n          margin: 5,\n        },\n        plotOptions: {\n          bar:   {stacking: 'normal'},\n          column:   {stacking: 'normal'},\n          series: {\n              animation: false\n          }\n        },\n        xAxis: {\n//          reversed: true,\n        },\n        yAxis: {\n          min: values.options.minimum,\n          max: values.options.maximum,\n          reversed: true,\n        },\n//        colors: ['#bbbbbb','#232323'],\n        tooltip: {\n          shared: true,\n          useHTML: true,\n          headerFormat: '<small>{point.key}</small><table>',\n          pointFormat: '<tr><td style=\"color: {series.color}\">{series.name}: </td>' +\n          '<td style=\"text-align: right\"><b>{point.y}'+values.options.tooltipUnit+'</b></td></tr>',\n          footerFormat: '</table>',\n        },\n      },\n      CYCoptions : {\n        decimals: values.options.tooltipDecimals,\n      }\n    });\n        sbars.displayCharts(container);\n    }\n}\n","\n$(document).ready(function() {\n\n  var tab = wizardConfig.project.tabs[page];\n  var subTabsType = wizardConfig.tabs[tab].subTabsType;\n  if (wizardConfig.tabs[tab].teaserLayer && window.secondVisit == false) {\n    startContainer();\n  } else {\n    smallContainer();\n  }\n  $(\".countryProfilLink\").show();\n  $(\".teaserTitle2\").text(' - '+lang_labels.TabCountryNote);\n\n  $.each( subTabs, function(key,value) {\n    $('#panelNav').append('<a id=\"subTabButton'+key+'\" href=\"#subTab'+key+'\">')\n    $('#itemContainer').append('<div id=\"subTab'+key+'\" class=\"tab\">')\n    $('#subTabButton'+key+'').text(value.title[lang])\n  });\n\n  $(\"#subTabButton0\").addClass('active');\n  $(\"#subTab0\").addClass('active');\n\n//on select from map tooltip in map mode\n  $(document).on('click', '#countryProfileMap', function(){\n    if (subTabsType == 'simple') {\n      updateCountryProfileSimple($(this).attr('value').toLowerCase());\n    } else {\n      updateCountryProfile($(this).attr('value').toLowerCase());\n    }\n    mapdataviz.closePopup();\n  });\n\n//on select from map tooltip in map mode\n  $(document).on('click', '#euProfileMap', function(){\n    if (subTabsType == 'simple') {\n      updateCountryProfileSimple($(this).attr('value').toLowerCase());\n    } else {\n      updateCountryProfile($(this).attr('value').toLowerCase());\n    }\n    mapdataviz.closePopup();\n  });\n\n//close large layer and show small layer\n  $('.closeLayer').click(smallContainer);\n\n// switch between subnav tabs\n  $('#panelNav').on('click', 'a', function(){\n    $(this).addClass('active').siblings('a.active').removeClass('active');\n    $($(this).attr('href')).addClass('active').siblings('.tab.active').removeClass('active');\n    return false;\n  });\n\n// add PDF option (to be developed)\n//  if (pdfWizard != null) {\n//    $('#panelNav').append('<a id=\"subTabButtonPDF\" href=\"#subTabPDF\">')\n//    $('#itemContainer').append('<div id=\"subTabPDF\" class=\"tab\">')\n//    $('#subTabPDF').append(\n//        '<h4>Generate a PDF with your selection</h4>'+\n//\t\t'<p class=\"buttons\"><button id=\"pdfButton\">generate PDF</button>'\n//      )\n//    $('#subTabButtonPDF').text('Create PDF')\n//\n//    $('#pdfButton').click(function(){\n//    generatePDF(pdfWizard);\n//    });\n//  }\n\n});\n\n"]}