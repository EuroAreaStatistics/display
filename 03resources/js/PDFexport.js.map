{"version":3,"sources":["../../03/JScomponents/extensions/DataPDFwizard.js"],"names":["generatePDF","template","data","charts","Highcharts","i","labels","ConfigPDF","pdfText","language","lang","length","push","svg","Chart","prototype","getSVG","call","replace","container","$","parent","attr","append","html","json","toJSON","text","console","log","formatTables","uploadPDF","jQuery","param","inputs","each","split","pair","this","baseURL","appendTo","submit","remove"],"mappings":"AAuCA,QAASA,aAAYC,UACjB,GAAIC,QACJ,IAAIC,QAASC,WAAWD,MACxB,IAAIE,EACJ,IAAIC,QAASC,UAAU,SACvB,IAAIC,WACJ,IAAIC,UAAWC,IAEf,KAAKL,EAAE,EAAGA,EAAEF,OAAOQ,OAAQN,IAAK,CAC5B,GAAIF,OAAOE,IAAI,KAAM,CACjBH,KAAKU,MACDC,IAAKT,WAAWU,MAAMC,UAAUC,OAAOC,KAAKd,OAAOE,IAC9Ca,QAAQ,kBAAkB,eAC1BA,QAAQ,iBAAiB,cACzBA,QAAQ,yBAAyB,IACtCC,UAAWC,EAAEjB,OAAOE,GAAGc,WAAWE,SAASC,KAAK,SAK5DF,EAAE,QAAQG,OAAO,0BAIjB,IAAItB,UAAY,aAAc,CAC1BO,QAAQI,KAAKQ,EAAE,YAAYI,OAC3BhB,SAAQI,KAAKQ,EAAE,YAAYI,QAG/B,GAAIC,OACAxB,SAAcmB,EAAEM,OAAOnB,UAAU,aACjCL,KAAckB,EAAEM,OAAOxB,MACvBI,OAAcc,EAAEM,OAAOpB,QACvBqB,KAAcP,EAAEM,OAAOlB,SAEvBC,SAAcW,EAAEM,OAAOjB,UAG3BmB,SAAQC,IAAIJ,MAKhB,QAASK,cAAa7B,WAItB,QAAS8B,WAAU7B,MACfA,WAAcA,OAAQ,SAAWA,KAAO8B,OAAOC,MAAM/B,KAErD,IAAIgC,QAAS,EACbF,QAAOG,KAAKjC,KAAKkC,MAAM,KAAM,WAC3B,GAAIC,MAAOC,KAAKF,MAAM,IACtBF,SAAQ,8BAA+BG,KAAK,GAAI,YAAaA,KAAK,GAAI,QAIxEL,QAAO,kBAAmBO,QAAS,uBAAuBL,OAAO,WAChEM,SAAS,QAAQC,SAASC","file":"PDFexport.min.js","sourcesContent":["\n////add to mapChartWizard.php\n////=============================\n//if (isset($config['tabs'][$tabID]['pdf'])) {\n//  $pdfWizard = $config['tabs'][$tabID]['pdf'];\n//  $ConfigPDF= array(\n//      'template'            =>  $pdfWizard,\n//      'labels'              =>  array (\n//          'headline'                      =>  $lang['page_title'],\n//          'subheading'                    =>  $lang['titleCountrySnapshot'].' - ',\n//          'headlineRelatedPublication'    =>  $lang['aboutRelatedPublication'],\n//  //$relatedPublication link ersetzen\n//          'coverImage'                    =>  $relatedPublication['CoverLink'][$project],\n//          'title'                         =>  $relatedPublication['publicationName'][$project],\n//          'website'                       =>  '<a href=\"'.$relatedPublication['OECDwebsite'][$project].'\">'.$relatedPublication['OECDwebsite'][$project].'</a>',\n//          'contact'                       =>  $contacts,\n//      ),\n//  );\n//}\n////=============================\n//\n//\n//\n////add to mapChartWizard.php\n////=============================\n//<?php if (isset($pdfWizard)) : ?>\n//  <script src='<?= $liveURL ?>/resources/highcharts-release/modules/exporting.js'></script>\n//  <script src='<?= $liveURL ?>/resources/jquery-json/build/jquery.json.min.js'></script>\n//  <script src='<?= $liveURL ?>/03resources/js/PDFexport.min.js'></script>\n//<?php endif ?>\n//  <script>\n//    var pdfWizard = <?= json_encode($pdfWizard) ?>;\n//    var ConfigPDF = <?= json_encode($ConfigPDF) ?>;\n//  </script>\n////=============================\n\n\n\n\nfunction generatePDF(template){\n    var data = [];\n    var charts = Highcharts.charts;\n    var i;\n    var labels = ConfigPDF['labels'];\n    var pdfText = [];\n    var language = lang;\n\n    for (i=0; i<charts.length; i++) {\n        if (charts[i]!=null) {\n            data.push({\n                svg: Highcharts.Chart.prototype.getSVG.call(charts[i])\n                    .replace(/color:#606060;/g,'color:#000;')\n                    .replace(/fill:#606060;/g,'fill:#000;')\n                    .replace(/<title>[^<]*<\\/title>/g,''),\n                container: $(charts[i].container).parent().attr('id'),\n            });\n        }\n    }\n\n    $(\"body\").append(\"<canvas id='imgCanvas'>\");\n\n//    formatTables(template);\n\n    if (template == 'OECDchart5') {\n        pdfText.push($('#subTab0').html());\n        pdfText.push($('#subTab1').html());\n    }\n\n    var json={\n        'template'  : $.toJSON(ConfigPDF['template']),\n        'data'      : $.toJSON(data),\n        'labels'    : $.toJSON(labels),\n        'text'      : $.toJSON(pdfText),\n//        'sections'  : $.toJSON(pdfSections),\n        'language'  : $.toJSON(language),\n    };\n\n    console.log(json);\n//    uploadPDF(json);\n};\n\n        \nfunction formatTables(template) {\n\n};\n\nfunction uploadPDF(data){\n    data = typeof data == 'string' ? data : jQuery.param(data);\n    //split params into form inputs\n    var inputs = '';\n    jQuery.each(data.split('&'), function(){\n      var pair = this.split('=');\n      inputs+='<input type=\"hidden\" name=\"'+ pair[0] +'\" value=\"'+ pair[1] +'\" />';\n    });\n    //send request\n//    jQuery('<form target=\"_blanc\" action=\"'+ baseURL +'/pdf\" method=\"post\">'+inputs+'</form>')\n    jQuery('<form  action=\"'+ baseURL +'/pdf\" method=\"post\">'+inputs+'</form>')\n    .appendTo('body').submit().remove();\n};\n\n"]}