function downloadHandler(type,name){return window.navigator.msSaveOrOpenBlob?function(data){$("body").removeClass("wait"),blob=new Blob([data],{type:"text/csv"}),window.navigator.msSaveOrOpenBlob(blob,name)}:"download"in document.createElement("a")&&null!=URL.createObjectURL?function(data){$("body").removeClass("wait"),$("#downloadLink").each(function(){URL.revokeObjectURL($(this).attr("href"))}),$("#downloadLink").remove();var blob=new Blob([data],{type:"text/csv"}),url=URL.createObjectURL(blob);$('<a id="downloadLink" style="display:none">').attr("href",url).attr("download",name).appendTo("body")[0].click()}:"download"in document.createElement("a")?function(data){$("body").removeClass("wait");var link=$('<a style="display:none">').attr("href","data:"+type+","+encodeURIComponent(data)).attr("download",name).appendTo("body");link[0].click(),link.remove()}:function(data){$("body").removeClass("wait");var iframe=$('<iframe style="display:none">').appendTo("body"),doc=iframe[0].contentDocument||iframe[0].contentWindow.document;doc.open(type,"replace"),doc.write(data),doc.close(),doc.execCommand("SaveAs",!0,name)}}function downloadError(jqXHR,textStatus,errorThrown){$("body").removeClass("wait");var error=errorThrown||textStatus||"unknown AJAX error";if("application/json"===jqXHR.getResponseHeader("Content-type"))try{error=JSON.parse(jqXHR.responseText).error}catch(e){}else"error"==error&&(error="error fetching URL, see javascript console");alert(error)}$(function(){$(".downloadPage a[data-type]").click(function(event){event.preventDefault();var mimeType=$(this).attr("data-type");$("body").addClass("wait"),$.ajax({url:$(this).attr("href"),dataType:"text",accepts:{text:mimeType},error:downloadError,success:downloadHandler(mimeType,$(this).attr("download"))})})});
//# sourceMappingURL=downloadPage.js.map