{"version":3,"sources":["../../03/JScomponents/modules/dataHandler/getHumanReadData.js","../../03/JScomponents/modules/dataHandler/getLatestYearData.js","../../03/JScomponents/modules/dataHandler/filterYear.js","../../03/JScomponents/modules/maps/getMapData.js","../../03/JScomponents/modules/maps/getIndicatorColorScale.js","../../03/JScomponents/modules/maps/getBubbleSize.js","../../03/JScomponents/modules/maps/getDisputedLines.js","../../03/JScomponents/modules/maps/getMapSubPoints.js","../../03/JScomponents/modules/maps/addMapLayers.js","../../03/JScomponents/modules/maps/updateLegend.js","../../03/JScomponents/modules/maps/mapStandardPlotting.js","../../03/JScomponents/modules/maps/getFlows.js","../../03/JScomponents/modules/maps/updateFlowData.js","../../03/JScomponents/modules/maps/highlightAndPopup.js","../../03/JScomponents/modules/mapTeaser/mapTeaserExportRestrictions.js","../../03/JScomponents/modules/mapTeaser/mapTeaserExportRestrictionsMain.js","../../03/JScomponents/modules/mapTeaser/mapTeaserIfiCountryData.js","../../03/JScomponents/modules/mapTeaser/mapTeaserText.js","../../03/JScomponents/modules/mapTeaser/mapTeaserTextMulti.js","../../03/JScomponents/modules/maps/leaflet.polylineDecorator.min.js"],"names":["getHumanReadData","number","decimals","trimZeros","decimalAdjust","type","value","exp","Math","isNaN","NaN","toString","split","toFixed","s","replace","undefined","parseFloat","abs","window","lang_labels","val","test","getLatestYearData","data","newData","latestYear","keys","length","$","each","key","indexOf","filterYear","d","filter","title","definition","options","dimensions","idxYear","push","cr","yKey","getMapData","wizardConfig","page","countrylist","Chart","minValueLatest","series","min","k","v","maxValueLatest","arrayValue","max","getCountryData","group","inArray","tab","project","tabs","mapType","flowStatus","ConfigProject","charts","pageCharts","DataforMap","DataforMap1","defaultLayer","labels","order","name","unit","minimum","maximum","chart","values","mobx","observable","id","lang","years","selectedYear","location","search","match","this","_values","extend","mapRegion","_min","_max","dMax","dMin","minColor","quantize","MapColors","map","x","idx","maxColor","colors","mapDivergent","slice","computed","keepAlive","deep","map1","flow","getIndicatorColorScale","feature","properties","mapCode","toLowerCase","MapGroup","landmass","range","scaleMin","scaleMax","i","floor","getBubbleSize","radius","sqrt","getDisputedLines","lines","disputedLinesNew","features","SOVEREIGNT","getMapSubPoints","mapCentroides","themeURL","mapSubPoints","smallIslands","addMapLayers","bubbleMap","mapdataviz","bubbles","layerName","L","geoJson","mapShapes","style","getBasicCountryShapesStyle","clickable","addTo","matchIndex","key1","value1","colorIndicator","pointToLayer","bubblesSizeColorGeneric","onEachFeature","highlightAndPopup","html","text","updateMultiLegend","mapLayerIndex","mapLayerMatchIndex","width","control","layers","collapsed","click","index","parent","closePopup","updateLegend","bubblesSimpleGeneric","updateFlowData","maxBubble","clearFlows","clearFlowLegend","shapes","layerGroup","forEach","runOnce","getColorCountryShapesStyleGeneric","bubblesSimpleColorGeneric","stamp","eachLayer","setStyle","DataforMapAll","embed","action","autorun","f1","f2","done","reaction","dispose","textColor","hex","rgb","parseInt","apply","Data","mode","playStart","button","clearInterval","STOP","setInterval","playStep","playStop","PLAY","pos","el","slider","empty","append","color","addClass","css","sliderHeight","subtext","lang_countries","show","hide","relatedDataControl","updateColors","sliderCreated","disabled","off","start","change","ev","ui","originalTarget","setLegend","chartType","layerData","weight","landmassBorderWidth","opacity","landmassBorder","fillOpacity","fillColor","landmassNA","className","landmassGroup","latlng","circleMarker","getBubbleStyleGeneric","colorData","getBubbleColorGeneric","sizeData","getBubbleSizeColorGeneric","bubbleColor","bubbleDefaultColor","bubbleDefaultBorder","clickFlow","e","layer","target","layerCode","activeLayer","addLines","center","stars","getFlows","colorIdx","centroides","updateFlowLegend","flowGroup","clearLayers","country","getLineSize","DataforFlow","idxCountry","toUpperCase","crData","crData1","flowLabels","tableHead1","en","cn","tableHead2","world","unspecified","asia","headlinePrefix","headlineSuffix","remove","legendData","sort","a","b","round","centros","Lat","Long","polyline","latlong","fill","addLayer","indicator","ajaxSuccess","alert","ajax","dataType","url","baseURL","success","error","xhr","ajaxOptions","thrownError","status","interaction","highlightAndPopupClick","inEuroArea","on","mouseover","inFront","bubbleHighlightBorder","shapeHighlightBorder","bringToFront","mouseout","disputedLines","sublayer","Util","setOptions","mapTeaserExportRestrictions","labels2","1","2","3","4","5","6","tableLines","countryProfile","countryName","tableLine","mapTeaserExportRestrictionsMain","tableLineCanvas","tooltipData","mapTeaserIfiCountryData","links","teaser","teaserTitle","teaserTable","link","attr","dataValue","ChartsWithData","after","mapTeaserText","euGroup","countrynotes","ISO3toFlags","hasData","mapTeaserTextMulti","LineUtil","PolylineDecorator","computeAngle","atan2","y","PI","getPointPathPixelLength","c","distanceTo","getPixelLength","Polyline","getLatLngs","f","g","projectPatternOnPath","l","projectPatternOnPointPath","latLng","unproject","pt","interpolateOnPointPath","predecessor","heading","interpolateBetweenPoints","h","j","Point","RotatedMarker","Marker","angle","_setPos","prototype","call","DomUtil","TRANSFORM","_icon","Browser","ie","LatLng","DEG_TO_RAD","cos","sin","rotatedMarker","Symbol","Dash","Class","isZoomDependant","pixelSize","pathOptions","initialize","buildSymbol","add","subtract","dash","ArrowHead","polygon","headAngle","stroke","Polygon","_buildArrowPath","arrowHead","markerOptions","rotate","draggable","marker","LayerGroup","patterns","_map","_initPaths","_initPatterns","_paths","MultiPolyline","MultiPolygon","_initPath","isArray","_isCoordArray","_isZoomDependant","_patterns","_parsePatternDef","isOffsetInPixels","isRepeatInPixels","symbolFactory","setPatterns","_softRedraw","setPaths","redraw","cache","symbol","offset","repeat","onAdd","_draw","onRemove","_buildSymbols","_getCache","_getDirectionPoints","getZoom","_redraw","_drawPattern","polylineDecorator","disposer","teaserText","specialTooltip","specialTooltipLinks","popup","setContent","setLatLng","openOn"],"mappings":"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","file":"mapWizardSimple.min.js","sourcesContent":["// function to convert large numbers in human readable numbers\n// passing a negative number for decimals returns the unmodified number\nfunction getHumanReadData(number, decimals, trimZeros) {\n  if (decimals === undefined) {\n    decimals = 0;\n  }\n\n  if (decimals < 0) {\n    return number;\n  }\n\n  number = parseFloat(number);\n  var abs = Math.abs(number);\n\n  /* code from MDN (public domain)\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round$revision/981487#Decimal_rounding\n  */\n  /**\n   * Decimal adjustment of a number.\n   *\n   * @param {String}  type  The type of adjustment.\n   * @param {Number}  value The number.\n   * @param {Integer} exp   The exponent (the 10 logarithm of the adjustment base).\n   * @returns {Number} The adjusted value.\n   */\n  function decimalAdjust(type, value, exp) {\n    // If the exp is undefined or zero...\n    if (typeof exp === 'undefined' || +exp === 0) {\n      return Math[type](value);\n    }\n    value = +value;\n    exp = +exp;\n    // If the value is not a number or the exp is not an integer...\n    if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\n      return NaN;\n    }\n    // Shift\n    value = value.toString().split('e');\n    value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n    // Shift back\n    value = value.toString().split('e');\n    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n  }\n\n  function toFixed(number, decimals) {\n    var s = decimalAdjust('round', number, -decimals).toFixed(decimals);\n    return trimZeros ? s.replace(/\\.0+$|(\\..*?)0+$/,'$1') : s;\n  }\n\n  // this function prints larger number in OECD format 10 000.23 usw.\n  function spaceSeparateNumber(val){\n    while (/(\\d+)(\\d{3})/.test(val.toString())){\n      val = val.toString().replace(/(\\d+)(\\d{3})/, '$1' + ' ' + '$2');\n    }\n    return val;\n  }\n\n  // this function prints larger number in US format 10,000.23 usw.\n  function commaSeparateNumber(val){\n    while (/(\\d+)(\\d{3})/.test(val.toString())){\n      val = val.toString().replace(/(\\d+)(\\d{3})/, '$1' + ',' + '$2');\n    }\n    return val;\n  }\n\n  if(abs > 1e12) {\n    return toFixed(number / 1e12, decimals) + '&nbsp;' + window.lang_labels['trillion'];\n  } else if(abs > 1e9) {\n    return toFixed(number / 1e9, decimals) + '&nbsp;' + window.lang_labels['billion'];\n  } else if(abs > 1e6) {\n    return toFixed(number / 1e6, decimals) + '&nbsp;' + window.lang_labels['million'];\n  } else if(abs > 1e5) {\n    return toFixed(number / 1e3, decimals) + '&nbsp;' + window.lang_labels['thousand'];\n  } else {\n    return spaceSeparateNumber(toFixed(number, decimals));\n  }\n}\n","\n\n\n// returns the latest available year for a two dimensional JSON data set\n\nfunction getLatestYearData (data) {\n  var newData = {};\n  var latestYear = data.keys[1].length-1;\n  $.each(data.keys[0], function (key,value) {\n      newData[value]=[];\n      while (data.data[data.keys[0].indexOf(value)][latestYear] == null && latestYear>=0) {\n          latestYear = latestYear-1;\n      };\n      newData[value][0]=data.keys[1][latestYear];\n      newData[value][1]=data.data[data.keys[0].indexOf(value)][latestYear];\n      latestYear = data.keys[1].length-1;\n  });\n  return newData;\n}\n","\n\n\nfunction filterYear(d,filter) {\n\tvar newData = {}\n\tnewData['title'] = d.title\n\tnewData['definition'] = d.definition\n\tnewData['options'] = d.options\n\tnewData['data'] = {}\n\tnewData.data['dimensions'] = d.data.dimensions;\n\tnewData.data['keys'] = [];\n\tnewData.data['keys'][0] = d.data.keys[0];\n\tnewData.data['keys'][1] = [];\n\tnewData.data['data'] = [];\n\tvar idxYear = []\n\t$.each(filter, function (key,value) {\n\t\tidxYear.push(d.data.keys[1].indexOf(value))\n\t\tnewData.data.keys[1].push(value);\n\t});\n\t$.each(newData.data.keys[0], function(key,cr){\n\t\tnewData.data.data[key] = [];\n\t\t$.each(idxYear, function (yKey,value) {\n\t\t\tnewData.data.data[key].push(d.data.data[key][value])\n\t\t});\n\t});\n\treturn newData;\n}\n","function getMapData(wizardConfig, page, countrylist, Chart) {\n  var tab = wizardConfig.project.tabs[page];\n  var mapType = wizardConfig.tabs[tab].mapType;\n  var flowStatus = wizardConfig.tabs[tab].type;\n\n  var ConfigProject = getPageCharts(wizardConfig, page);\n\n  var DataforMap = [];\n  var DataforMap1 = [];\n\n  // set default layer to index of first element of Chart or 0\n  var data = {\n    defaultLayer:\n      Chart != null\n        ? Math.max(0, wizardConfig.tabs[tab].charts.indexOf(Chart[0]))\n        : 0,\n  };\n\n  if (mapType == \"TwoIndicatorsSplitOnYears\") {\n    // returns data of the first chart as separate maps - split on the YEARS dimension (data.keys[1])\n    // returns data of the second chart as separate maps - split on the YEARS dimension (data.keys[1])\n\n    var labels = wizardConfig.tabs[tab].labels;\n    var key = 0;\n    $.each(labels.order, function (order, value) {\n      if ($.inArray(value, ConfigProject[0].data.keys[1]) > -1) {\n        DataforMap[key] = filterYear(ConfigProject[0], [value]);\n        if (labels.labels[value]) {\n          DataforMap[key][\"title\"] = labels.labels[value].name;\n          DataforMap[key][\"unit\"] = labels.labels[value].unit;\n        } else {\n          DataforMap[key][\"title\"] = value;\n          DataforMap[key][\"unit\"] = \"\";\n        }\n        DataforMap[key][\"code\"] = value;\n        DataforMap[key][\"definition\"] = value;\n        DataforMap[key][\"values\"] = getCountryData(\n          getLatestYearData(DataforMap[key][\"data\"]),\n          countrylist\n        );\n\n        if (\n          ConfigProject[0].options.minimum &&\n          ConfigProject[0].options.minimum != null\n        ) {\n          DataforMap[key][\"min\"] = ConfigProject[0].options.minimum;\n        } else {\n          DataforMap[key][\"min\"] = minValueLatest(DataforMap[key][\"values\"]);\n        }\n        if (\n          ConfigProject[0].options.maximum &&\n          ConfigProject[0].options.maximum != null\n        ) {\n          DataforMap[key][\"max\"] = ConfigProject[0].options.maximum;\n        } else {\n          DataforMap[key][\"max\"] = maxValueLatest(DataforMap[key][\"values\"], 1);\n        }\n        DataforMap[key][\"latestYear\"] = maxValueLatest(\n          DataforMap[key][\"values\"],\n          0\n        );\n        key++;\n      }\n    });\n\n    if (ConfigProject[1] != null) {\n      $.each(ConfigProject[1].data.keys[1], function (key, value) {\n        DataforMap1[key] = filterYear(ConfigProject[1], [value]);\n        if (labels.labels[value]) {\n          DataforMap1[key][\"title\"] = labels.labels[value].name;\n        } else {\n          DataforMap1[key][\"title\"] = value;\n        }\n        DataforMap1[key][\"code\"] = value;\n        DataforMap1[key][\"definition\"] = value;\n        DataforMap1[key][\"values\"] = getCountryData(\n          getLatestYearData(DataforMap1[key][\"data\"]),\n          countrylist\n        );\n\n        if (\n          ConfigProject[1].options.minimum &&\n          ConfigProject[1].options.minimum != null\n        ) {\n          DataforMap1[key][\"min\"] = ConfigProject[1].options.minimum;\n        } else {\n          DataforMap1[key][\"min\"] = minValueLatest(DataforMap1[key][\"values\"]);\n        }\n        if (\n          ConfigProject[1].options.maximum &&\n          ConfigProject[1].options.maximum != null\n        ) {\n          DataforMap1[key][\"max\"] = ConfigProject[1].options.maximum;\n        } else {\n          DataforMap1[key][\"max\"] = maxValueLatest(\n            DataforMap1[key][\"values\"],\n            1\n          );\n        }\n        DataforMap1[key][\"latestYear\"] = maxValueLatest(\n          DataforMap1[key][\"values\"],\n          0\n        );\n      });\n    }\n  } else {\n    $.each(ConfigProject, function (chart, values) {\n      if (values.type != \"flow\") {\n        DataforMap.push(\n          (function () {\n            return mobx.observable(\n              {\n                get id() {\n                  return chart;\n                },\n                get title() {\n                  return values.title[lang];\n                },\n                get definition() {\n                  return values.definition[lang];\n                },\n                get options() {\n                  return values.options;\n                },\n                get years() {\n                  return values.data.keys[1];\n                },\n                selectedYear: (window.location.search.match(\n                  /[?&]t=([^&]*)/\n                ) || [\"\", null])[1],\n                get data() {\n                  return (\n                    this.selectedYear === null\n                      ? values\n                      : filterYear(values, [this.selectedYear])\n                  ).data;\n                },\n                get _values() {\n                  return getCountryData(\n                    getLatestYearData(this.data),\n                    countrylist\n                  );\n                },\n                get values() {\n                  // mapRegion value is not used for computing minimum / maximum / color scale\n                  if (\"mapRegion\" in this.options) {\n                    var v = $.extend({}, this._values);\n                    v[this.options.mapRegion] = getLatestYearData(this.data)[\n                      this.options.mapRegion\n                    ];\n                    return v;\n                  }\n                  return this._values;\n                },\n                get _min() {\n                  if (this.options.minimum && this.options.minimum != null) {\n                    return this.options.minimum;\n                  }\n                  return minValueLatest(this._values);\n                },\n                get _max() {\n                  if (this.options.maximum && this.options.maximum != null) {\n                    return this.options.maximum;\n                  }\n                  return maxValueLatest(this._values, 1);\n                },\n                get latestYear() {\n                  return maxValueLatest(this._values, 0);\n                },\n                get dMax() {\n                  return Math.max(Math.abs(this._min), Math.abs(this._max));\n                },\n                get dMin() {\n                  return -this.dMax;\n                },\n                get minColor() {\n                  return quantize(\n                    this._min,\n                    this.dMin,\n                    this.dMax,\n                    MapColors.map(function (x, idx) {\n                      return idx;\n                    })\n                  );\n                },\n                get maxColor() {\n                  return quantize(\n                    this._max,\n                    this.dMin,\n                    this.dMax,\n                    MapColors.map(function (x, idx) {\n                      return idx;\n                    })\n                  );\n                },\n                get colors() {\n                  if (this.options.mapDivergent) {\n                    // adjust color scale if min/max is assymetric\n                    if (this.minColor > 0) {\n                      return MapColors.slice(this.minColor);\n                    } else if (this.maxColor + 1 < MapColors.length) {\n                      return MapColors.slice(0, this.maxColor + 1);\n                    }\n                  }\n                  return MapColors;\n                },\n                get min() {\n                  if (this.options.mapDivergent) {\n                    // adjust color scale if min/max is assymetric\n                    if (this.minColor > 0) {\n                      return (\n                        this.dMin +\n                        (this.minColor * (this.dMax - this.dMin)) /\n                          MapColors.length\n                      );\n                    }\n                  }\n                  return this._min;\n                },\n                get max() {\n                  if (this.options.mapDivergent) {\n                    // adjust color scale if min/max is assymetric\n                    if (\n                      !(this.minColor > 0) &&\n                      this.maxColor + 1 < MapColors.length\n                    ) {\n                      return (\n                        this.dMax -\n                        ((MapColors.length - (this.maxColor + 1)) *\n                          (this.dMax - this.dMin)) /\n                          MapColors.length\n                      );\n                    }\n                  }\n                  return this._max;\n                },\n              },\n              {\n                values: mobx.computed({ keepAlive: true }),\n                min: mobx.computed({ keepAlive: true }),\n                max: mobx.computed({ keepAlive: true }),\n                colors: mobx.computed({ keepAlive: true }),\n                latestYear: mobx.computed({ keepAlive: true }),\n              },\n              { deep: false, name: \"map\" }\n            );\n          })()\n        );\n      }\n    });\n  }\n\n  data.map = DataforMap;\n  data.map1 = DataforMap1;\n  data.flow = flowStatus;\n\n  function getPageCharts(wizardConfig, page) {\n    var tab = wizardConfig.project.tabs[page];\n    var charts = wizardConfig.tabs[tab].charts;\n\n    var pageCharts = [];\n    $.each(charts, function (k, v) {\n      pageCharts.push(wizardConfig.charts[v]);\n    });\n    return pageCharts;\n  }\n\n  function minValue(series) {\n    // private\n    var min = null;\n    $.each(series, function (k, v) {\n      if (v == null) return;\n      if (min == null) min = v;\n      else if (min > v) min = v;\n    });\n    return min;\n  }\n\n  function maxValue(series) {\n    // private\n    var max = null;\n    $.each(series, function (k, v) {\n      if (v == null) return;\n      if (max == null) max = v;\n      else if (max < v) max = v;\n    });\n    return max;\n  }\n\n  function minValueLatest(series) {\n    // public\n    var min = null;\n    $.each(series, function (k, v) {\n      v = v[1];\n      if (v == null) return;\n      if (min == null) min = v;\n      else if (min > v) min = v;\n    });\n    return min;\n  }\n\n  function maxValueLatest(series, arrayValue) {\n    // public\n    var max = null;\n    $.each(series, function (k, v) {\n      v = v[arrayValue];\n      if (v == null) return;\n      if (max == null) max = v;\n      else if (max < v) max = v;\n    });\n    return max;\n  }\n\n  function getStandardDeviationWizard(series, value) {\n    // public\n    var devVal = [];\n    $.each(series, function (k, v) {\n      devVal.push(v[1]);\n    });\n    var average = getAverageFromNumArr(devVal, 2);\n    var deviation = getStandardDeviation(devVal, 2);\n\n    if (value == \"max\") {\n      return average + deviation;\n    }\n    if (value == \"min\") {\n      return average - deviation;\n    } else {\n      return null;\n    }\n  }\n\n  function getCountryData(series, group) {\n    // public\n    var data = {};\n    $.each(series, function (k, v) {\n      if ($.inArray(k, group) > -1) {\n        data[k] = v;\n      }\n    });\n    return data;\n  }\n\n  return mobx.observable(\n    {\n      defaultLayer: data.defaultLayer,\n      get map() {\n        return data.map;\n      },\n      get map1() {\n        return data.map1;\n      },\n      get flow() {\n        return data.flow;\n      },\n    },\n    {},\n    { deep: false, name: \"DataforMapAll\" }\n  );\n}\n","function getIndicatorColorScale(d, dMin, dMax, feature, colors) {\n  if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n    return quantize(d, dMin, dMax, colors)\n  } else {\n    return landmass;\n  }\n\n}\n\nfunction quantize(d, dMin, dMax, range) {\n  function scaleToInteger(d, dMin, dMax, scaleMin, scaleMax) {\n    var i = Math.floor((d - dMin) / (dMax - dMin) * (scaleMax - scaleMin + 1)) + scaleMin;\n    if (i < scaleMin) return scaleMin;\n    if (i > scaleMax) return scaleMax;\n    return i;\n  }\n\n  return range[scaleToInteger(d, dMin, dMax, 0, range.length - 1)];\n}\n","\n\nfunction getBubbleSize(d, dMax, feature) {\n  //private\n  if (d == null || d <= 0) return null;\n  var radius = Math.sqrt(d / dMax) * 25;\n  if (radius < 3) radius = 3;\n  return radius;\n}\n","\n\n//returns lines for disputed territories for a given country group\n\nfunction getDisputedLines (lines,group) {\n  var disputedLinesNew = {\n        \"type\": \"FeatureCollection\",\n        \"features\": []\n        }\n  if ($.inArray('ind', group)>-1 || $.inArray('chn', group)>-1 || $.inArray('pak', group)>-1) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'IndiaChinaPakistan' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('ind', group)>-1 || $.inArray('chn', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'IndiaChina' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('egy', group)>-1 || $.inArray('sdn', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'EgyptSudan' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('sdn', group)>-1 || $.inArray('ssd', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'Sudan' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  } if ($.inArray('ken', group)>-1 || $.inArray('som', group)>-1 ) {\n    $.each(lines.features, function (k, feature) {\n      if (feature.properties.SOVEREIGNT == 'KenyaSom' ) {\n        disputedLinesNew['features'].push(feature);\n      }\n    });\n  }\n  return disputedLinesNew;\n\n}\n","\n\n\n//adds small islands as dots on color coded maps\n\nfunction getMapSubPoints(mapCentroides) {\n  if (themeURL == 'ecb') return;\n  var mapSubPoints = {\n        \"type\": \"FeatureCollection\",\n        \"features\": []\n        }\n  var smallIslands = ['AND','ATG','AIA','ASM','ABW','ALA','BRB','BLM','BMU','BVT','CCK','COK','CPV','CUW','CXR','DMA','FLK','FSM','GRD','GGY','GIB','GLP','SGS','GUM','HKG','IMN','JEY','KIR','COM','KNA','CYM','LCA','LIE','MCO','MAF','MHL','MAC','MNP','MTQ','MSR','MLT','MUS','MDV','NFK','NRU','NIU','PYF','SPM','PCN','PRI','PLW','REU','SYC','SHN','SJM','SMR','STP','SXM','TCA','ATF','TKL','TON','TTO','TUV','VAT','VCT','VGB','VIR','WLF','WSM','MYT','ANT'];\n  $(mapCentroides.features).each(function(feature){\n    if ($.inArray(this.properties[mapCode], smallIslands) > -1) {\n      mapSubPoints['features'].push(this);\n    }\n  });\n  return mapSubPoints;\n}\n","// add mapLayers for the different display types (bubbles, colored bublbes (simple and complex), colored shapes)\n\nfunction addMapLayers(bubbleMap, mapdataviz, flowStatus) {\n  var bubbles = [];\n  var layers = {};\n  var layerName = [];\n\n  if (bubbleMap == \"multiColored\") {\n    // used on template 'multipleColoredBubbles'\n    // A colored bubble map. The first chart sets the bubble size, the second the bubble color. The second dimension (YEARS) is represented as a separate indicator\n\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    var i = 0;\n    var matchIndex = [];\n    $.each(DataforMap, function (key, value) {\n      $.each(DataforMap1, function (key1, value1) {\n        if (value1.title == value.title) {\n          matchIndex[key] = key1 + 1;\n        }\n      });\n\n      if (matchIndex[key]) {\n        var colorIndicator = DataforMap1[matchIndex[key] - 1];\n      } else {\n        var colorIndicator = null;\n      }\n\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSizeColorGeneric(value, colorIndicator),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[$(\"<div>\").html(DataforMap[i][\"title\"]).text()] = bubbles[i];\n      i++;\n    });\n\n    bubbles[0].addTo(mapdataviz);\n    updateMultiLegend(DataforMap[0], \"size\");\n    updateMultiLegend(DataforMap1[matchIndex[0] - 1], \"color\");\n    // global variables to define map layer (used for popup window)\n    window.mapLayerIndex = 0;\n    window.mapLayerMatchIndex = matchIndex;\n    if (DataforMap.length > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      updateMultiLegend(DataforMap[index], \"size\");\n      updateMultiLegend(DataforMap1[matchIndex[index] - 1], \"color\");\n      mapdataviz.closePopup();\n      window.mapLayerIndex = index;\n    });\n  } else if (bubbleMap == \"colored\") {\n    // first indicator bubble size, all other indicators bubble color\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    for (i = 0; i < DataforMap.length - 1; i++) {\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSizeColorGeneric(DataforMap[0], DataforMap[i + 1]),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[\n        $(\"<div>\")\n          .html(DataforMap[i + 1][\"title\"])\n          .text()\n      ] = bubbles[i];\n    }\n    bubbles[0].addTo(mapdataviz);\n    updateLegend(DataforMap[0], \"size\");\n    updateLegend(DataforMap[1], \"color\");\n    if (DataforMap.length - 1 > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      updateLegend(DataforMap[index + 1], \"color\");\n    });\n  } else if (bubbleMap == \"coloredPairUnpair\") {\n    // pair indicators bubble size, unpair indicators bubble color\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    for (i = 0; i < DataforMap.length / 2; i++) {\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSizeColorGeneric(\n          DataforMap[i * 2],\n          DataforMap[i * 2 + 1]\n        ),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[\n        $(\"<div>\")\n          .html(DataforMap[i * 2][\"title\"])\n          .text()\n      ] = bubbles[i];\n    }\n    bubbles[0].addTo(mapdataviz);\n    updateLegend(DataforMap[0], \"size\");\n    updateLegend(DataforMap[1], \"color\");\n    if (DataforMap.length - 1 > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      updateLegend(DataforMap[index * 2], \"size\");\n      updateLegend(DataforMap[index * 2 + 1], \"color\");\n    });\n  } else if (bubbleMap == \"simple\") {\n    L.geoJson(mapShapes, {\n      style: getBasicCountryShapesStyle,\n      clickable: false,\n    }).addTo(mapdataviz);\n    for (i = 0; i < DataforMap.length; i++) {\n      bubbles[i] = L.geoJson(mapCentroides, {\n        pointToLayer: bubblesSimpleGeneric(DataforMap[i]),\n        onEachFeature: highlightAndPopup,\n      });\n      layerName[$(\"<div>\").html(DataforMap[i][\"title\"]).text()] = bubbles[i];\n    }\n    bubbles[0].addTo(mapdataviz);\n    // add flows\n    if (flowStatus == \"flow\") {\n      updateLegend(DataforMap[0], \"flows\");\n      updateFlowData(DataforMap[0][\"code\"]);\n      // add global variable for value behind bubble size as a scaling reference for flow lines\n      window.maxBubble = DataforMap[0][\"max\"];\n    } else {\n      updateLegend(DataforMap[0], \"size\");\n    }\n\n    if (DataforMap.length > 1) {\n      if ($(window).width() < 750) {\n        L.control\n          .layers(layerName, null, { collapsed: true })\n          .addTo(mapdataviz);\n      } else {\n        L.control\n          .layers(layerName, null, { collapsed: false })\n          .addTo(mapdataviz);\n      }\n    }\n    $(\".leaflet-control-layers-selector\").click(function () {\n      var index = $(this).parent().index();\n      // add flows\n      if (flowStatus == \"flow\") {\n        updateFlowData(DataforMap[index][\"code\"]);\n        clearFlows();\n        clearFlowLegend();\n        updateLegend(DataforMap[index], \"flows\");\n        // add global variable for value behind bubble size as a scaling reference for flow lines\n        window.maxBubble = DataforMap[index][\"max\"];\n      } else {\n        updateLegend(DataforMap[index], \"size\");\n      }\n    });\n  } else {\n    var shapes = [];\n    var layerGroup = [];\n    var mapSubPoints = getMapSubPoints(mapCentroides);\n\n    DataforMap.forEach(function (data, i) {\n      runOnce(\n        \"createGeoJson\" + i,\n        function () {\n          shapes[i] = L.geoJson(mapShapes, {\n            style: getColorCountryShapesStyleGeneric(DataforMap[i]),\n            onEachFeature: highlightAndPopup,\n            clickable: false,\n          });\n          if (mapSubPoints != undefined) {\n            bubbles[i] = L.geoJson(mapSubPoints, {\n              pointToLayer: bubblesSimpleColorGeneric(DataforMap[i]),\n              onEachFeature: highlightAndPopup,\n            });\n            layerGroup[i] = L.layerGroup([shapes[i], bubbles[i]]);\n          } else {\n            layerGroup[i] = L.layerGroup([shapes[i]]);\n          }\n          // force the layer control to display the indicators in the correct order\n          L.stamp(layerGroup[i]);\n        },\n        function () {\n          console.log(\"update\", i);\n          layerGroup[i].eachLayer(function (feature) {\n            feature.setStyle(getColorCountryShapesStyleGeneric(DataforMap[i]));\n          });\n        }\n      );\n      layerName[$(\"<div>\").html(DataforMap[i][\"title\"]).text()] = layerGroup[i];\n    });\n\n    runOnce(\"addDefaultLayer\", function () {\n      layerGroup[DataforMapAll.defaultLayer].addTo(mapdataviz);\n      if (DataforMap.length > 1) {\n        if ($(window).width() < 750 || embed == 2) {\n          L.control\n            .layers(layerName, null, { collapsed: true })\n            .addTo(mapdataviz);\n        } else {\n          L.control\n            .layers(layerName, null, { collapsed: false })\n            .addTo(mapdataviz);\n        }\n      }\n    });\n    $(\".leaflet-control-layers-selector\").click(\n      mobx.action(\"layer\", function () {\n        var index = $(this).parent().index();\n        DataforMapAll.defaultLayer = index;\n      })\n    );\n    mobx.autorun(\n      function () {\n        updateLegend(DataforMap[DataforMapAll.defaultLayer], \"color\");\n      },\n      { name: \"updateLegend\" }\n    );\n  }\n}\n\n// helper function for mobx\n// call f1() now and f2() on following reactions\nfunction runOnce(name, f1, f2) {\n  mobx.autorun(\n    (function (done) {\n      return function (reaction) {\n        if (!done) {\n          done = true;\n          console.log(\"run\", name);\n          f1();\n          if (!f2) reaction.dispose();\n        } else {\n          console.log(\"rerun:\", name);\n          if (f2) f2();\n        }\n      };\n    })(false),\n    { name: name }\n  );\n}\n","function textColor(hex) {\n  var match = hex.match(/^#(..)(..)(..)$/);\n  if (match) {\n    var rgb = match.slice(1).map(function (s) {\n      return parseInt(s, 16) / 255;\n    });\n    // calculate L from HSL\n    var L = (Math.min.apply(null, rgb) + Math.max.apply(null, rgb)) / 2;\n    return L < 0.5 ? \"#fff\" : \"#000\";\n  } else {\n    return \"#000\";\n  }\n}\n\nfunction updateLegend(Data, mode) {\n  if (mode == \"color\") {\n    if (Data) {\n      var colors = Data[\"colors\"];\n      $(\"#legendMinColor\")\n        .parent()\n        .parent()\n        .empty()\n        .append(\n          colors.map(function (color, idx, colors) {\n            var el = $(\"<li>\");\n            if (idx === 0) {\n              el.addClass(\"firstLegendElement\");\n              el.append(\n                $('<span id=\"legendMinColor\" class=\"firstLegendElement\">')\n                  .css(\"background\", color)\n                  .css(\"color\", textColor(color))\n              );\n            } else if (idx + 1 === colors.length) {\n              el.addClass(\"lastLegendElement\");\n              el.append(\n                $('<span id=\"legendMaxColor\" class=\"lastLegendElement\">')\n                  .css(\"background\", color)\n                  .css(\"color\", textColor(color))\n              );\n            } else {\n              el.append($(\"<span>\").css(\"background\", color));\n            }\n            return el;\n          })\n        );\n      $(\"#legendMaxColor\").html(\n        getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendMinColor\").html(\n        getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleColor\").text($(\"<div>\").html(Data[\"title\"]).text());\n\n      var sliderHeight = Data.selectedYear !== null ? 23 : 0;\n      if (\n        \"mapRegion\" in Data[\"options\"] &&\n        Data[\"options\"][\"mapRegion\"] != \"\" &&\n        Data[\"values\"][Data[\"options\"][\"mapRegion\"]]\n      ) {\n        var subtext =\n          lang_countries[Data[\"options\"][\"mapRegion\"].toLowerCase()] +\n          \": \" +\n          getHumanReadData(\n            Data[\"values\"][Data[\"options\"][\"mapRegion\"]][1],\n            Data[\"options\"][\"tooltipDecimals\"]\n          );\n        if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n          subtext += \" \" + Data[\"options\"][\"tooltipUnit\"];\n        }\n        if (\n          Data[\"values\"][Data[\"options\"][\"mapRegion\"]][0] != Data[\"latestYear\"]\n        ) {\n          subtext +=\n            \" (\" + Data[\"values\"][Data[\"options\"][\"mapRegion\"]][0] + \")\";\n        }\n        $(\"#legendSubtextColor\").html(subtext);\n        $(\"#legendSubtextColor\").show();\n        if (\"mapSource\" in lang_labels) {\n          $(\"#topContainer\").css(\"height\", 66 + sliderHeight);\n        } else {\n          $(\"#topContainer\").css(\"height\", 58 + sliderHeight);\n        }\n      } else {\n        if (\"mapSource\" in lang_labels) {\n          $(\"#topContainer\").css(\"height\", 58 + sliderHeight);\n        }\n        $(\"#legendSubtextColor\").hide();\n      }\n\n      if (window.relatedDataControl) {\n        window.relatedDataControl.updateColors(function (id) {\n          return (\n            Data.values[id] &&\n            quantize(Data.values[id][1], Data.min, Data.max, Data.colors)\n          );\n        });\n      }\n\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitColor\").text(\", \" + Data[\"options\"][\"tooltipUnit\"]);\n      } else {\n        $(\"#legendUnitColor\").text(\"\");\n      }\n      $(\"#legendYearColor\").text(Data.latestYear);\n\n      var sliderCreated =\n        typeof $('div[name=\"sliderMapColor\"]').slider(\"instance\") !==\n        \"undefined\";\n\n      if (Data.selectedYear !== null) {\n        $(\"div.sliderWrapper\").show();\n\n        var PLAY = \"\\u25b6\";\n        var STOP = \"\\u25fe\";\n\n        function playStart() {\n          var button = $(\"div.sliderWrapper input\");\n          window.clearInterval(button.data(\"timer\"));\n          button.data(\"timer\", 0);\n          button.val(STOP);\n          button.data(\"timer\", window.setInterval(playStep, 1000));\n          console.log(\"start playing\", button.data(\"timer\"));\n          playStep(0);\n        }\n\n        function playStop() {\n          var button = $(\"div.sliderWrapper input\");\n          console.log(\"stop playing\", button.data(\"timer\"));\n          button.val(PLAY);\n          window.clearInterval(button.data(\"timer\"));\n          button.data(\"timer\", 0);\n        }\n\n        function playStep(pos) {\n          var el = $('div[name=\"sliderMapColor\"]');\n          var options = el.slider(\"option\");\n          if (typeof pos !== \"number\") {\n            pos = el.slider(\"value\") + 1;\n          }\n          console.log(\"step\", pos);\n          if (pos > options.max) {\n            playStop();\n          } else {\n            el.slider(\"value\", pos);\n          }\n        }\n\n        if (!sliderCreated) {\n          console.log(\"create slider\");\n          $('div[name=\"sliderMapColor\"]').slider({\n            max: 1,\n            disabled: true,\n          });\n          $(\"div.sliderWrapper input\").val(PLAY);\n          $(\"div.sliderWrapper input\")\n            .off(\"click\")\n            .click(function () {\n              var playing = $(this).val() !== PLAY;\n              if (playing) {\n                playStop();\n              } else {\n                playStart();\n              }\n            });\n        }\n\n        console.log(\"update slider change\", Data.id);\n        $('div[name=\"sliderMapColor\"]').slider(\"option\", {\n          start: function () {\n            playStop();\n          },\n          change: mobx.action(\"slider\", function (ev, ui) {\n            console.log(\"change\", Data.id, Data.selectedYear, ui.value);\n            if (ev.originalTarget) {\n              playStop();\n            }\n            Data.selectedYear = Data.years[ui.value];\n          }),\n        });\n\n        console.log(\"update slider data\", Data.id);\n        $('div[name=\"sliderMapColor\"]').slider(\"option\", {\n          max: Data.years.length - 1,\n          value:\n            (Data.years.length + Data.years.indexOf(Data.selectedYear)) %\n            Data.years.length,\n          disabled: false,\n        });\n      } else {\n        if (sliderCreated) {\n          $('div[name=\"sliderMapColor\"]').slider(\"destroy\");\n        }\n        $(\"div.sliderWrapper\").hide();\n      }\n    } else {\n      $(\"#legendMaxColor\").html(\"\");\n      $(\"#legendMinColor\").html(\"\");\n      $(\"#legendTitleColor\").text(\"No data available\");\n      $(\"#legendUnitColor\").text(\"\");\n      $(\"#legendYearColor\").text(\"\");\n    }\n  } else if (mode == \"flows\") {\n    if (Data) {\n      $(\"#legendBubble\").html(\n        window.lang_labels[\"min\"] +\n          \": \" +\n          getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"]) +\n          \" - \" +\n          window.lang_labels[\"max\"] +\n          \": \" +\n          getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleSize\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitSize\").text(\", \" + Data[\"options\"][\"tooltipUnit\"]);\n      } else {\n        $(\"#legendUnitSize\").text(\"\");\n      }\n      $(\"#legendYearSize\").text(\"\");\n    } else {\n      $(\"#legendBubble\").html(\"\");\n      $(\"#legendTitleSize\").text(\"No data available\");\n      $(\"#legendUnitSize\").text(\"\");\n      $(\"#legendYearSize\").text(\"\");\n    }\n  } else {\n    if (Data) {\n      $(\"#legendBubble\").html(\n        window.lang_labels[\"min\"] +\n          \": \" +\n          getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"]) +\n          \" - \" +\n          window.lang_labels[\"max\"] +\n          \": \" +\n          getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleSize\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitSize\").text(\", \" + Data[\"options\"][\"tooltipUnit\"]);\n      } else {\n        $(\"#legendUnitSize\").text(\"\");\n      }\n      $(\"#legendYearSize\").text(Data[\"latestYear\"]);\n    } else {\n      $(\"#legendBubble\").html(\"\");\n      $(\"#legendTitleSize\").text(\"No data available\");\n      $(\"#legendUnitSize\").text(\"\");\n      $(\"#legendYearSize\").text(\"\");\n    }\n  }\n  $(\"#flowLayer .commodity\").text(Data[\"title\"]);\n}\n\nfunction updateMultiLegend(Data, mode) {\n  if (mode == \"color\") {\n    if (Data) {\n      $(\"#legendMaxColor\").html(\n        getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendMinColor\").html(\n        getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleColor\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitColor\").text(\", \" + Data[\"unit\"]);\n      } else {\n        $(\"#legendUnitColor\").text(\"\");\n      }\n      $(\"#legendYearColor\").text(\"\");\n    } else {\n      $(\"#legendMaxColor\").html(\"\");\n      $(\"#legendMinColor\").html(\"\");\n      $(\"#legendTitleColor\").text(\"No data available\");\n      $(\"#legendUnitColor\").text(\"\");\n      $(\"#legendYearColor\").text(\"\");\n    }\n  } else {\n    if (Data) {\n      $(\"#legendBubble\").html(\n        window.lang_labels[\"min\"] +\n          \": \" +\n          getHumanReadData(Data[\"min\"], Data[\"options\"][\"tooltipDecimals\"]) +\n          \" - \" +\n          window.lang_labels[\"max\"] +\n          \": \" +\n          getHumanReadData(Data[\"max\"], Data[\"options\"][\"tooltipDecimals\"])\n      );\n      $(\"#legendTitleSize\").text($(\"<div>\").html(Data[\"title\"]).text());\n      if (Data[\"options\"][\"tooltipUnit\"] != \"\") {\n        $(\"#legendUnitSize\").text(\", \" + Data[\"unit\"]);\n      } else {\n        $(\"#legendUnitSize\").text(\"\");\n      }\n      $(\"#legendYearColor\").text(\"\");\n    } else {\n      $(\"#legendBubble\").html(\"\");\n      $(\"#legendTitleSize\").text(\"No data available\");\n      $(\"#legendUnitSize\").text(\"\");\n      $(\"#legendYearSize\").text(\"\");\n    }\n  }\n}\n\nfunction setLegend(chartType, bubbleMap) {\n  if (\n    bubbleMap == \"colored\" ||\n    bubbleMap == \"multiColored\" ||\n    bubbleMap == \"coloredPairUnpair\"\n  ) {\n    $(\"#textLegend\").hide();\n  } else if (bubbleMap == \"simple\") {\n    $(\"#colorLegend\").hide();\n    if (chartType == \"mapWizard\") {\n      $(\"#textLegend\").hide();\n      $(\"#sizeLegend\").css({ width: \"100%\" });\n    }\n  } else {\n    $(\"#sizeLegend\").hide();\n    if (chartType == \"mapWizard\") {\n      $(\"#textLegend\").hide();\n      $(\"#colorLegend\").css({ width: \"100%\" });\n    }\n  }\n}\n","var landmass;\nvar landmassBorder;\nvar landmassBorderWidth;\nvar landmassGroup;\nvar bubbleDefaultBorder;\nvar bubbleDefaultColor;\nvar bubbleHighlightBorder;\nvar shapeHighlightBorder;\nif (themeURL=='ecb') {\n  landmass = '#f0f0f0';\n  landmassNA = '#fff';\n  landmassBorder = '#000';\n  landmassBorderWidth = 0.5;\n  landmassGroup = '#f0f0f0';\n  bubbleDefaultBorder = \"#494444\";\n  bubbleDefaultColor = \"#d56620\";\n  bubbleHighlightBorder = \"#fff\";\n  shapeHighlightBorder = '#fff';\n} else {\n  landmass = '#939393';\n  landmassNA = '#939393';\n  landmassBorder = '#939393';\n  landmassBorderWidth = 1;\n  landmassGroup = '#BBBBBB';\n  bubbleDefaultBorder = \"#494444\";\n  bubbleDefaultColor = \"#d56620\";\n  bubbleHighlightBorder = \"#fff\";\n  shapeHighlightBorder = '#fff';\n}\n\nif (project == 'trade-in-raw-materials') {\n  landmass = '#BBBBBB';\n  landmassNA = '#BBBBBB';\n}\n\nif (project == 'itf-test') {\n  landmass = '#BBBBBB';\n  landmassNA = '#BBBBBB';\n}\n\nfunction getColorCountryShapesStyleGeneric(layerData) {\n  //public\n  return function (feature) {\n\n    if (feature && feature.properties && layerData['values'][feature.properties[mapCode]] != null) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: getIndicatorColorScale(layerData['values'][feature.properties[mapCode]][1], layerData['min'], layerData['max'], feature, layerData['colors']) || landmassNA,\n        className: \"hasValue\"\n      };\n    } else if (feature && feature.properties && $.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: landmassNA,\n        className: \"hasValue\"\n      };\n    } else if (feature && feature.properties && $.inArray(feature.properties[mapCode].toString().toLowerCase(), [\"aut\", \"bel\", \"cyp\", \"deu\", \"esp\", \"est\", \"fin\", \"fra\", \"grc\", \"irl\", \"ita\", \"ltu\", \"lux\", \"lva\", \"mlt\", \"nld\", \"prt\", \"svk\", \"svn\"]) > -1) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: '#004996',\n        className: \"hasValue\"\n      };\n    } else if (feature && feature.properties && feature.properties[mapCode]) {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: landmass,\n        className: \"hasValue\"\n      };\n    } else {\n      return {\n        weight: landmassBorderWidth,\n        opacity: 1,\n        color: landmassBorder,\n        fillOpacity: 1,\n        fillColor: landmassGroup,\n        className: \"hasValue\"\n      };\n    }\n\n  };\n\n}\n\n\nfunction bubblesSimpleGeneric (Data) {\n  return function (feature, latlng) {\n    //public\n    return L.circleMarker(latlng, getBubbleStyleGeneric(feature, Data));\n  };\n}\n\nfunction bubblesSimpleColorGeneric (colorData) {\n  return function (feature, latlng) {\n    //public\n    return L.circleMarker(latlng, getBubbleColorGeneric(feature,colorData));\n  };\n}\n\nfunction bubblesSizeColorGeneric (sizeData,colorData) {\n  return function (feature, latlng) {\n    //public\n    return L.circleMarker(latlng, getBubbleSizeColorGeneric(feature,sizeData,colorData));\n  };\n}\n\n\n\nfunction getBubbleStyleGeneric(feature, layerData) {\n  //private\n    var bubbleColor;\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1 && layerData['values'][feature.properties[mapCode]] != null) {\n        bubbleColor = bubbleDefaultColor;\n      if (layerData['values'][feature.properties[mapCode]] != null) {\n        var radius = getBubbleSize(layerData['values'][feature.properties[mapCode]][1], layerData['max'], feature);\n        if (radius != null) {\n          return {\n            radius: radius,\n            fillColor: bubbleColor,\n            color: bubbleDefaultBorder,\n            weight: 1,\n            opacity: 1,\n            fillOpacity: 1\n          };\n        }\n      }\n    }\n    return {\n      radius: 0,\n      opacity: 0\n    };\n}\n\n\nfunction getBubbleSizeColorGeneric(feature,sizeData,colorData) {\n  //private\n    var bubbleColor;\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1 && sizeData['values'][feature.properties[mapCode]] != null) {\n      radius = getBubbleSize(sizeData['values'][feature.properties[mapCode]][1], sizeData['max'], feature);\n      if (colorData != null) {\n        if (colorData['values'][feature.properties[mapCode]] != null) {\n          var bubbleColor = getIndicatorColorScale(colorData['values'][feature.properties[mapCode]][1], colorData['min'], colorData['max'],feature, colorData['colors']);\n          if (radius != null) {\n            return {\n              radius: radius,\n              fillColor: bubbleColor,\n              color: bubbleDefaultBorder,\n              weight: 1,\n              opacity: 1,\n              fillOpacity: 1\n            };\n          }\n        }\n      } else {\n        if (radius != null) {\n          return {\n            radius: radius,\n            fillColor: bubbleDefaultBorder,\n            color: bubbleDefaultBorder,\n            weight: 1,\n            opacity: 1,\n            fillOpacity: 1\n          };\n        }\n      }\n    }\n    return {\n      radius: 0,\n      opacity: 0\n    };\n}\n\nfunction getBubbleColorGeneric(feature,colorData) {\n  //private\n    var bubbleColor;\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n        radius = 5;\n      if (colorData['values'][feature.properties[mapCode]] != null) {\n        var bubbleColor = getIndicatorColorScale(colorData['values'][feature.properties[mapCode]][1], colorData['min'], colorData['max'],feature, colorData['colors']);\n        if (radius != null) {\n          return {\n            radius: radius,\n            fillColor: bubbleColor,\n            color: bubbleDefaultBorder,\n            weight: 1,\n            opacity: 1,\n            fillOpacity: 1\n          };\n        }\n      }\n    }\n    return {\n      radius: 0,\n      opacity: 0\n    };\n}\n\n\nfunction getBasicCountryShapesStyle(feature) {\n  //private\n  function getBasicGroupColor(feature) {\n    if ($.inArray(feature.properties[mapCode].toString().toLowerCase(), MapGroup) > -1) {\n      return landmassGroup;\n    } else {\n      return landmass;\n    }\n  }\n  return {\n    weight: landmassBorderWidth,\n    opacity: 1,\n    color: landmassBorder,\n    fillOpacity: 1,\n    fillColor: getBasicGroupColor(feature)\n  };\n}\n\n\n\n\n\n","var colorIdx = 0,\n    flowGroup = L.layerGroup(),\n    activeLayer = \"\";\nfunction clickFlow(e) {\n  //private\n  var layer = e.target;\n  var layerCode = layer.feature.properties[mapCode];\n  var color = ['blue', 'blue', 'blue'];\n\n  clearFlows();   \n\n  if (activeLayer != layerCode && $.inArray(layerCode.toLowerCase(), MapGroup) > -1) {\n    addLines(\n      {\n        center: layerCode,\n        stars: getFlows(layerCode)\n      },\n      color[colorIdx],\n      centroides,\n      mapdataviz\n    );\n    colorIdx = (colorIdx + 1) % 3;\n    activeLayer = layerCode;\n    updateFlowLegend (layerCode);\n\n  } else {\n    activeLayer = \"\";\n  }\n}\n\n\nfunction clearFlows () {\n  flowGroup.clearLayers().addTo(mapdataviz);  \n}\n\n\n\nfunction getFlows(country) {\n  var data = window.DataforFlow;\n  var idxCountry = data.keys[0].indexOf(country.toUpperCase());\n  var newData = {};\n  var max = 0;\n  $.each(data.keys[1], function (key, value) {\n    var crData = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n    if (max < crData) {\n      max = crData;\n    }\n  });\n  $.each(data.keys[1], function (key, value) {\n    var crData1 = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n    if (crData1 / max > 0.01) {\n      newData[value] = getLineSize(crData1, window.maxBubble);\n    } else {\n      newData[value] = 0;\n    }\n  });\n\n  function getLineSize(d, max) {\n  //private\n    if (d == null || d <= 0) return null;\n    var width = (Math.sqrt(d / max) * 25);\n    return width;\n  }\n\n  return newData;\n\n}\n\n\nfunction clearFlowLegend () {\n  $('#flowLayer .helptext').show();\n  $('#flowLayer #detailsTable').hide();\n  $('#flowLayer .countryPrefix').text('');\n  $('#flowLayer .country').html('');\n}\n\n\n\nfunction updateFlowLegend (layerCode) {\n\n  var flowLabels = {\n    'tableHead1' : {\n      'en':'Main export destinations',\n      'cn':'主要出口目的地'\n    },\n    'tableHead2' : {\n      'en':'USD Millions',\n      'cn':'百万美元'\n    },\n    'world' : {\n      'en':'World',\n      'cn':'世界'\n    },\n    'unspecified' : {\n      'en':'unspecified',\n      'cn':'未标明'\n    },\n    'asia' : {\n      'en':'Asia n.e.s.',\n      'cn':'亚洲n.e.s.'\n    },\n    'headlinePrefix' : {\n      'en':'Exports from ',\n      'cn':'从'\n    },\n    'headlineSuffix' : {\n      'en':'',\n      'cn':'的出口'\n    },\n  }\n\n  if (window.lang_countries[layerCode.toLowerCase()] != null) {\n    $('#flowLayer .country').html(window.lang_countries[layerCode.toLowerCase()]);\n  } else {\n    $('#flowLayer .country').html(layerCode);\n  }\n  $('#flowLayer #countryPrefix').text(flowLabels.headlinePrefix[lang]);\n  $('#flowLayer #countrySuffix').text(flowLabels.headlineSuffix[lang]);\n  $('#flowLayer .helptext').hide();\n  $('#flowLayer #detailsTable').show();\n  $('#flowLayer #detailsTable thead .countries').text(flowLabels.tableHead1[lang]);\n  $('#flowLayer #detailsTable thead .values').text(flowLabels.tableHead2[lang]);\n  $('#flowLayer #detailsTable tbody').remove();\n  $('#flowLayer #detailsTable').append('<tbody>');\n  var legendData = getFlowsLegend(layerCode);\n  $.each(legendData['rank'], function (key, value) {\n    if (window.lang_countries[legendData['values'][value].toLowerCase()] != null) {\n      country = window.lang_countries[legendData['values'][value].toLowerCase()];\n    } else if (legendData['values'][value] == 'WLD') {\n      country = flowLabels.world[lang];\n    } else if (legendData['values'][value] == 'UNSPE') {\n      country = flowLabels.unspecified[lang];\n    } else if (legendData['values'][value] == 'XCD') {\n      country = flowLabels.asia[lang];\n    } else {\n      country = legendData['values'][value];\n    }\n    $('#flowLayer #detailsTable tbody').append('<tr><td>'+country+'</td><td  class=\"tableValues\">'+Math.round(value/1000000)+'</td>');\n  });\n  \n  function getFlowsLegend(country) {\n    var data = window.DataforFlow;\n    var idxCountry = data.keys[0].indexOf(country.toUpperCase());\n    var newData = {};\n    newData['rank'] = [];\n    newData['values'] = {};\n    var max = 0;\n    $.each(data.keys[1], function (key, value) {\n      var crData = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n      if (max < crData) {\n        max = crData;\n      }\n    });\n    $.each(data.keys[1], function (key, value) {\n      var crData1 = data.data[idxCountry][data.keys[1].indexOf(value.toUpperCase())][0];\n      if (crData1 / max > 0.01) {\n        newData['values'][crData1]=value;\n        newData['rank'].push(crData1);\n      }\n    });\n    newData['rank'].sort(function(a, b){return b-a});\n    return newData;\n  }\n}\n\nfunction addLines(flow, color, centros, mapdataviz) {\n  var stars = {};\n  $.each(flow.stars, function (country, value) {\n    if (centros[country.toUpperCase()] != undefined) {\n      stars[country] = {};\n      stars[country]['latlong'] = [parseFloat(centros[country.toUpperCase()].Lat), parseFloat(centros[country.toUpperCase()].Long)];\n      stars[country]['value'] = value\n    }\n  });\n  var center = [parseFloat(centros[flow.center.toUpperCase()].Lat), parseFloat(centros[flow.center.toUpperCase()].Long)];\n  $.each(stars, function (country, values) {\n    var lines = L.polyline([center, values.latlong], {\n      color: color,\n      weight: values.value,\n      fill: 'blue'\n    });\n    flowGroup.addLayer(lines);\n    //flowGroup.addLayer(L.polylineDecorator(lines, {\n    //  patterns: [{\n    //    offset: '100%',\n    //    repeat: 0,\n    //    symbol: L.Symbol.arrowHead({\n    //      pixelSize: values.value*3,\n    //      polygon: false,\n    //      pathOptions: {stroke: true, weight: values.value}\n    //    })\n    //  }]\n    //}));\n  });\n}\n\n/*\n function addRectangle(flow,centros,mapdataviz) {\n var stars = {};\n $.each(flow.stars, function (country,value) {\n stars[country] = {};\n stars[country]['latlong'] = [parseFloat(centros[country.toUpperCase()].Lat),parseFloat(centros[country.toUpperCase()].Long)];\n stars[country]['value'] = value\n });\n $.each(stars, function (country, values) {\n L.rectangle([[values.latlong[0],values.latlong[1]],[values.latlong[0]+values.value,values.latlong[1]+0.75]], {\n fillOpacity : 1,\n color: \"blue\",\n weight: 1\n }).addTo(mapdataviz);\n L.rectangle([[values.latlong[0],values.latlong[1]-0.75],[values.latlong[0]+1,values.latlong[1]]], {\n fillOpacity : 1,\n color: \"red\",\n weight: 1\n }).addTo(mapdataviz);\n });\n }\n */\n\n","\nfunction updateFlowData (indicator) {\n  $.ajax({\n    dataType: \"json\",\n    url: baseURL+\"/api-data?project=\"+project+\"&id=\"+indicator,\n    success: ajaxSuccess,\n    error: function (xhr, ajaxOptions, thrownError) {\n      if (xhr.status == '404') {\n        alert ('No data available.')};\n    }\n  });\n  \n  function ajaxSuccess(data) {\n    if (data != null) {\n      window.DataforFlow=data;\n    } else {\n      alert('No data available.');\n    }\n  }\n\n}\n\n","function highlightAndPopup(feature, layer) {\n  if (!(feature && feature.properties && feature.properties[mapCode])) return;\n  // public\n  var interaction;\n  if (window.flowStatus == \"flow\") {\n    // see module getFlows\n    interaction = clickFlow;\n  } else {\n    interaction = highlightAndPopupClick;\n  }\n  var inEuroArea =\n    feature &&\n    feature.properties &&\n    $.inArray(feature.properties[mapCode].toString().toLowerCase(), [\n      \"aut\",\n      \"bel\",\n      \"cyp\",\n      \"deu\",\n      \"esp\",\n      \"est\",\n      \"fin\",\n      \"fra\",\n      \"grc\",\n      \"irl\",\n      \"ita\",\n      \"ltu\",\n      \"lux\",\n      \"lva\",\n      \"mlt\",\n      \"nld\",\n      \"prt\",\n      \"svk\",\n      \"svn\",\n    ]) > -1;\n  if (\n    (themeURL == \"ecb\" && !inEuroArea) ||\n    $.inArray(\n      layer.feature.properties[mapCode].toString().toLowerCase(),\n      MapGroup\n    ) > -1\n  ) {\n    layer.on({\n      click: interaction,\n\n      mouseover: function () {\n        if (!layer.inFront) {\n          layer.inFront = true;\n          layer\n            .setStyle({\n              fillOpacity: 0.8,\n              weight: 2,\n              color:\n                bubbleMap != null\n                  ? bubbleHighlightBorder\n                  : shapeHighlightBorder,\n            })\n            .bringToFront();\n        }\n      },\n      mouseout: function () {\n        layer.inFront = false;\n        layer.setStyle({\n          fillOpacity: 1,\n          weight: landmassBorderWidth,\n          color: bubbleMap != null ? bubbleDefaultBorder : landmassBorder,\n        });\n        if (typeof disputedLines !== \"undefined\") {\n          disputedLines.bringToFront();\n        }\n        if (typeof flowGroup !== \"undefined\") {\n          flowGroup.eachLayer(function (layer) {\n            if (layer.bringToFront) {\n              layer.bringToFront();\n            } else {\n              layer.eachLayer(function (sublayer) {\n                sublayer.bringToFront();\n              });\n            }\n          });\n        }\n      },\n    });\n    // make layers clickable\n    if (layer.eachLayer) {\n      layer.eachLayer(function (sublayer) {\n        L.Util.setOptions(sublayer, { clickable: true });\n      });\n    } else {\n      L.Util.setOptions(layer, { clickable: true });\n    }\n  }\n}\n\n// show popup on map while closing previous popup\n// disposes mobx autorun function before creating new popup\nvar highlightAndPopupClick = (function (disposer) {\n  return function highlightAndPopupClick(e) {\n    // private\n    var layer = e.target;\n\n    if (disposer) {\n      console.log(\"dispose click layer\");\n      disposer();\n    }\n    disposer = mobx.autorun(\n      function () {\n        console.log(\"click layer\", !!popup._map);\n        var specialTooltip =\n          window.wizardConfig.tabs[wizardConfig.project.tabs[page]]\n            .specialTooltip;\n        var specialTooltipLinks =\n          window.wizardConfig.tabs[wizardConfig.project.tabs[page]]\n            .specialTooltipLinks;\n        var teaserText;\n        if (specialTooltip == \"export-restrictions-main\") {\n          teaserText = mapTeaserExportRestrictionsMain(\n            layer.feature.properties[mapCode]\n          );\n        } else if (specialTooltip == \"export-restrictions\") {\n          teaserText = mapTeaserExportRestrictions(\n            layer.feature.properties[mapCode]\n          );\n        } else if (specialTooltip == \"ifi-country-data\") {\n          teaserText = mapTeaserIfiCountryData(\n            layer.feature.properties[mapCode],\n            specialTooltipLinks\n          );\n        } else if (window.bubbleMap == \"multiColored\") {\n          teaserText = mapTeaserTextMulti(layer.feature.properties[mapCode]);\n        } else {\n          teaserText = mapTeaserText(layer.feature.properties[mapCode]);\n        }\n        if (\n          themeURL == \"ecb\" ||\n          $.inArray(\n            layer.feature.properties[mapCode].toString().toLowerCase(),\n            MapGroup\n          ) > -1\n        ) {\n          popup.setContent(teaserText);\n        }\n      },\n      { name: \"map.click\" }\n    );\n\n    if (\n      themeURL == \"ecb\" ||\n      $.inArray(\n        layer.feature.properties[mapCode].toString().toLowerCase(),\n        MapGroup\n      ) > -1\n    ) {\n      popup.setLatLng(e.latlng);\n      popup.openOn(mapdataviz);\n    }\n  };\n})();\n","\nfunction mapTeaserExportRestrictions(country) {\n\n//global vars\n//  lang_labels\n//  DataforMap\n//  lang\n\n  var labels2 = {};\n\n  labels2['en'] = {\n\t\t1:'export prohibition',\n\t\t2:'export quota',\n\t\t3:'export tax',\n\t\t4:'non-automatic licencing',\n\t\t5:'other measures',\n\t\t6:'no restrictions',\n    undefined:'not reseached'\n\t};\n\n  labels2['cn'] = {\n    1:'禁止出口',\n    2:'出口配额',\n    3:'出口税',\n    4:'非自动许可',\n    5:'其他措施',\n    6:'无限制',\n    undefined:'没有研究'\n  };\n\n  var teaserTitleStart = '<h3 class=\"tooltipTitle\">';\n  var teaserTitleEnd = '</h3>';\n  var teaserTableStart = '<table class=\"tooltipTable\">';\n  var teaserTableLineCenter = '</td><td  class=\"tooltipData\">';\n  var teaserTableEnd = '</td></tr></table>';\n\n  var countryProfile = \"<div class='countryProfilLink'>\"+\n          \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n          \"</div>\";\n\n  var countryName = lang_countries[country.toLowerCase()]+' - '+DataforMap[mapLayerIndex]['title'];\n\n  var tableLines;\n  var tableLine = [];\n\n  if (DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]) {\n    tableLine[0] =  \"<tr>\"+\n                      \"<td>\"+DataforMap[mapLayerIndex]['options']['tooltipUnit']+\":</td>\"+\n                      \"<td class='tooltipData'>\"+getHumanReadData(DataforMap[mapLayerIndex]['values'][country][1])+\" \"+DataforMap[mapLayerIndex]['unit']+\"</td>\"+\n                    \"</tr>\";\n    tableLine[1] =  \"<tr>\"+\n                      \"<td>\"+DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['options']['tooltipUnit']+\":</td>\"+\n                      \"<td class='tooltipData'>\"+labels2[lang][DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['values'][country][1]]+\"</td>\"+\n                    \"</tr>\";\n  } else {\n    tableLine[0] =  \"<tr>\"+\n                      \"<td>\"+DataforMap[mapLayerIndex]['options']['tooltipUnit']+\":</td>\"+\n                      \"<td class='tooltipData'>\"+labels2[lang][DataforMap[mapLayerIndex]['values'][country][1]]+\"</td>\"+\n                    \"</tr>\";\n    tableLine[1] = \"<tr><td></td><td></td></tr>\";\n  }\n\n  tableLines = tableLine[0]+tableLine[1];\n\n  return '' +\n    teaserTitleStart +\n    countryName +\n    teaserTitleEnd +\n    teaserTableStart +\n    tableLines +\n    teaserTableEnd +\n    countryProfile + '';\n}\n\n\n","\nfunction mapTeaserExportRestrictionsMain(country) {\n\n  var labels2 = {};\n\n  labels2['en'] = {\n\t\t1:'export prohibition',\n\t\t2:'export quota',\n\t\t3:'export tax',\n\t\t4:'non-automatic licencing',\n\t\t5:'other measures',\n\t\t6:'no restrictions',\n    undefined:'not reseached'\n\t};\n\n  labels2['cn'] = {\n    1:'禁止出口',\n    2:'出口配额',\n    3:'出口税',\n    4:'非自动许可',\n    5:'其他措施',\n    6:'无限制',\n    undefined:'没有研究'\n  };\n\n  var teaserTitleStart = '<h3 class=\"tooltipTitle\">';\n  var teaserTitleEnd = '</h3>';\n  var teaserTableStart = '<table class=\"tooltipTable\">';\n  var teaserTableLineCenter = '</td><td  class=\"tooltipData\">';\n  var teaserTableEnd = '</td></tr></table>';\n\n  var countryProfile = \"<div class='countryProfilLink'>\"+\n          \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n          \"</div>\";\n\n  var countryName = lang_countries[country.toLowerCase()];\n\n  var tableLineCanvas = [];\n  var tooltipData = [];\n  var tableLines;\n\n  tableLineCanvas[0] = \"<tr><td title='\" + DataforMap[0]['definition'] + \"'>\" + DataforMap[0]['title'] + \":</td><td class='tooltipData'>\";\n  tooltipData[0] = labels2[lang][DataforMap[0]['values'][country][1]];\n  tableLines = tableLineCanvas[0]+tooltipData[0];\n\n  return '' +\n    teaserTitleStart +\n    countryName +\n    teaserTitleEnd +\n    teaserTableStart +\n    tableLines +\n    teaserTableEnd +\n    countryProfile + '';\n}\n\n\n","function mapTeaserIfiCountryData(country, links) {\n  // private\n\n  var teaser = $('<div>');\n  var teaserTitle = $('<h3 class=\"tooltipTitle\">');\n  var teaserTable = $('<table class=\"tooltipTable\">');\n  teaser.append(teaserTitle);\n\n  var link = links[country.toString().toLowerCase()];\n  if (link != null) {\n    var countryProfile = $('<div style=\"text-align: center;\">')\n      .append($('<a target=\"_blank\">')\n                .attr('href', link)\n                .text(lang_labels.countryProfile));\n    teaser.append(countryProfile);\n  }\n\n  var countryName = lang_countries[country.toString().toLowerCase()] || country;\n  teaserTitle.text(countryName);\n\n  var tableLineCanvas;\n  var tooltipData;\n  var dataValue;\n  var hasData = false;\n  var unit;\n\n  for (var i = 0; i < ChartsWithData; i++) {\n    if (DataforMap[i] != null) {\n      tableLineCanvas = $('<tr>')\n        .append($('<td>')\n                  .attr('title', $('<div>').html(DataforMap[i]['definition']).text())\n                  .html(DataforMap[i]['title']));\n\n      tooltipData = $('<td class=\"tooltipData\">');\n      tableLineCanvas.append(tooltipData);\n\n      if (DataforMap[i]['values'][country] != undefined && DataforMap[i]['values'][country][1] != null) {\n        hasData = true;\n        dataValue = getHumanReadData(DataforMap[i]['values'][country][1], DataforMap[i]['options']['tooltipDecimals']);\n        unit = DataforMap[i]['options']['tooltipUnit'] || '';\n        if (unit !== '') {\n          dataValue += '&nbsp;' + unit;\n        }\n        if (DataforMap[i]['values'][country][0] != DataforMap[i]['latestYear']) {\n          dataValue += '&nbsp;(' + DataforMap[i]['values'][country][0] + ')';\n        }\n        tooltipData.html(dataValue);\n      } else {\n        tooltipData.text('\\u2014'); // EM DASH\n      }\n      teaserTable.append(tableLineCanvas);\n    }\n  }\n\n  teaserTitle.after(teaserTable);\n\n  // return first DOM element in jQuery object\n  return teaser[0];\n}\n","function mapTeaserText(country) {\n  // private\n\n  var euGroup = [ 'aut', 'bel', 'bgr', 'cyp', 'deu', 'dnk', 'esp', 'fin',\n                  'fra', 'gbr', 'grc', 'hrv', 'irl', 'ita', 'lux', 'lva',\n                  'ltu', 'mlt', 'nld', 'prt', 'swe', 'cze', 'est', 'hun',\n                  'pol', 'svk', 'svn', 'rou'];\n\n  var teaser = $('<div>');\n  var teaserTitle = $('<h3 class=\"tooltipTitle\">');\n  var teaserTable = $('<table class=\"tooltipTable\">');\n  teaser.append(teaserTitle);\n\n  var countryProfile = $('<div class=\"countryProfilLink\">')\n    .append($('<span id=\"countryProfileMap\">')\n              .attr('value', country)\n              .html(lang_labels.countryProfile));\n  if (typeof wizardConfig !== 'undefined' && wizardConfig.tabs[wizardConfig.project.tabs[page]].countrynotes == 'withEU' && $.inArray(country.toString().toLowerCase(), euGroup) > -1) {\n    countryProfile.append('<span value=\"eu\" id=\"euProfileMap\">view EU profile</span>');\n  }\n  teaser.append(countryProfile);\n\n  var countryName = lang_countries[country.toString().toLowerCase()] || ISO3toFlags[country] || country;\n  teaserTitle.text(countryName);\n\n  var tableLineCanvas;\n  var tooltipData;\n  var dataValue;\n  var hasData = false;\n\n  for (var i = 0; i < ChartsWithData; i++) {\n    if (DataforMap[i] != null) {\n      tableLineCanvas = $('<tr>')\n        .append($('<td>')\n                  .attr('title', $('<div>').html(DataforMap[i]['definition']).text())\n                  .html(DataforMap[i]['title']));\n\n      tooltipData = $('<td class=\"tooltipData\">');\n      tableLineCanvas.append(tooltipData);\n\n      if (DataforMap[i]['values'][country] != undefined && DataforMap[i]['values'][country][1] != null) {\n        hasData = true;\n        dataValue = getHumanReadData(DataforMap[i]['values'][country][1], DataforMap[i]['options']['tooltipDecimals']) + '&nbsp;' + DataforMap[i]['options']['tooltipUnit'];\n        if (DataforMap[i]['values'][country][0] != DataforMap[i]['latestYear']) {\n          dataValue += '&nbsp;(' + DataforMap[i]['values'][country][0] + ')';\n        }\n        tooltipData.html(dataValue);\n      } else {\n        tooltipData.text('\\u2014'); // EM DASH\n      }\n      teaserTable.append(tableLineCanvas);\n    }\n  }\n\n  if (hasData || themeURL != 'ecb') {\n    teaserTitle.after(teaserTable);\n  }\n\n  // return first DOM element in jQuery object\n  return teaser[0];\n}\n","\n\nfunction mapTeaserTextMulti(country) {\n  //private\n\n  var euGroup = [ 'aut', 'bel', 'bgr', 'cyp', 'deu', 'dnk', 'esp', 'fin',\n                  'fra', 'gbr', 'grc', 'hrv', 'irl', 'ita', 'lux', 'lva',\n                  'ltu', 'mlt', 'nld', 'prt', 'swe', 'cze', 'est', 'hun',\n                  'pol', 'svk', 'svn', 'rou'];\n\n  var teaserTitleStart = '<h3 class=\"tooltipTitle\">';\n  var teaserTitleEnd = '</h3>';\n  var teaserTableStart = '<table class=\"tooltipTable\">';\n  var teaserTableLineCenter = '</td><td  class=\"tooltipData\">';\n  var teaserTableEnd = '</td></tr></table>';\n\n  if (typeof wizardConfig !== 'undefined' && wizardConfig.tabs[wizardConfig.project.tabs[page]].countrynotes == 'withEU' && $.inArray(country.toString().toLowerCase(), euGroup) > -1) {\n    var countryProfile = \"<div class='countryProfilLink'>\"+\n            \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n            \"\"+\n            \"<span value='eu' id='euProfileMap' >view EU profile</span>\"+\n            \"</div>\";\n  } else {\n    var countryProfile = \"<div class='countryProfilLink'>\"+\n            \"<span value='\"+country+\"' id='countryProfileMap'>\"+lang_labels.countryProfile+\"</span>\"+\n            \"</div>\";\n  }\n\n\n  if (lang_countries[country.toString().toLowerCase()] != null) {\n    var countryName = lang_countries[country.toString().toLowerCase()]+' - '+DataforMap[mapLayerIndex]['title'];\n  } else {\n    var countryName = country+' - '+DataforMap[mapLayerIndex]['title'];\n  }\n\n  var tableLines;\n  var tableLine = [];\n\n  tableLine[0] =  \"<tr>\"+\n                    \"<td>\"+DataforMap[mapLayerIndex]['options']['tooltipUnit']+\"</td>\"+\n                    \"<td class='tooltipData'>\"+getHumanReadData(DataforMap[mapLayerIndex]['values'][country][1])+\"</td>\"+\n                  \"</tr>\";\n\n  if (DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]) {\n    tableLine[1] =  \"<tr>\"+\n                      \"<td>\"+DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['options']['tooltipUnit']+\"</td>\"+\n                      \"<td class='tooltipData'>\"+getHumanReadData(DataforMap1[mapLayerMatchIndex[mapLayerIndex]-1]['values'][country][1])+\"</td>\"+\n                    \"</tr>\";\n  } else {\n    tableLine[1] = \"<tr><td></td><td></td></tr>\";\n  }\n\n  tableLines = tableLine[0]+tableLine[1];\n\n  return '' +\n    teaserTitleStart +\n    countryName +\n    teaserTitleEnd +\n    teaserTableStart +\n    tableLines +\n    teaserTableEnd +\n    countryProfile + '';\n}\n\n\n","L.LineUtil.PolylineDecorator={computeAngle:function(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI+90},getPointPathPixelLength:function(a){var b=a.length;if(2>b)return 0;for(var c=0,d=a[0],e=1;e<b;e++)c+=d.distanceTo(d=a[e]);return c},getPixelLength:function(a,b){var c=a instanceof L.Polyline?a.getLatLngs():a,d=c.length;if(2>d)return 0;for(var e=0,f=b.project(c[0]),g=1;g<d;g++)e+=f.distanceTo(f=b.project(c[g]));return e},projectPatternOnPath:function(a,b,c,d){var e=[],f;f=0;for(l=a.length;f<\nl;f++)e[f]=d.project(a[f]);a=this.projectPatternOnPointPath(e,b,c);f=0;for(l=a.length;f<l;f++)a[f].latLng=d.unproject(a[f].pt);return a},projectPatternOnPointPath:function(a,b,c){var d=[],e=this.getPointPathPixelLength(a)*c;b=this.interpolateOnPointPath(a,b);d.push(b);if(0<c){a=a.slice(b.predecessor);a[0]=b.pt;for(c=this.getPointPathPixelLength(a);e<=c;)b=this.interpolateOnPointPath(a,e/c),d.push(b),a=a.slice(b.predecessor),a[0]=b.pt,c=this.getPointPathPixelLength(a)}return d},interpolateOnPointPath:function(a,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  b){var c=a.length;if(2>c)return null;if(0>=b)return{pt:a[0],predecessor:0,heading:this.computeAngle(a[0],a[1])};if(1<=b)return{pt:a[c-1],predecessor:c-1,heading:this.computeAngle(a[c-2],a[c-1])};if(2==c)return{pt:this.interpolateBetweenPoints(a[0],a[1],b),predecessor:0,heading:this.computeAngle(a[0],a[1])};for(var d=this.getPointPathPixelLength(a),e=a[0],f=e,g=0,h=0,k=0,j=1;j<c&&h<b;j++)e=f,g=h,f=a[j],k+=e.distanceTo(f),h=k/d;return{pt:this.interpolateBetweenPoints(e,f,(b-g)/(h-g)),predecessor:j-\n2,heading:this.computeAngle(e,f)}},interpolateBetweenPoints:function(a,b,c){return b.x!=a.x?new L.Point(a.x*(1-c)+c*b.x,a.y*(1-c)+c*b.y):new L.Point(a.x,a.y+(b.y-a.y)*c)}};L.RotatedMarker=L.Marker.extend({options:{angle:0},_setPos:function(a){L.Marker.prototype._setPos.call(this,a);if(L.DomUtil.TRANSFORM)this._icon.style[L.DomUtil.TRANSFORM]+=\" rotate(\"+this.options.angle+\"deg)\";else if(L.Browser.ie){var b=this.options.angle*L.LatLng.DEG_TO_RAD;a=Math.cos(b);b=Math.sin(b);this._icon.style.filter+=\" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=\"+a+\", M12=\"+-b+\", M21=\"+b+\", M22=\"+a+\")\"}}});\nL.rotatedMarker=function(a,b){return new L.RotatedMarker(a,b)};L.Symbol=L.Symbol||{};\nL.Symbol.Dash=L.Class.extend({isZoomDependant:!0,options:{pixelSize:10,pathOptions:{}},initialize:function(a){L.Util.setOptions(this,a);this.options.pathOptions.clickable=!1},buildSymbol:function(a,b,c){b=this.options;if(1>=b.pixelSize)return new L.Polyline([a.latLng,a.latLng],b.pathOptions);var d=c.project(a.latLng);a=-(a.heading-90)*L.LatLng.DEG_TO_RAD;a=new L.Point(d.x+b.pixelSize*Math.cos(a+Math.PI)/2,d.y+b.pixelSize*Math.sin(a)/2);d=d.add(d.subtract(a));return new L.Polyline([c.unproject(a),c.unproject(d)],\n  b.pathOptions)}});L.Symbol.dash=function(a){return new L.Symbol.Dash(a)};\nL.Symbol.ArrowHead=L.Class.extend({isZoomDependant:!0,options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(a){L.Util.setOptions(this,a);this.options.pathOptions.clickable=!1},buildSymbol:function(a,b,c){b=this.options;return b.polygon?new L.Polygon(this._buildArrowPath(a,c),b.pathOptions):new L.Polyline(this._buildArrowPath(a,c),b.pathOptions)},_buildArrowPath:function(a,b){var c=b.project(a.latLng),d=-(a.heading-90)*L.LatLng.DEG_TO_RAD,e=this.options.headAngle/\n  2*L.LatLng.DEG_TO_RAD,f=d+e,d=d-e,f=new L.Point(c.x-this.options.pixelSize*Math.cos(f),c.y+this.options.pixelSize*Math.sin(f)),c=new L.Point(c.x-this.options.pixelSize*Math.cos(d),c.y+this.options.pixelSize*Math.sin(d));return[b.unproject(f),a.latLng,b.unproject(c)]}});L.Symbol.arrowHead=function(a){return new L.Symbol.ArrowHead(a)};\nL.Symbol.Marker=L.Class.extend({isZoomDependant:!1,options:{markerOptions:{},rotate:!1},initialize:function(a){L.Util.setOptions(this,a);this.options.markerOptions.clickable=!1;this.options.markerOptions.draggable=!1;this.isZoomDependant=L.Browser.ie&&this.options.rotate},buildSymbol:function(a){return this.options.rotate?(this.options.markerOptions.angle=a.heading,new L.RotatedMarker(a.latLng,this.options.markerOptions)):new L.Marker(a.latLng,this.options.markerOptions)}});L.Symbol.marker=function(a){return new L.Symbol.Marker(a)};L.PolylineDecorator=L.LayerGroup.extend({options:{patterns:[]},initialize:function(a,b){L.LayerGroup.prototype.initialize.call(this);L.Util.setOptions(this,b);this._map=null;this._initPaths(a);this._initPatterns()},_initPaths:function(a){this._paths=[];var b=!1;if(a instanceof L.MultiPolyline||(b=a instanceof L.MultiPolygon)){a=a.getLatLngs();for(var c=0;c<a.length;c++)this._initPath(a[c],b)}else if(a instanceof L.Polyline)this._initPath(a.getLatLngs(),a instanceof L.Polygon);else if(L.Util.isArray(a)&&\n  0<a.length)if(a[0]instanceof L.Polyline)for(c=0;c<a.length;c++)this._initPath(a[c].getLatLngs(),a[c]instanceof L.Polygon);else this._initPath(a)},_isCoordArray:function(a){return L.Util.isArray(a)&&0<a.length&&(a[0]instanceof L.LatLng||L.Util.isArray(a[0])&&2==a[0].length&&\"number\"===typeof a[0][0])},_initPath:function(a,b){var c;c=this._isCoordArray(a)?[a]:a;for(var d=0;d<c.length;d++)b&&c[d].push(c[d][0]),this._paths.push(c[d])},_initPatterns:function(){this._isZoomDependant=!1;this._patterns=[];\n  for(var a,b=0;b<this.options.patterns.length;b++)a=this._parsePatternDef(this.options.patterns[b]),this._patterns.push(a),this._isZoomDependant=this._isZoomDependant||a.isOffsetInPixels||a.isRepeatInPixels||a.symbolFactory.isZoomDependant},setPatterns:function(a){this.options.patterns=a;this._initPatterns();this._softRedraw()},setPaths:function(a){this._initPaths(a);this.redraw()},_parsePatternDef:function(a){var b={cache:[],symbolFactory:a.symbol,isOffsetInPixels:!1,isRepeatInPixels:!1};\"string\"===\ntypeof a.offset&&-1!=a.offset.indexOf(\"%\")?b.offset=parseFloat(a.offset)/100:(b.offset=parseFloat(a.offset),b.isOffsetInPixels=0<b.offset);\"string\"===typeof a.repeat&&-1!=a.repeat.indexOf(\"%\")?b.repeat=parseFloat(a.repeat)/100:(b.repeat=parseFloat(a.repeat),b.isRepeatInPixels=0<b.repeat);return b},onAdd:function(a){this._map=a;this._draw();if(this._isZoomDependant)this._map.on(\"zoomend\",this._softRedraw,this)},onRemove:function(a){this._map.off(\"zoomend\",this._softRedraw,this);this._map=null;L.LayerGroup.prototype.onRemove.call(this,\n  a)},_buildSymbols:function(a,b,c){for(var d=[],e=0,f=c.length;e<f;e++)d.push(b.buildSymbol(c[e],a,this._map,e,f));return d},_getCache:function(a,b,c){var d=a.cache[b];return\"undefined\"===typeof d?(a.cache[b]=[],null):d[c]},_getDirectionPoints:function(a,b){var c=this._map.getZoom(),d=this._getCache(b,c,a);if(d)return d;var e;e=null;var f=this._paths[a];b.isOffsetInPixels?(e=L.LineUtil.PolylineDecorator.getPixelLength(f,this._map),d=b.offset/e):d=b.offset;b.isRepeatInPixels?(e=null!==e?e:L.LineUtil.PolylineDecorator.getPixelLength(f,\n  this._map),e=b.repeat/e):e=b.repeat;d=L.LineUtil.PolylineDecorator.projectPatternOnPath(f,d,e,this._map);return b.cache[c][a]=d},redraw:function(){this._redraw(!0)},_softRedraw:function(){this._redraw(!1)},_redraw:function(a){if(null!==this._map){this.clearLayers();if(a)for(a=0;a<this._patterns.length;a++)this._patterns[a].cache=[];this._draw()}},_drawPattern:function(a){for(var b,c=0;c<this._paths.length;c++){b=this._getDirectionPoints(c,a);b=this._buildSymbols(this._paths[c],a.symbolFactory,b);\n  for(var d=0;d<b.length;d++)this.addLayer(b[d])}},_draw:function(){for(var a=0;a<this._patterns.length;a++)this._drawPattern(this._patterns[a])}});L.polylineDecorator=function(a,b){return new L.PolylineDecorator(a,b)};"]}